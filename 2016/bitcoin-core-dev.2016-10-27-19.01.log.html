<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<title>#bitcoin-core-dev log</title>
<style type="text/css">
/* For the .log.html */
pre { /*line-height: 125%;*/
      white-space: pre-wrap; }
body { background: #f0f0f0; }

body .tm  { color: #007020 }                      /* time */
body .nk  { color: #062873; font-weight: bold }   /* nick, regular */
body .nka { color: #007020; font-weight: bold }  /* action nick */
body .ac  { color: #00A000 }                      /* action line */
body .hi  { color: #4070a0 }                 /* hilights */
/* Things to make particular MeetBot commands stick out */
body .topic     { color: #007020; font-weight: bold }
body .topicline { color: #000080; font-weight: bold }
body .cmd       { color: #007020; font-weight: bold }
body .cmdline  { font-weight: bold }

</style>
</head>

<body>
<pre><a name="l-1"></a><span class="tm">19:01:23</span><span class="nk"> &lt;wumpus&gt;</span> <span class="cmd">#startmeeting</span><span class="cmdline"></span>
<a name="l-2"></a><span class="tm">19:01:23</span><span class="nk"> &lt;lightningbot&gt;</span> Meeting started Thu Oct 27 19:01:23 2016 UTC.  The chair is wumpus. Information about MeetBot at http://wiki.debian.org/MeetBot.
<a name="l-3"></a><span class="tm">19:01:23</span><span class="nk"> &lt;lightningbot&gt;</span> Useful Commands: #action #agreed #help #info #idea #link #topic.
<a name="l-4"></a><span class="tm">19:01:26</span><span class="nk"> &lt;jtimon&gt;</span> 0.13.1 is out 18 mins ago! yay
<a name="l-5"></a><span class="tm">19:01:40</span><span class="nk"> &lt;CodeShark&gt;</span> binaries?
<a name="l-6"></a><span class="tm">19:01:42</span><span class="nk"> &lt;kanzure&gt;</span> <span class="hi">btcdrak:</span> looks like faq menu entry is working now https://bitcoincore.org/en/2016/10/27/segwit-upgrade-guide/
<a name="l-7"></a><span class="tm">19:01:59</span><span class="nk"> &lt;jeremyrubin&gt;</span> here
<a name="l-8"></a><span class="tm">19:02:26</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">CodeShark:</span> https://bitcoin.org/bin/bitcoin-core-0.13.1/
<a name="l-9"></a><span class="tm">19:02:27 </span><span class="nka">* luke-jr</span> <span class="ac">wakes up</span>
<a name="l-10"></a><span class="tm">19:02:46</span><span class="nk"> &lt;CodeShark&gt;</span> Nice!
<a name="l-11"></a><span class="tm">19:02:49</span><span class="nk"> &lt;gmaxwell&gt;</span> https://www.reddit.com/r/Bitcoin/comments/59pt66/bitcoin_core_0131_released/
<a name="l-12"></a><span class="tm">19:03:04</span><span class="nk"> &lt;wumpus&gt;</span> or magnet:?xt=urn:btih:dbe48c446b1113890644bbef03e361269f69c49a&amp;dn=bitcoin-core-0.13.1&amp;tr=udp%3A%2F%2Ftracker.openbittorrent.com%3A80%2Fannounce&amp;tr=udp%3A%2F%2Ftracker.publicbt.com%3A80%2Fannounce&amp;tr=udp%3A%2F%2Ftracker.ccc.de%3A80%2Fannounce&amp;tr=udp%3A%2F%2Ftracker.coppersurfer.tk%3A6969&amp;tr=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969&amp;ws=https%3A%2F%2Fbitcoin.org%2Fbin%2F
<a name="l-13"></a><span class="tm">19:03:51</span><span class="nk"> &lt;wumpus&gt;</span> bitcoin.org should be updated after travis passes on https://github.com/bitcoin-dot-org/bitcoin.org/pull/1400
<a name="l-14"></a><span class="tm">19:04:25</span><span class="nk"> &lt;morcos&gt;</span> congrats everyone!
<a name="l-15"></a><span class="tm">19:04:31</span><span class="nk"> &lt;sipa&gt;</span> indeed!
<a name="l-16"></a><span class="tm">19:04:53</span><span class="nk"> &lt;wumpus&gt;</span> woohoo!
<a name="l-17"></a><span class="tm">19:05:03</span><span class="nk"> &lt;sipa&gt;</span> and thanks everyone for getting us this far
<a name="l-18"></a><span class="tm">19:05:37</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">wumpus:</span> did we get the gitian builds already? is that a record? :o
<a name="l-19"></a><span class="tm">19:05:54</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">luke-jr:</span> yes, four signed builders IIRC
<a name="l-20"></a><span class="tm">19:06:24</span><span class="nk"> &lt;luke-jr&gt;</span> or maybe it just feels like a record since it was the middle of the night for me
<a name="l-21"></a><span class="tm">19:06:30</span><span class="nk"> &lt;jtimon&gt;</span> I'm trying the gitian builder script for the first time
<a name="l-22"></a><span class="tm">19:06:33</span><span class="nk"> &lt;wumpus&gt;</span> it may be a record
<a name="l-23"></a><span class="tm">19:06:43</span><span class="nk"> &lt;wumpus&gt;</span> very fast at least
<a name="l-24"></a><span class="tm">19:07:09</span><span class="nk"> &lt;jtimon&gt;</span> btcdrak reminded me I have no good excuse for not doing gitian builds
<a name="l-25"></a><span class="tm">19:07:33</span><span class="nk"> &lt;sipa&gt;</span> i haven't even started :(
<a name="l-26"></a><span class="tm">19:08:20</span><span class="nk"> &lt;jtimon&gt;</span> well, I have never done it so it may take some time, but the sooner I learn...
<a name="l-27"></a><span class="tm">19:08:22</span><span class="nk"> &lt;btcdrak&gt;</span> <span class="hi">wumpus:</span> I dont see a signed message from you with the binary hashes
<a name="l-28"></a><span class="tm">19:08:44</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">BlueMatt:</span> you can release your PPA now (if you didn't yet)
<a name="l-29"></a><span class="tm">19:09:03</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">btcdrak:</span> https://bitcoin.org/bin/bitcoin-core-0.13.1/SHA256SUMS.asc
<a name="l-30"></a><span class="tm">19:09:04</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">wumpus:</span> i have not yet, will try to get that out
<a name="l-31"></a><span class="tm">19:09:23</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">BlueMatt:</span> don't forget to add libzmq
<a name="l-32"></a><span class="tm">19:09:35</span><span class="nk"> &lt;harding&gt;</span> <span class="hi">btcdrak:</span> https://lists.linuxfoundation.org/pipermail/bitcoin-core-dev/2016-October/000023.html
<a name="l-33"></a><span class="tm">19:09:37</span><span class="nk"> &lt;jonasschnelli&gt;</span> Some uses have complained about the missing ZMQ support
<a name="l-34"></a><span class="tm">19:10:12</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">jonasschnelli:</span> yup
<a name="l-35"></a><span class="tm">19:11:30</span><span class="nk"> &lt;wumpus&gt;</span> ok, any other topics today than 0.13.1?
<a name="l-36"></a><span class="tm">19:11:51</span><span class="nk"> &lt;kanzure&gt;</span> i was going to ask sipa or jtimon about libconsensus follow-up stuff
<a name="l-37"></a><span class="tm">19:12:04</span><span class="nk"> &lt;sipa&gt;</span> i'm the wrong person to ask
<a name="l-38"></a><span class="tm">19:12:16</span><span class="nk"> &lt;wumpus&gt;</span> I'm kind of tired so I wouldn't mind ending early :p
<a name="l-39"></a><span class="tm">19:12:59</span><span class="nk"> &lt;jtimon&gt;</span> <span class="hi">kanzure:</span> nothing to report, nobody suggested anything to me or gave me any feedback since last week
<a name="l-40"></a><span class="tm">19:13:05</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="cmd">#bitcoin-core-dev </span><span class="cmdline">Meeting: wumpus sipa gmaxwell jonasschnelli morcos luke-jr btcdrak sdaftuar jtimon cfields petertodd kanzure bluematt instagibbs phantomcircuit codeshark michagogo marcofalke paveljanik NicolasDorier</span>
<a name="l-41"></a><span class="tm">19:13:24</span><span class="nk"> &lt;BlueMatt&gt;</span> few minutes late there, gmaxwell
<a name="l-42"></a><span class="tm">19:13:27</span><span class="nk"> &lt;jtimon&gt;</span> been focusing on the signedblocks patch
<a name="l-43"></a><span class="tm">19:13:32</span><span class="nk"> &lt;gmaxwell&gt;</span> Just noticed wumpus hadn't done it. :)
<a name="l-44"></a><span class="tm">19:13:43</span><span class="nk"> &lt;sipa&gt;</span> maybe we can discuss signed blocks a bit
<a name="l-45"></a><span class="tm">19:13:51</span><span class="nk"> &lt;gmaxwell&gt;</span> So there are a number of things we want to do in a 0.13.2; so those should get in soon.
<a name="l-46"></a><span class="tm">19:14:06</span><span class="nk"> &lt;morcos&gt;</span> i'm interested in discussing that, because i want to understand whether this is meant to replace the existing testnet or just be another option
<a name="l-47"></a><span class="tm">19:14:10</span><span class="nk"> &lt;morcos&gt;</span> (signed blocks)
<a name="l-48"></a><span class="tm">19:14:11</span><span class="nk"> &lt;gmaxwell&gt;</span> (I guess some are in and just need to backport to 0.13 branch.
<a name="l-49"></a><span class="tm">19:14:21</span><span class="nk"> &lt;wumpus&gt;</span> no, it's not meant to replace the current testnet
<a name="l-50"></a><span class="tm">19:14:24</span><span class="nk"> &lt;kanzure&gt;</span> <span class="hi">re:</span> testnet i also saw the suggestion of loading testnet params from json file
<a name="l-51"></a><span class="tm">19:14:31</span><span class="nk"> &lt;jtimon&gt;</span> fine with me, I still extremely dsilike having to use a global, but don't see other way around it if we want to use the union
<a name="l-52"></a><span class="tm">19:14:51</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">morcos:</span> my expectation was that it would just be another option. Obviously it would be useless for testing much of anything mining related.
<a name="l-53"></a><span class="tm">19:15:11</span><span class="nk"> &lt;jtimon&gt;</span> what I have implemented is from .conf file, not .json file
<a name="l-54"></a><span class="tm">19:15:11</span><span class="nk"> &lt;wumpus&gt;</span> indeed there should at least be a PoW testnet
<a name="l-55"></a><span class="tm">19:15:27</span><span class="nk"> &lt;morcos&gt;</span> ok, i think its still important that we have a well used testnet that uses PoW as similarly to mainnet as possible..  i worry that there is kind of only going to be one "testnet" that people use for most purposes though
<a name="l-56"></a><span class="tm">19:15:47</span><span class="nk"> &lt;morcos&gt;</span> perhaps it would be possible for transactions to easily end up on both?
<a name="l-57"></a><span class="tm">19:15:49</span><span class="nk"> &lt;kanzure&gt;</span> <span class="hi">jtimon:</span> didn't mean to recommend a specific file format; i was just pulling a thing from memory.
<a name="l-58"></a><span class="tm">19:16:05</span><span class="nk"> &lt;morcos&gt;</span> but maybe thats askign for trouble
<a name="l-59"></a><span class="tm">19:16:06</span><span class="nk"> &lt;wumpus&gt;</span> yes the file format is completely not important
<a name="l-60"></a><span class="tm">19:16:13</span><span class="nk"> &lt;jtimon&gt;</span> I'm still trying to test the blocksigning stuff, but the "custom chain" code that preceeds it is pretty much ready I think (feel free to test it and give suggestions), see https://github.com/bitcoin/bitcoin/pull/8994
<a name="l-61"></a><span class="tm">19:16:16</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">morcos:</span> i think the issue is that 'testnet' can mean "a place where we test new network features, and subject it to huge reorgs, and other edge cases" or "a place where we expect companies to build a parallel infrastructure"
<a name="l-62"></a><span class="tm">19:16:28</span><span class="nk"> &lt;cfields_&gt;</span> adding to that, see the faux-mining mode added in the #9000 PR. That was crucial for me for real-world mining testing of segwit.
<a name="l-63"></a><span class="tm">19:16:31</span><span class="nk"> &lt;sipa&gt;</span> and those aren't reconcilable, i think
<a name="l-64"></a><span class="tm">19:16:56</span><span class="nk"> &lt;jtimon&gt;</span> that alone should be helpful for rapidly creating a new segwitnet (for the next thing) or whatever
<a name="l-65"></a><span class="tm">19:17:03</span><span class="nk"> &lt;btcdrak&gt;</span> Blog post is up https://bitcoincore.org/en/2016/10/27/release-0.13.1/
<a name="l-66"></a><span class="tm">19:17:13</span><span class="nk"> &lt;wumpus&gt;</span> one testnet is simply not enough for all testing scenarios
<a name="l-67"></a><span class="tm">19:17:16</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">morcos:</span> alas, I don't think htats really possible. Right now the consensus insability of testnet causes some people to just not test on it.
<a name="l-68"></a><span class="tm">19:17:19</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">btcdrak:</span> awesome
<a name="l-69"></a><span class="tm">19:17:32</span><span class="nk"> &lt;kanzure&gt;</span> <span class="hi">re:</span> company testing, i have been (lightly) planning to use regtest for those purposes. e.g. company-to-company regtest instances.   testnet is still important for testing of course.
<a name="l-70"></a><span class="tm">19:18:07</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">kanzure:</span> right - within a trusted group using a regtest is just as useful as signed blocks
<a name="l-71"></a><span class="tm">19:18:25</span><span class="nk"> &lt;kanzure&gt;</span> oh is that what the proposal is-- i'll have to go look. sorry.
<a name="l-72"></a><span class="tm">19:18:45</span><span class="nk"> &lt;wumpus&gt;</span> it's only when exposing publicly that signing is necessary so people can't grief by generating e.g. tons of blocks
<a name="l-73"></a><span class="tm">19:19:30</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">morcos:</span> the issue is that while not ideal, on mainnet a reasonable way of handling very large reorgs is to shut your site down and wait for the operator to manually do something about it. If you try that strategy on testnet, your service will just be down all the time.
<a name="l-74"></a><span class="tm">19:19:38</span><span class="nk"> &lt;kanzure&gt;</span> so for the company-to-company testing scenario, my assumption was you simply limit the number of participants to one other group, and then you know who is causing problems (either you or the other guys). still, i can see some advantages to public regtesting. sure.
<a name="l-75"></a><span class="tm">19:19:57</span><span class="nk"> &lt;JackH&gt;</span> when will ubuntu ppa's be updated?
<a name="l-76"></a><span class="tm">19:20:17</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">JackH:</span> when i get to it (today)
<a name="l-77"></a><span class="tm">19:20:29</span><span class="nk"> &lt;JackH&gt;</span> ah sweet, you are fast this time then
<a name="l-78"></a><span class="tm">19:20:30</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">btcdrak:</span> nice, the timeline is cool
<a name="l-79"></a><span class="tm">19:21:25</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">BlueMatt:</span> btw, is it possible/easy to do a PPA with Knots as well? (is it something I can do reasonably myself perhaps?)
<a name="l-80"></a><span class="tm">19:21:56</span><span class="nk"> &lt;wumpus&gt;</span> I think everyone can sign up to make PPAs
<a name="l-81"></a><span class="tm">19:22:11 </span><span class="nka">* btcdrak</span> <span class="ac">is reading scrollback</span>
<a name="l-82"></a><span class="tm">19:22:52</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">luke-jr:</span> its not bad
<a name="l-83"></a><span class="tm">19:22:55</span><span class="nk"> &lt;kanzure&gt;</span> without signedblocks, if you had three companies trying to test an integration, you would need multiple different regtest links and to relay blocks from one network to the other with a different signature. i could see how that would be annoying to write. yeah..
<a name="l-84"></a><span class="tm">19:23:03</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">wumpus:</span> yes, it's just not very clear how one would actually make them, especially someone who doesn't use Ubuntu :p
<a name="l-85"></a><span class="tm">19:25:07</span><span class="nk"> &lt;Frederic94500&gt;</span> <span class="cmd">#bitcoin </span><span class="cmdline">If segwit doesn't activate, he will be activate to the next 2016 blocks?</span>
<a name="l-86"></a><span class="tm">19:25:29</span><span class="nk"> &lt;sipa&gt;</span> parse error
<a name="l-87"></a><span class="tm">19:25:30</span><span class="nk"> &lt;jtimon&gt;</span> one thing about #8994 related to wumpus' point about regtest among trusted peers... one can select -chain=custom -chainpetname=mysharedsecret and people without access to mysharedsecret  won't be able to create the genesis block locally
<a name="l-88"></a><span class="tm">19:25:43</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">Frederic94500:</span> we're in the middle of a meeting, please go to #bitcoin
<a name="l-89"></a><span class="tm">19:26:01</span><span class="nk"> &lt;jtimon&gt;</span> for the hash of the genesis block depends on -chainpetname
<a name="l-90"></a><span class="tm">19:26:06</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">luke-jr:</span> in a way it's similar to travis, you have to configure the environment and the building happens on their build servers
<a name="l-91"></a><span class="tm">19:26:16</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">luke-jr:</span> no need to run ubuntu yourself
<a name="l-92"></a><span class="tm">19:26:36</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">Luke-Jr:</span> there are also meta-generator that auto-generated deb/PPA and fedora, etc. out of one script/conf
<a name="l-93"></a><span class="tm">19:26:47</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">wumpus:</span> only in theory....the upload tool stuff is really a bitch to get installed on non-debian systems
<a name="l-94"></a><span class="tm">19:26:55</span><span class="nk"> &lt;luke-jr&gt;</span> :x
<a name="l-95"></a><span class="tm">19:27:24</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">BlueMatt:</span> haha that's sad, I didn't know
<a name="l-96"></a><span class="tm">19:27:34</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">jtimon:</span> I like the idea of a shared secret vs. pubkey based testnet, as it makes it clear that it's only for testing, not doing some kind of "bankchain" sillyness
<a name="l-97"></a><span class="tm">19:28:05</span><span class="nk"> &lt;jtimon&gt;</span> well, signed blocks have other advantages for testing, but it's definitely more dsiruptive
<a name="l-98"></a><span class="tm">19:28:16</span><span class="nk"> &lt;wumpus&gt;</span> bitcoin.org change is merged
<a name="l-99"></a><span class="tm">19:29:08</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">jtimon:</span> also, a hmac based thing may be easier to implement it - can be done by just changing the most-work chain test to require XOR key == 0; doesn't require any datastructures to change
<a name="l-100"></a><span class="tm">19:29:41</span><span class="nk"> &lt;jtimon&gt;</span> you can just share a chainparams.conf file and when if someone decides to load your testnet with too much work, s/mychainname/mychainname2/ and you start again I guess
<a name="l-101"></a><span class="tm">19:29:47</span><span class="nk"> &lt;wumpus&gt;</span> right, changing the block header structure is what makes it scary
<a name="l-102"></a><span class="tm">19:30:53</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">wumpus:</span> s/scary/a lot of work/ :)
<a name="l-103"></a><span class="tm">19:31:12</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">topic:</span> suggestion final alert stuff.
<a name="l-104"></a><span class="tm">19:31:12</span><span class="nk"> &lt;jtimon&gt;</span> <span class="hi">petertodd:</span> not hmac, the chainpetname is simply used for the genesis block timestamp (ie replacing "The Times 03/Jan/2009 Chancellor on brink of second bailout for banks"), see https://github.com/bitcoin/bitcoin/pull/8994/commits/ee3a9e4ed986a3aef84b0e081a31d91237d53294
<a name="l-105"></a><span class="tm">19:31:21</span><span class="nk"> &lt;wumpus&gt;</span> I mean more s/scary/high risk/
<a name="l-106"></a><span class="tm">19:31:31</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">petertodd:</span> it's surprisingly little work, but it's hard to do in a way that is 1) clean 2) runtime selectable 3) reviewable
<a name="l-107"></a><span class="tm">19:31:35</span><span class="nk"> &lt;wumpus&gt;</span> the implementation work is not so bad, review, sure
<a name="l-108"></a><span class="tm">19:31:38</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">petertodd:</span> pick 2
<a name="l-109"></a><span class="tm">19:31:50</span><span class="nk"> &lt;petertodd&gt;</span> fwiw, I use this same kind of hmac auth trick in open timestamps so calendar servers can use clients as a last-ditch backup, without having the servers actually sign anything in a non-repudiatable way
<a name="l-110"></a><span class="tm">19:31:51</span><span class="nk"> &lt;jtimon&gt;</span> we could make other chainparams count for the genesis block hash
<a name="l-111"></a><span class="tm">19:33:10</span><span class="nk"> &lt;wumpus&gt;</span> I mean introducing some union into CBlockHeader would mean there'd be a risk of regression even in the non-testing case
<a name="l-112"></a><span class="tm">19:33:25</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">wumpus:</span> ah, yes, good point
<a name="l-113"></a><span class="tm">19:33:28</span><span class="nk"> &lt;jtimon&gt;</span> <span class="hi">petertodd:</span> well, I find it more scary than painful too, at least the way I'm doing it with the union (there's also a less scary way that uses more memory in mainnet and another one that is simply way way way too disruptive)
<a name="l-114"></a><span class="tm">19:33:46</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">wumpus:</span> I'm wrong - that is scary
<a name="l-115"></a><span class="tm">19:33:52</span><span class="nk"> &lt;btcdrak&gt;</span> <span class="hi">sipa:</span> you have to thank harding! he wrote it all.
<a name="l-116"></a><span class="tm">19:35:15</span><span class="nk"> &lt;kanzure&gt;</span> what is remaining re: final alert things?
<a name="l-117"></a><span class="tm">19:35:24</span><span class="nk"> &lt;kanzure&gt;</span> was the page on one of the .org sites merged
<a name="l-118"></a><span class="tm">19:35:55</span><span class="nk"> &lt;jtimon&gt;</span> topic suggestion: are we removing the use of checkpoints for progress estimation?
<a name="l-119"></a><span class="tm">19:35:55</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">kanzure:</span> we're not on that toopic now.
<a name="l-120"></a><span class="tm">19:36:24</span><span class="nk"> &lt;gmaxwell&gt;</span> topic suggestion: My work removing checkpoints _completely_.
<a name="l-121"></a><span class="tm">19:36:45</span><span class="nk"> &lt;wumpus&gt;</span> <span class="topic">#topic </span><span class="topicline">removing checkpoints</span>
<a name="l-122"></a><span class="tm">19:37:24</span><span class="nk"> &lt;gmaxwell&gt;</span> I have a branch that is removing checkpoints. Haven't totally taken them out yet because I need to replace progress estimation.
<a name="l-123"></a><span class="tm">19:37:46</span><span class="nk"> &lt;gmaxwell&gt;</span> It's not hard to do that, just takes a little twiddling.
<a name="l-124"></a><span class="tm">19:37:50</span><span class="nk"> &lt;wumpus&gt;</span> that's good news - progress estimation is probably the least interesting use of them
<a name="l-125"></a><span class="tm">19:38:00</span><span class="nk"> &lt;gmaxwell&gt;</span> https://github.com/gmaxwell/bitcoin/tree/remove_checkpoints
<a name="l-126"></a><span class="tm">19:38:01</span><span class="nk"> &lt;wumpus&gt;</span> yea
<a name="l-127"></a><span class="tm">19:38:11</span><span class="nk"> &lt;wumpus&gt;</span> <span class="cmd">#link </span><span class="cmdline">https://github.com/gmaxwell/bitcoin/tree/remove_checkpoints</span>
<a name="l-128"></a><span class="tm">19:38:47</span><span class="nk"> &lt;gmaxwell&gt;</span> There are three main components:  Removal of checkpoints for IBD test.  This is a no brainer.  Removal of checkpoints for script checking-- this depends on benchmark results, as we discussed perhaps 4 meethings ago. and the third:
<a name="l-129"></a><span class="tm">19:38:50</span><span class="nk"> &lt;wumpus&gt;</span> did you run into something difficult / uncertain?
<a name="l-130"></a><span class="tm">19:39:42</span><span class="nk"> &lt;gmaxwell&gt;</span> The last use is avoiding header flooding.  I came up with a tidy way to do this, I think, but it requires an implicit consensus change but I think it is very trivial and obviously fine. But likely to delay things.
<a name="l-131"></a><span class="tm">19:39:43</span><span class="nk"> &lt;wumpus&gt;</span> what about the DoS protection?
<a name="l-132"></a><span class="tm">19:40:07</span><span class="nk"> &lt;wumpus&gt;</span> consensus change, as in a softfork?
<a name="l-133"></a><span class="tm">19:40:14</span><span class="nk"> &lt;morcos&gt;</span> do tell
<a name="l-134"></a><span class="tm">19:40:20</span><span class="nk"> &lt;gmaxwell&gt;</span> not a softfork. I'm telling.
<a name="l-135"></a><span class="tm">19:40:38</span><span class="nk"> &lt;gmaxwell&gt;</span> My changes introduce a constant in chain params which is the known amount of work in the best chain at ~release time.  The IBD check uses this, we've talked about using that before for some checkpoint like things.
<a name="l-136"></a><span class="tm">19:41:34</span><span class="nk"> &lt;gmaxwell&gt;</span> So I propose that once we have any header chain that has at least that much work in it, we do not accept any more blocks with difficulty under 16 million-- which is roughly equal to about 10 commercially available mining devices.
<a name="l-137"></a><span class="tm">19:41:35</span><span class="nk"> &lt;petertodd&gt;</span> note that from the point of view of consensus this is technically speaking no different than making bitcoin core come with a set of blockchain data
<a name="l-138"></a><span class="tm">19:41:49</span><span class="nk"> &lt;jtimon&gt;</span> isn't the minimum difficulty check a softfork?
<a name="l-139"></a><span class="tm">19:42:06</span><span class="nk"> &lt;gmaxwell&gt;</span> This is a consenus change because the chain could never fall below difficulty 16 million in the future, but an unobservable one... as observing it would require the difficulty fall below 16 million. :)
<a name="l-140"></a><span class="tm">19:42:10</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">petertodd:</span> well it wouldn't lock in specific blocks as the checkpoints do
<a name="l-141"></a><span class="tm">19:42:10</span><span class="nk"> &lt;petertodd&gt;</span> er, gregs #2 thing makes my statement invalid :)
<a name="l-142"></a><span class="tm">19:42:40</span><span class="nk"> &lt;jtimon&gt;</span> <span class="hi">gmaxwell:</span> yeah, it's a softfork in the pedantic sense
<a name="l-143"></a><span class="tm">19:42:42</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">wumpus:</span> right, I mean, w/o the minimum diff thing, the effect would be no different than ensuring bitcoin core shipped with blockchain data
<a name="l-144"></a><span class="tm">19:42:45</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jtimon:</span> in a sense, but an unobservable one. Yes.
<a name="l-145"></a><span class="tm">19:42:45</span><span class="nk"> &lt;jeremyrubin&gt;</span> I don't think that's great...
<a name="l-146"></a><span class="tm">19:43:03</span><span class="nk"> &lt;jeremyrubin&gt;</span> Can't difficulty fall that low under a soft fork to a different PoW?
<a name="l-147"></a><span class="tm">19:43:16</span><span class="nk"> &lt;jeremyrubin&gt;</span> (not that that should happen)
<a name="l-148"></a><span class="tm">19:43:19</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">jeremyrubin:</span> yes, and at that point your idea of what bitcoin is is so insecure as to be useless
<a name="l-149"></a><span class="tm">19:43:22</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jeremyrubin:</span> then you take out the rule.
<a name="l-150"></a><span class="tm">19:43:30</span><span class="nk"> &lt;jtimon&gt;</span> like really imposing the 21 M limit, that was a softfork too, but no need to use bip9 to deploy I guess
<a name="l-151"></a><span class="tm">19:43:40</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">jtimon:</span> +1
<a name="l-152"></a><span class="tm">19:43:43</span><span class="nk"> &lt;Chris_Stewart_5&gt;</span> wouldn't that be a hard fork to remove it if it was enforced?
<a name="l-153"></a><span class="tm">19:43:53</span><span class="nk"> &lt;gmaxwell&gt;</span> the 16 million number was just a result of a tidy amount with bitmasking that also is really infeasable to attack but also trivial to mine... 10 devices.
<a name="l-154"></a><span class="tm">19:44:11</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">Chris_Stewart_5:</span> yes, removiing is a hard fork, but remember we're talking about a situation where bitcoin as you know it is useless, so tha'ts irrelevant IMO
<a name="l-155"></a><span class="tm">19:44:24</span><span class="nk"> &lt;gmaxwell&gt;</span> If someone worried that 16 million were too high, there is a pretty broad range that the number could reasonable be set in.
<a name="l-156"></a><span class="tm">19:44:54</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">gmaxwell:</span> honestly, I'd be inclined to go even higher - 10 machines is absolutely nothing
<a name="l-157"></a><span class="tm">19:45:18</span><span class="nk"> &lt;gmaxwell&gt;</span> Anything over 100k would pretty much halt any real risk headerflooding, with current hardware. 16M adds a good amount of headroom.
<a name="l-158"></a><span class="tm">19:45:24</span><span class="nk"> &lt;Chris_Stewart_5&gt;</span> but in jeremyrubin example if we are soft forkign to a different PoW that doesn't necessarily hold true, does it? Perhaps I don't understand circumstances of forking to another PoW though..
<a name="l-159"></a><span class="tm">19:45:36</span><span class="nk"> &lt;jeremyrubin&gt;</span> <span class="hi">petertodd:</span> I disagree, but that's more of a wizards topic
<a name="l-160"></a><span class="tm">19:45:50</span><span class="nk"> &lt;jtimon&gt;</span> <span class="hi">gmaxwell:</span> are you sure you want to change CheckBlockHeader instead of CheckProofOfWork ?
<a name="l-161"></a><span class="tm">19:45:53</span><span class="nk"> &lt;morcos&gt;</span> <span class="hi">gmaxwell:</span> i'm not so sure about that.. isn't the abilitity to soft fork to a different PoW something we might want to preserve?
<a name="l-162"></a><span class="tm">19:45:57</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">Chris_Stewart_5:</span> a "soft-fork" to a different PoW isn't really a soft-fork, because the old clients are now horribly insecure
<a name="l-163"></a><span class="tm">19:46:10</span><span class="nk"> &lt;jeremyrubin&gt;</span> <span class="hi">petertodd:</span> e.g., something like tadge's proof of idle
<a name="l-164"></a><span class="tm">19:46:11</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">Chris_Stewart_5:</span> softforking to a new pow is not really a softfork.  In any case: keeping it at least that high would require only 10 devices, and ... any old nodes in that world could have their chain redone by those same 10 devices.
<a name="l-165"></a><span class="tm">19:46:23</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">morcos:</span> there is no such thing as a soft-fork to a different proof-of-work - doing that doesn't have the security characteristics of a soft-fork
<a name="l-166"></a><span class="tm">19:46:25</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">morcos:</span> it is preserved.
<a name="l-167"></a><span class="tm">19:46:33</span><span class="nk"> &lt;gmaxwell&gt;</span> to the extent that it exists.
<a name="l-168"></a><span class="tm">19:46:34</span><span class="nk"> &lt;morcos&gt;</span> give how hard hard forks are.. imagine there was a contentious HF that took majority hash power..  might the minority not want to be able to softfork away without having to agree on a HF
<a name="l-169"></a><span class="tm">19:46:46</span><span class="nk"> &lt;jtimon&gt;</span> <span class="hi">Chris_Stewart_5:</span> yeah if you want a different pow just hardfork
<a name="l-170"></a><span class="tm">19:46:58</span><span class="nk"> &lt;gmaxwell&gt;</span> Imagine the diff floor is 1. okay, then the diff goes down to 1. okay.. now I start up a 2011 asic miner and immediately break all those un upgraded nodes.
<a name="l-171"></a><span class="tm">19:47:01</span><span class="nk"> &lt;morcos&gt;</span> ok, i need to think about it more.. but i think we should analyze all those scenarios
<a name="l-172"></a><span class="tm">19:47:21</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">morcos:</span> but thats also why my figure is ~10 devices and not 10,000 devices. :)
<a name="l-173"></a><span class="tm">19:47:43</span><span class="nk"> &lt;gmaxwell&gt;</span> In any case. I think it's fairly easy to understand. And I think the solution basically has all the properties that we want.
<a name="l-174"></a><span class="tm">19:47:48</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">morcos:</span> again, this is a scenario where bitcoin as you know it is horribly insecure - anyone with &gt;10 machines could attack your min-diff chain. I had a high enough credit limit as a student to buy more machines than that. :)
<a name="l-175"></a><span class="tm">19:47:51</span><span class="nk"> &lt;gmaxwell&gt;</span> But I expected thought and discussion on it.
<a name="l-176"></a><span class="tm">19:48:12</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">gmaxwell:</span> ideally we would like to add the property that someone cant flood you during IBD, but to be fair we also suffer from DoS issues there now
<a name="l-177"></a><span class="tm">19:48:24</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">gmaxwell:</span> if hardware improves, do we up the min diff again? IMO that'd be reasonable
<a name="l-178"></a><span class="tm">19:48:31</span><span class="nk"> &lt;morcos&gt;</span> <span class="hi">petertodd:</span> not if you've softforked in other PoW requirements that the attackers don't have the hashing or whateve rto produce
<a name="l-179"></a><span class="tm">19:48:42</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">BlueMatt:</span> So hold up there.
<a name="l-180"></a><span class="tm">19:49:01</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">BlueMatt:</span> I think what I propos has _exactly_ as good protection for that as we currently have, if not somewhat better.
<a name="l-181"></a><span class="tm">19:49:09</span><span class="nk"> &lt;Chris_Stewart_5&gt;</span> And this solves header flooding because it requires the attacker to provide headers with ATLEAST that much difficulty, correct?
<a name="l-182"></a><span class="tm">19:49:18</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">gmaxwell:</span> didnt disagree, only suggested that ideally we'd fix the issues we have now
<a name="l-183"></a><span class="tm">19:49:18</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">morcos:</span> but again, because that's not really a soft-fork, might as well do a small hardfork at that point to drop the requirement for SHA2 PoW at some point wel before just 10 machines are needed
<a name="l-184"></a><span class="tm">19:49:19</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">BlueMatt:</span> right now we won't accept lower difficulty blocks after we've validated up to a paritcular checkpoint.
<a name="l-185"></a><span class="tm">19:49:30</span><span class="nk"> &lt;gmaxwell&gt;</span> (okay I'll still explain as other people might miss this)
<a name="l-186"></a><span class="tm">19:49:51</span><span class="nk"> &lt;gmaxwell&gt;</span> So you can consider two cases: one where the first peer you fetch from is an attacker, and one where the first peer is honest.
<a name="l-187"></a><span class="tm">19:50:10</span><span class="nk"> &lt;morcos&gt;</span> <span class="hi">petertodd:</span> i need to think about that.. but i imagine it might always be easier to soft fork, even under adverse scenario like that
<a name="l-188"></a><span class="tm">19:50:11</span><span class="nk"> &lt;gmaxwell&gt;</span> If the first peer is an attacker, you'll get header flooded now or under my proposal. (but at least it's just a one time initial install exposure)
<a name="l-189"></a><span class="tm">19:50:33</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">gmaxwell:</span> well, not sure its better since the "frst checkpoint" is "known amount of work in the best chain at ~release time" instead of a few along the way to 300k
<a name="l-190"></a><span class="tm">19:50:51</span><span class="nk"> &lt;gmaxwell&gt;</span> If the first peer is not an attacker, in my propoal you'll quickly have all the headers and blocked from any attacks. Also no less good than now.
<a name="l-191"></a><span class="tm">19:50:53</span><span class="nk"> &lt;BlueMatt&gt;</span> (under first-peer-is-evil attacks, but ok)
<a name="l-192"></a><span class="tm">19:51:00</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">BlueMatt:</span> but my proposal needs only headers.
<a name="l-193"></a><span class="tm">19:51:16</span><span class="nk"> &lt;gmaxwell&gt;</span> oh under first peer is attacker
<a name="l-194"></a><span class="tm">19:51:17</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">morcos:</span> anyway, good to do up some deployment scenarios regardless to explain how that'd work
<a name="l-195"></a><span class="tm">19:51:17</span><span class="nk"> &lt;BlueMatt&gt;</span> oh, i thought we applied checkpoints against headers now
<a name="l-196"></a><span class="tm">19:51:18</span><span class="nk"> &lt;BlueMatt&gt;</span> nvm
<a name="l-197"></a><span class="tm">19:51:49</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">BlueMatt:</span> we do; after passing a certain checkpoint, we don't accept headers that fork off before that checkpoint
<a name="l-198"></a><span class="tm">19:52:06</span><span class="nk"> &lt;BlueMatt&gt;</span> ok, lets take this offline
<a name="l-199"></a><span class="tm">19:52:11</span><span class="nk"> &lt;BlueMatt&gt;</span> suggested additional topics?
<a name="l-200"></a><span class="tm">19:52:13</span><span class="nk"> &lt;gmaxwell&gt;</span> Okay, thats the overview.
<a name="l-201"></a><span class="tm">19:52:42</span><span class="nk"> &lt;gmaxwell&gt;</span> I suggested the final alert. I suppose I should coordinate with achow and cobra to get the thing up and alert out. Any reasons to hold off?
<a name="l-202"></a><span class="tm">19:53:38</span><span class="nk"> &lt;jtimon&gt;</span> mhmm, pindexBestHeader-&gt;nChainWork &lt; UintToArith256(consensusParams.nMinimumChainWork) ? consensusParams.powLimit : consensusParams.powLimitLater
<a name="l-203"></a><span class="tm">19:53:38</span><span class="nk"> &lt;jtimon&gt;</span> what about instead... block.nHeight &lt; consensusParams.highPowLimitHeight ? consensusParams.powLimit : consensusParams.powLimitLater
<a name="l-204"></a><span class="tm">19:53:39</span><span class="nk"> &lt;wumpus&gt;</span> <span class="topic">#topic </span><span class="topicline">the final alert</span>
<a name="l-205"></a><span class="tm">19:53:53</span><span class="nk"> &lt;wumpus&gt;</span> no reason IMO
<a name="l-206"></a><span class="tm">19:53:55</span><span class="nk"> &lt;btcdrak&gt;</span> <span class="hi">gmaxwell:</span> please get it over with.
<a name="l-207"></a><span class="tm">19:54:39</span><span class="nk"> &lt;gmaxwell&gt;</span> Okay. will coordinate.
<a name="l-208"></a><span class="tm">19:55:13</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jtimon:</span> that would make it trivial for an attacker to capture you on a fake chain.
<a name="l-209"></a><span class="tm">19:55:38</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jtimon:</span> just feed you a chain of diff 1 blocks of that height.. and now you won't accept the low diff blocks on the real chain anymore.
<a name="l-210"></a><span class="tm">19:56:48</span><span class="nk"> &lt;jtimon&gt;</span> <span class="hi">gmaxwell:</span> how am I prevented from handling reorgs in the same way as you?
<a name="l-211"></a><span class="tm">19:57:14</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jtimon:</span> creating many blocks is easy. creating much work is hard
<a name="l-212"></a><span class="tm">19:57:43</span><span class="nk"> &lt;gmaxwell&gt;</span> anyting left in the meeting (I'll continue this convo after)
<a name="l-213"></a><span class="tm">19:57:49</span><span class="nk"> &lt;jtimon&gt;</span> what I think it's add less risk since  consensusParams.highPowLimitHeight is fixed but nMinimumChainWork is expected to chain with each release, no?
<a name="l-214"></a><span class="tm">19:58:24</span><span class="nk"> &lt;jtimon&gt;</span> I must be missing something, I don't see the vulnerability that my proposed change introduces
<a name="l-215"></a><span class="tm">19:58:26</span><span class="nk"> &lt;wumpus&gt;</span> ok, that concludes the meeting I think
<a name="l-216"></a><span class="tm">19:58:34</span><span class="nk"> &lt;wumpus&gt;</span> <span class="cmd">#endmeeting</span><span class="cmdline"></span></pre>
</body></html>
