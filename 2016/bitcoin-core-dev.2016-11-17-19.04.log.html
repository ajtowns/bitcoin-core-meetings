<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<title>#bitcoin-core-dev log</title>
<style type="text/css">
/* For the .log.html */
pre { /*line-height: 125%;*/
      white-space: pre-wrap; }
body { background: #f0f0f0; }

body .tm  { color: #007020 }                      /* time */
body .nk  { color: #062873; font-weight: bold }   /* nick, regular */
body .nka { color: #007020; font-weight: bold }  /* action nick */
body .ac  { color: #00A000 }                      /* action line */
body .hi  { color: #4070a0 }                 /* hilights */
/* Things to make particular MeetBot commands stick out */
body .topic     { color: #007020; font-weight: bold }
body .topicline { color: #000080; font-weight: bold }
body .cmd       { color: #007020; font-weight: bold }
body .cmdline  { font-weight: bold }

</style>
</head>

<body>
<pre><a name="l-1"></a><span class="tm">19:04:21</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="cmd">#startmeeting</span><span class="cmdline"></span>
<a name="l-2"></a><span class="tm">19:04:21</span><span class="nk"> &lt;lightningbot&gt;</span> Meeting started Thu Nov 17 19:04:21 2016 UTC.  The chair is jonasschnelli. Information about MeetBot at http://wiki.debian.org/MeetBot.
<a name="l-3"></a><span class="tm">19:04:21</span><span class="nk"> &lt;lightningbot&gt;</span> Useful Commands: #action #agreed #help #info #idea #link #topic.
<a name="l-4"></a><span class="tm">19:04:27</span><span class="nk"> &lt;wumpus&gt;</span> hello
<a name="l-5"></a><span class="tm">19:05:09</span><span class="nk"> &lt;sipa&gt;</span> present
<a name="l-6"></a><span class="tm">19:05:31 </span><span class="nka">* michagogo</span> <span class="ac">looks at wumpus's @</span>
<a name="l-7"></a><span class="tm">19:05:34</span><span class="nk"> &lt;CodeShark&gt;</span> Hi
<a name="l-8"></a><span class="tm">19:05:37</span><span class="nk"> &lt;jonasschnelli&gt;</span> No topic proposals?
<a name="l-9"></a><span class="tm">19:05:50</span><span class="nk"> &lt;MarcoFalke_web&gt;</span> Short meeting, then :P
<a name="l-10"></a><span class="tm">19:06:02</span><span class="nk"> &lt;instagibbs&gt;</span> ideas for account removal/replacement? I'm getting annoyed at account code :)
<a name="l-11"></a><span class="tm">19:06:02</span><span class="nk"> &lt;sipa&gt;</span> can i ask a bit about shared_ptr changes?
<a name="l-12"></a><span class="tm">19:06:32</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="topic">#topic </span><span class="topicline">shared_ptr</span>
<a name="l-13"></a><span class="tm">19:06:42</span><span class="nk"> &lt;morcos&gt;</span> i have a topic, i'd like tot alk about priority
<a name="l-14"></a><span class="tm">19:07:01</span><span class="nk"> &lt;sipa&gt;</span> the #topic is only recognized when said by the chair, i think
<a name="l-15"></a><span class="tm">19:07:06</span><span class="nk"> &lt;morcos&gt;</span> also +1 instagibbs
<a name="l-16"></a><span class="tm">19:07:14</span><span class="nk"> &lt;jonasschnelli&gt;</span> I'm the chair
<a name="l-17"></a><span class="tm">19:07:19</span><span class="nk"> &lt;sipa&gt;</span> oh!
<a name="l-18"></a><span class="tm">19:07:28</span><span class="nk"> &lt;instagibbs&gt;</span> sipa, better watch yourself ;)
<a name="l-19"></a><span class="tm">19:07:37 </span><span class="nka">* sipa</span> <span class="ac">will go stand in the corner</span>
<a name="l-20"></a><span class="tm">19:07:44</span><span class="nk"> &lt;sipa&gt;</span> so, i have a series of 3 PRs to introduce shared_ptr in more places
<a name="l-21"></a><span class="tm">19:08:14</span><span class="nk"> &lt;jonasschnelli&gt;</span> https://github.com/bitcoin/bitcoin/pull/9125
<a name="l-22"></a><span class="tm">19:08:20</span><span class="nk"> &lt;sipa&gt;</span> <span class="cmd">#9125, </span><span class="cmdline">#8580, #8589</span>
<a name="l-23"></a><span class="tm">19:08:22</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9125 | Make CBlock a vector of shared_ptr of CTransactions by sipa · Pull Request #9125 · bitcoin/bitcoin · GitHub
<a name="l-24"></a><span class="tm">19:08:24</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/8580 | Make CTransaction actually immutable by sipa · Pull Request #8580 · bitcoin/bitcoin · GitHub
<a name="l-25"></a><span class="tm">19:08:25</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/8589 | Inline CTxInWitness inside CTxIn (on top of #8580) by sipa · Pull Request #8589 · bitcoin/bitcoin · GitHub
<a name="l-26"></a><span class="tm">19:09:05</span><span class="nk"> &lt;wumpus&gt;</span> I'm testing #9125
<a name="l-27"></a><span class="tm">19:09:05</span><span class="nk"> &lt;sipa&gt;</span> the first i hope is a clear improvement and necessary refactor for the ones that follow (and it's 3-4% reindex performance improvement)
<a name="l-28"></a><span class="tm">19:09:06</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9125 | Make CBlock a vector of shared_ptr of CTransactions by sipa · Pull Request #9125 · bitcoin/bitcoin · GitHub
<a name="l-29"></a><span class="tm">19:09:29</span><span class="nk"> &lt;jonasschnelli&gt;</span> Do I understand it right that one of the key benefits of the shared_ptr transition are the concurrency benefits with less locking?
<a name="l-30"></a><span class="tm">19:09:43</span><span class="nk"> &lt;sipa&gt;</span> that is a potential future advantage
<a name="l-31"></a><span class="tm">19:09:44</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">sipa:</span> concept ack+1000
<a name="l-32"></a><span class="tm">19:09:45</span><span class="nk"> &lt;wumpus&gt;</span> also less copying
<a name="l-33"></a><span class="tm">19:09:45</span><span class="nk"> &lt;gmaxwell&gt;</span> No.
<a name="l-34"></a><span class="tm">19:09:46</span><span class="nk"> &lt;jonasschnelli&gt;</span> and less copis
<a name="l-35"></a><span class="tm">19:09:47</span><span class="nk"> &lt;BlueMatt&gt;</span> to all of them
<a name="l-36"></a><span class="tm">19:09:54</span><span class="nk"> &lt;sipa&gt;</span> but less copying is the immediate reason
<a name="l-37"></a><span class="tm">19:09:58</span><span class="nk"> &lt;gmaxwell&gt;</span> Thats an abstract advantage of shared pointers.
<a name="l-38"></a><span class="tm">19:10:01</span><span class="nk"> &lt;jonasschnelli&gt;</span> Okay.
<a name="l-39"></a><span class="tm">19:10:16</span><span class="nk"> &lt;gmaxwell&gt;</span> But right avoiding copies is that it accomplishes here.
<a name="l-40"></a><span class="tm">19:10:27</span><span class="nk"> &lt;jonasschnelli&gt;</span> So performance and memory? Right?
<a name="l-41"></a><span class="tm">19:10:28</span><span class="nk"> &lt;sipa&gt;</span> the second one may be more controversial, as it affects the wallet code significantly, making CWalletTx not inherit from CTransaction anymore, and move it to a field
<a name="l-42"></a><span class="tm">19:10:32</span><span class="nk"> &lt;cfields&gt;</span> <span class="hi">sipa:</span> is there any specific part of the first that you think needs extra scrutiny/testing?
<a name="l-43"></a><span class="tm">19:10:38</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">sipa:</span> YES
<a name="l-44"></a><span class="tm">19:10:59</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">wumpus:</span> YES as in "do it" or YES as in "it's more controversial"
<a name="l-45"></a><span class="tm">19:11:03</span><span class="nk"> &lt;wumpus&gt;</span> CWalleTx is pretty much the example of an abuse of inheritance
<a name="l-46"></a><span class="tm">19:11:05</span><span class="nk"> &lt;wumpus&gt;</span> in OOP
<a name="l-47"></a><span class="tm">19:11:11</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> that was exactly my response.
<a name="l-48"></a><span class="tm">19:11:12</span><span class="nk"> &lt;sipa&gt;</span> ok, glad you agree on that
<a name="l-49"></a><span class="tm">19:11:38</span><span class="nk"> &lt;jonasschnelli&gt;</span> Yes. Also, is there a reason for the extra CMerkleTx inheritance?
<a name="l-50"></a><span class="tm">19:11:46</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> abuse of C++
<a name="l-51"></a><span class="tm">19:11:49</span><span class="nk"> &lt;wumpus&gt;</span> wallettx should *contain* a line-level tx, plus metadata
<a name="l-52"></a><span class="tm">19:11:50</span><span class="nk"> &lt;jonasschnelli&gt;</span> heh
<a name="l-53"></a><span class="tm">19:12:02</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> meaning you don't need to copy the interface
<a name="l-54"></a><span class="tm">19:12:46</span><span class="nk"> &lt;sipa&gt;</span> and then inlining CTxInWitness is to just simplify the code
<a name="l-55"></a><span class="tm">19:13:03</span><span class="nk"> &lt;sipa&gt;</span> (which is likely a small performance regression for non-witness txn, but an improvement for witness txn)
<a name="l-56"></a><span class="tm">19:13:45</span><span class="nk"> &lt;sipa&gt;</span> if no further comments on that, i'm done with the topic
<a name="l-57"></a><span class="tm">19:13:51</span><span class="nk"> &lt;jonasschnelli&gt;</span> While were at it, we should also remove "main.h" and "txmempool.h" from wallet.c (slightly OT) to avoid the circular dependency.
<a name="l-58"></a><span class="tm">19:13:53</span><span class="nk"> &lt;wumpus&gt;</span> no comments, i think it's the way forward
<a name="l-59"></a><span class="tm">19:14:11</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> why is that a circular dependency?
<a name="l-60"></a><span class="tm">19:14:11</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">sipa:</span> ack
<a name="l-61"></a><span class="tm">19:14:12</span><span class="nk"> &lt;gmaxwell&gt;</span> why isn't it all done and merged yet? :P
<a name="l-62"></a><span class="tm">19:14:23</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> main and txmempool should not depend on wallet
<a name="l-63"></a><span class="tm">19:14:32</span><span class="nk"> &lt;sipa&gt;</span> but wallet depending on main seems perfectly expected for me
<a name="l-64"></a><span class="tm">19:14:34</span><span class="nk"> &lt;wumpus&gt;</span> wallet is allowed to depend on stuff in libbitcoin_server
<a name="l-65"></a><span class="tm">19:14:42</span><span class="nk"> &lt;wumpus&gt;</span> just not the other way around
<a name="l-66"></a><span class="tm">19:14:44</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">sipa:</span> have a look at https://github.com/bitcoin/bitcoin/pull/8745
<a name="l-67"></a><span class="tm">19:15:24</span><span class="nk"> &lt;sipa&gt;</span> what should i see there?
<a name="l-68"></a><span class="tm">19:15:37</span><span class="nk"> &lt;wumpus&gt;</span> I think we can discuss this outside the meeting? other more urgent topics?
<a name="l-69"></a><span class="tm">19:15:45</span><span class="nk"> &lt;sipa&gt;</span> ah, i understnad
<a name="l-70"></a><span class="tm">19:15:51</span><span class="nk"> &lt;jonasschnelli&gt;</span> Yes. Outside the meeting.
<a name="l-71"></a><span class="tm">19:15:51</span><span class="nk"> &lt;sipa&gt;</span> yes, let's discuss design at another time
<a name="l-72"></a><span class="tm">19:16:10</span><span class="nk"> &lt;jonasschnelli&gt;</span> morcos had the topic proposal "priority"
<a name="l-73"></a><span class="tm">19:16:16</span><span class="nk"> &lt;morcos&gt;</span> Lets talk about potential for account or priority removal (2 separate topics)
<a name="l-74"></a><span class="tm">19:16:27</span><span class="nk"> &lt;sipa&gt;</span> agree on topic
<a name="l-75"></a><span class="tm">19:16:31</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="cmd">#action </span><span class="cmdline">account or priority removal</span>
<a name="l-76"></a><span class="tm">19:16:36</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="topic">#topic </span><span class="topicline">account or priority removal</span>
<a name="l-77"></a><span class="tm">19:16:36</span><span class="nk"> &lt;gmaxwell&gt;</span> lol
<a name="l-78"></a><span class="tm">19:16:40</span><span class="nk"> &lt;jonasschnelli&gt;</span> :/
<a name="l-79"></a><span class="tm">19:16:53</span><span class="nk"> &lt;morcos&gt;</span> I think luke-jr was the main proponent of keeping priority around, so if he's not here, maybe we need to postpone further discussion
<a name="l-80"></a><span class="tm">19:17:08</span><span class="nk"> &lt;morcos&gt;</span> but it was my hope that we could all be in agreeement that it serves not much of a function any more
<a name="l-81"></a><span class="tm">19:17:32</span><span class="nk"> &lt;morcos&gt;</span> Perhaps we can set a target for 0.15 if 0.14 is too close, but it would be nice to remove ALL of the priority code
<a name="l-82"></a><span class="tm">19:17:46</span><span class="nk"> &lt;morcos&gt;</span> it would clean a lot of things up
<a name="l-83"></a><span class="tm">19:17:49</span><span class="nk"> &lt;wumpus&gt;</span> I think that ship has already sailed?
<a name="l-84"></a><span class="tm">19:17:54</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">morcos:</span> ACK, but maybe 0.15
<a name="l-85"></a><span class="tm">19:17:59</span><span class="nk"> &lt;BlueMatt&gt;</span> deprecate more formally in 0.14
<a name="l-86"></a><span class="tm">19:18:09</span><span class="nk"> &lt;wumpus&gt;</span> I mean, we merged some stuff on the way for priority removal already
<a name="l-87"></a><span class="tm">19:18:09</span><span class="nk"> &lt;morcos&gt;</span> <span class="hi">BlueMatt:</span> that makes sense to me
<a name="l-88"></a><span class="tm">19:18:14</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">wumpus:</span> not even eligius is doing any priority selection now...at the time maybe luke could have argued for it, but now.....
<a name="l-89"></a><span class="tm">19:18:21</span><span class="nk"> &lt;sipa&gt;</span> we removed priority estimation
<a name="l-90"></a><span class="tm">19:18:38</span><span class="nk"> &lt;jcorgan&gt;</span> is there any empirical data on miner behavior?
<a name="l-91"></a><span class="tm">19:18:40</span><span class="nk"> &lt;morcos&gt;</span> <span class="hi">wumpus:</span> i mostly agree, but the removal of priority estimation was because it wasn't functional any more, so it was an easier decision
<a name="l-92"></a><span class="tm">19:18:42</span><span class="nk"> &lt;sipa&gt;</span> all that is left is priority based mining, i think
<a name="l-93"></a><span class="tm">19:19:04</span><span class="nk"> &lt;sipa&gt;</span> if it serves no function (and maybe we need a bit more data on that), it should be equally easy imho
<a name="l-94"></a><span class="tm">19:19:13</span><span class="nk"> &lt;gmaxwell&gt;</span> I agree, I think any desire to keep it around could be answered by intelligent automatic use of fee delta. But this is going to get rehashed with luke later anyways. I think it's likely that everyone who regularly attends the meetings except luke agrees.
<a name="l-95"></a><span class="tm">19:19:26</span><span class="nk"> &lt;morcos&gt;</span> there is also the free transactoin and rate limiting code
<a name="l-96"></a><span class="tm">19:19:28</span><span class="nk"> &lt;wumpus&gt;</span> users can still set prioritizetransaction
<a name="l-97"></a><span class="tm">19:20:09</span><span class="nk"> &lt;achow101&gt;</span> does priority estimation even work? estimatepriority just gives me -1 regardless
<a name="l-98"></a><span class="tm">19:20:18</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">achow101:</span> priority estimation is removed
<a name="l-99"></a><span class="tm">19:20:19</span><span class="nk"> &lt;morcos&gt;</span> <span class="hi">achow101:</span> thats why it is removed for 0.14
<a name="l-100"></a><span class="tm">19:20:29</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">achow101:</span> the RPC remains for backward compatibility, but is a stub
<a name="l-101"></a><span class="tm">19:20:30</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jcorgan:</span> some had been collected in the past when it was defaulted to off.  general result is that its not used ~anywhere anymore.
<a name="l-102"></a><span class="tm">19:20:33</span><span class="nk"> &lt;wumpus&gt;</span> so if prioritization on some criterion that is not fee it can still be implemented outside of bitcoind
<a name="l-103"></a><span class="tm">19:20:44</span><span class="nk"> &lt;morcos&gt;</span> it works, its just correctly telling you that no priority is high enough to get you mined quickluy
<a name="l-104"></a><span class="tm">19:20:50</span><span class="nk"> &lt;achow101&gt;</span> ah, i see
<a name="l-105"></a><span class="tm">19:21:01</span><span class="nk"> &lt;wumpus&gt;</span> heh
<a name="l-106"></a><span class="tm">19:22:00</span><span class="nk"> &lt;morcos&gt;</span> back in a couple min
<a name="l-107"></a><span class="tm">19:22:10</span><span class="nk"> &lt;jtimon&gt;</span> so I thought we were waiting on 0.14 for removing the priority, now we wait for 0.15?
<a name="l-108"></a><span class="tm">19:22:47</span><span class="nk"> &lt;wumpus&gt;</span> is there any reason to hurry?
<a name="l-109"></a><span class="tm">19:22:54</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jtimon:</span> there seem to be at least 4 components to "removing the priority", i'm not sure they all need to happen simultaneously
<a name="l-110"></a><span class="tm">19:23:10</span><span class="nk"> &lt;sipa&gt;</span> (rpc, estimation, mining, relay)
<a name="l-111"></a><span class="tm">19:23:29</span><span class="nk"> &lt;jtimon&gt;</span> <span class="hi">wumpus:</span> no, any reason to wait ?
<a name="l-112"></a><span class="tm">19:23:35</span><span class="nk"> &lt;wumpus&gt;</span> I'm sure no one is really waiting for it to be removed, it can be removed part by part and 0.15 is a fine target
<a name="l-113"></a><span class="tm">19:23:40</span><span class="nk"> &lt;gmaxwell&gt;</span> relay is the only one I really care much about, because it currently causes bandwidth wasting relaying around junk that won't get mined.
<a name="l-114"></a><span class="tm">19:23:50</span><span class="nk"> &lt;jtimon&gt;</span> if people want to work on that, I don't see why they should wait
<a name="l-115"></a><span class="tm">19:23:53</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">jtimon:</span> there are always other "priorities"
<a name="l-116"></a><span class="tm">19:24:09</span><span class="nk"> &lt;MarcoFalke_web&gt;</span> Can we disable relay by default for .14?
<a name="l-117"></a><span class="tm">19:24:46</span><span class="nk"> &lt;jonasschnelli&gt;</span> ack on DEFAULT_RELAYPRIORITY = false; for 0.14
<a name="l-118"></a><span class="tm">19:25:05</span><span class="nk"> &lt;gmaxwell&gt;</span> I'd support that, if we don't go further.
<a name="l-119"></a><span class="tm">19:25:23</span><span class="nk"> &lt;sipa&gt;</span> agree
<a name="l-120"></a><span class="tm">19:25:25</span><span class="nk"> &lt;MarcoFalke_web&gt;</span> What do you mean with "go further"?
<a name="l-121"></a><span class="tm">19:25:32</span><span class="nk"> &lt;wumpus&gt;</span> disabling by default always makes sense as a first step
<a name="l-122"></a><span class="tm">19:25:36</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">MarcoFalke_web:</span> remove the code entirely.
<a name="l-123"></a><span class="tm">19:25:47</span><span class="nk"> &lt;MarcoFalke_web&gt;</span> <span class="cmd">#action </span><span class="cmdline">DEFAULT_RELAYPRIORITY = false; for 0.14</span>
<a name="l-124"></a><span class="tm">19:25:59</span><span class="nk"> &lt;wumpus&gt;</span> even if you rip out the code two days later...
<a name="l-125"></a><span class="tm">19:26:13</span><span class="nk"> &lt;jtimon&gt;</span> ok, I see, disable for 0.14 first what you want to remove for 0.15, that makes sense
<a name="l-126"></a><span class="tm">19:26:34</span><span class="nk"> &lt;sipa&gt;</span> ok, account removal?
<a name="l-127"></a><span class="tm">19:26:42</span><span class="nk"> &lt;MarcoFalke_web&gt;</span> next topic
<a name="l-128"></a><span class="tm">19:26:55</span><span class="nk"> &lt;morcos&gt;</span> wait i'm confused
<a name="l-129"></a><span class="tm">19:27:03</span><span class="nk"> &lt;gmaxwell&gt;</span> uh oh.
<a name="l-130"></a><span class="tm">19:27:08</span><span class="nk"> &lt;morcos&gt;</span> what are the proposed changes to relay
<a name="l-131"></a><span class="tm">19:27:22</span><span class="nk"> &lt;morcos&gt;</span> that priority doesn't let you skip the rate limiting
<a name="l-132"></a><span class="tm">19:28:17</span><span class="nk"> &lt;morcos&gt;</span> ok nm, ignore me.  we are proposing that you always have to have minrelaytxfee
<a name="l-133"></a><span class="tm">19:28:22</span><span class="nk"> &lt;gmaxwell&gt;</span> Yes.
<a name="l-134"></a><span class="tm">19:28:29</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="topic">#topic </span><span class="topicline">"account removal"</span>
<a name="l-135"></a><span class="tm">19:28:39</span><span class="nk"> &lt;morcos&gt;</span> i don't think thats going to help too much with junk, but agree it would be good change
<a name="l-136"></a><span class="tm">19:28:40</span><span class="nk"> &lt;gmaxwell&gt;</span> also, the help text for relaypriority is wrong/confusing. :P
<a name="l-137"></a><span class="tm">19:29:13</span><span class="nk"> &lt;MarcoFalke_web&gt;</span> I think we already have a pull open for this #7729
<a name="l-138"></a><span class="tm">19:29:14</span><span class="nk"> &lt;morcos&gt;</span> account removal is more tricky
<a name="l-139"></a><span class="tm">19:29:17</span><span class="nk"> &lt;wumpus&gt;</span> so I proposed a label API to replace accounts at the start of this year, it still hasn't had much review yet: https://github.com/bitcoin/bitcoin/pull/7729
<a name="l-140"></a><span class="tm">19:29:17</span><span class="nk"> &lt;jonasschnelli&gt;</span> There is sill an open PR from wumpus to #7729 which is a step towards account removal
<a name="l-141"></a><span class="tm">19:29:20</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/7729 | An error has occurred and has been logged. Please contact this bot's administrator for more information.
<a name="l-142"></a><span class="tm">19:29:21</span><span class="nk"> &lt;jonasschnelli&gt;</span> heh
<a name="l-143"></a><span class="tm">19:29:22</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/7729 | An error has occurred and has been logged. Please contact this bot's administrator for more information.
<a name="l-144"></a><span class="tm">19:29:24</span><span class="nk"> &lt;wumpus&gt;</span> not sure there's anything new to discuss there
<a name="l-145"></a><span class="tm">19:29:33</span><span class="nk"> &lt;gmaxwell&gt;</span> "Bitcoin developers oppose accountability."
<a name="l-146"></a><span class="tm">19:30:04</span><span class="nk"> &lt;morcos&gt;</span> so the idea would be we have to have labels first
<a name="l-147"></a><span class="tm">19:30:08</span><span class="nk"> &lt;morcos&gt;</span> maybe for a release or two
<a name="l-148"></a><span class="tm">19:30:09</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">morcos:</span> what would be your approach for the removal-transition?
<a name="l-149"></a><span class="tm">19:30:15</span><span class="nk"> &lt;morcos&gt;</span> and then we coudl remove accounts?
<a name="l-150"></a><span class="tm">19:30:18</span><span class="nk"> &lt;wumpus&gt;</span> if people are ok with that proposal I'll go forward with it, but there's always so little attention on wallet related changes, let alone deprecating features
<a name="l-151"></a><span class="tm">19:30:24</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">morcos:</span> yes
<a name="l-152"></a><span class="tm">19:30:26</span><span class="nk"> &lt;instagibbs&gt;</span> yes labels would have to come first
<a name="l-153"></a><span class="tm">19:30:32</span><span class="nk"> &lt;morcos&gt;</span> i mean i wish we could just rip them out, they're terrible.  but it seems like people still depend on them
<a name="l-154"></a><span class="tm">19:30:32</span><span class="nk"> &lt;gmaxwell&gt;</span> I think I had just managed to miss 7729.
<a name="l-155"></a><span class="tm">19:30:43</span><span class="nk"> &lt;gmaxwell&gt;</span> Doing both lavels and accounts means more breaking API changes, no?
<a name="l-156"></a><span class="tm">19:30:55</span><span class="nk"> &lt;MarcoFalke_web&gt;</span> <span class="hi">wumpus:</span> You mentioned that this may cause problems when people use the account AND label api?
<a name="l-157"></a><span class="tm">19:31:09</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">MarcoFalke_web:</span> there may need to be protection against that, yes
<a name="l-158"></a><span class="tm">19:31:20</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">morcos:</span> most of the time I see them mentioned, they are being used as labels.
<a name="l-159"></a><span class="tm">19:31:21</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">MarcoFalke_web:</span> though the same already happens if you use accounts and the GUI
<a name="l-160"></a><span class="tm">19:31:32</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">MarcoFalke_web:</span> and there is no protection against that either
<a name="l-161"></a><span class="tm">19:31:33</span><span class="nk"> &lt;jtimon&gt;</span> can't we replace accounts with labels all at once?
<a name="l-162"></a><span class="tm">19:32:04</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">morcos:</span> and people are confused when the accounts centric behavior shows up...  or, alternatively, they're confused when they don't control "from" addresses (that they're not seperate wallets).
<a name="l-163"></a><span class="tm">19:32:04</span><span class="nk"> &lt;jtimon&gt;</span> it's not like we haven't been warning against the use of accounts for ages
<a name="l-164"></a><span class="tm">19:32:06</span><span class="nk"> &lt;wumpus&gt;</span> can we first *agree* on the label api?
<a name="l-165"></a><span class="tm">19:32:19</span><span class="nk"> &lt;instagibbs&gt;</span> jtimon, at some point I don't think people believe the deprecated warning
<a name="l-166"></a><span class="tm">19:32:22</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jtimon:</span> go review 7729 (and i should do the same)
<a name="l-167"></a><span class="tm">19:32:25</span><span class="nk"> &lt;instagibbs&gt;</span> we should put scary ascii art :)
<a name="l-168"></a><span class="tm">19:32:26</span><span class="nk"> &lt;gmaxwell&gt;</span> so proposed action: everyone go comment on 7729.
<a name="l-169"></a><span class="tm">19:32:30</span><span class="nk"> &lt;instagibbs&gt;</span> action yes
<a name="l-170"></a><span class="tm">19:32:32</span><span class="nk"> &lt;morcos&gt;</span> ok, lets all read 7729 again and discuss on there
<a name="l-171"></a><span class="tm">19:32:35</span><span class="nk"> &lt;instagibbs&gt;</span> ack
<a name="l-172"></a><span class="tm">19:32:37</span><span class="nk"> &lt;morcos&gt;</span> damn i type too slow
<a name="l-173"></a><span class="tm">19:32:38</span><span class="nk"> &lt;jtimon&gt;</span> <span class="hi">sipa:</span> right
<a name="l-174"></a><span class="tm">19:32:39</span><span class="nk"> &lt;gmaxwell&gt;</span> yea, it sounds great.
<a name="l-175"></a><span class="tm">19:32:53</span><span class="nk"> &lt;instagibbs&gt;</span> also who uses labels that we talk to? dooglus?
<a name="l-176"></a><span class="tm">19:32:55</span><span class="nk"> &lt;MarcoFalke_web&gt;</span> <span class="cmd">#action </span><span class="cmdline">look at https://github.com/bitcoin/bitcoin/pull/7729</span>
<a name="l-177"></a><span class="tm">19:33:15</span><span class="nk"> &lt;jonasschnelli&gt;</span> Removing the accounting system entirely will be difficult (especially old wallet migration)
<a name="l-178"></a><span class="tm">19:33:29</span><span class="nk"> &lt;wumpus&gt;</span> whether to rip accounts at the same time as introducing labels is for later discussion, none of this is hard to implement, but deciding what API we want is more difficult
<a name="l-179"></a><span class="tm">19:33:36</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">jonasschnelli:</span> no, it's not difficult at all
<a name="l-180"></a><span class="tm">19:34:14</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">jonasschnelli:</span> you could even keep the accounting records around and just ignore them and treat previous accounts as labels instead
<a name="l-181"></a><span class="tm">19:34:22</span><span class="nk"> &lt;gmaxwell&gt;</span> ^ is what I expected.
<a name="l-182"></a><span class="tm">19:34:23</span><span class="nk"> &lt;sipa&gt;</span> just the concept of 'balance of a label/account' disappears, not the ability to selectively list transactions affecting labels/accounts
<a name="l-183"></a><span class="tm">19:34:25</span><span class="nk"> &lt;jonasschnelli&gt;</span> I once did it in a test branch and it took me a long time to get it right... but maybe I was overcomplicating stuff there
<a name="l-184"></a><span class="tm">19:34:38</span><span class="nk"> &lt;MarcoFalke_web&gt;</span> I think dooglus use case would be covered by the new label api, but better someone ping him on the pr
<a name="l-185"></a><span class="tm">19:34:41</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">jonasschnelli:</span> it's mainly a matter of deleting code
<a name="l-186"></a><span class="tm">19:34:56</span><span class="nk"> &lt;jonasschnelli&gt;</span> Right. I removed it with no labels migration
<a name="l-187"></a><span class="tm">19:35:07</span><span class="nk"> &lt;gmaxwell&gt;</span> I expected the account-&gt;label change would mostly be a matter of getting rid of balance related functionality. And otherwise not much perhaps beyond some new label centric features.
<a name="l-188"></a><span class="tm">19:35:11</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> i think you're overcomplicating
<a name="l-189"></a><span class="tm">19:35:16</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> yes
<a name="l-190"></a><span class="tm">19:35:34</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> and just to be claear *account* RPCs are renamed to *label*, basically
<a name="l-191"></a><span class="tm">19:35:36</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> it's literally just removing the balance RPCs, and then dropping the 'from account' field in send RPC, and renaming the rest account-&gt;label
<a name="l-192"></a><span class="tm">19:35:44</span><span class="nk"> &lt;wumpus&gt;</span> yes
<a name="l-193"></a><span class="tm">19:35:48</span><span class="nk"> &lt;gmaxwell&gt;</span> (e.g. of 'obvious' additional features: multiple labels on items, being able to label a single transaction without labling any involved addresses)
<a name="l-194"></a><span class="tm">19:36:23</span><span class="nk"> &lt;wumpus&gt;</span> well at first it just implements the GUI label API, which doesn't allow labeling transactions either
<a name="l-195"></a><span class="tm">19:36:30</span><span class="nk"> &lt;wumpus&gt;</span> I think that's a whole different thing
<a name="l-196"></a><span class="tm">19:36:31</span><span class="nk"> &lt;gmaxwell&gt;</span> yep. makes sense.
<a name="l-197"></a><span class="tm">19:36:59</span><span class="nk"> &lt;jonasschnelli&gt;</span> you can label addresses but not transactions, right?
<a name="l-198"></a><span class="tm">19:37:03</span><span class="nk"> &lt;wumpus&gt;</span> right
<a name="l-199"></a><span class="tm">19:37:04</span><span class="nk"> &lt;jonasschnelli&gt;</span> We have a comment feature for transaction
<a name="l-200"></a><span class="tm">19:37:07</span><span class="nk"> &lt;jtimon&gt;</span> isn't the move call also affected (if we still have that)?
<a name="l-201"></a><span class="tm">19:37:13</span><span class="nk"> &lt;morcos&gt;</span> perhaps as an immediate step, we could more forcefully declare accounts unsupported and deprecated for 0.14
<a name="l-202"></a><span class="tm">19:37:13</span><span class="nk"> &lt;jonasschnelli&gt;</span> (which is sadly not really used and exposed)
<a name="l-203"></a><span class="tm">19:37:17</span><span class="nk"> &lt;wumpus&gt;</span> move will disappear jtimon
<a name="l-204"></a><span class="tm">19:37:25</span><span class="nk"> &lt;wumpus&gt;</span> please actually read #7729 :(
<a name="l-205"></a><span class="tm">19:37:26</span><span class="nk"> &lt;jtimon&gt;</span> <span class="hi">wumpus:</span> k
<a name="l-206"></a><span class="tm">19:37:27</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/7729 | An error has occurred and has been logged. Please contact this bot's administrator for more information.
<a name="l-207"></a><span class="tm">19:37:31</span><span class="nk"> &lt;morcos&gt;</span> so that in the course of adding labels, we don't have to worry about any edge case mixing of the 2
<a name="l-208"></a><span class="tm">19:37:36</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">morcos:</span> that would be negative for the many people who use accounts as labels today, however.
<a name="l-209"></a><span class="tm">19:38:11</span><span class="nk"> &lt;wumpus&gt;</span> first introduce labels
<a name="l-210"></a><span class="tm">19:38:14</span><span class="nk"> &lt;morcos&gt;</span> <span class="hi">gmaxwell:</span> yeah but i don't mean we're actually going to change it,  i just worry that in the course of adding labels around accounts we'll give ourselves extra work, but maybe not.
<a name="l-211"></a><span class="tm">19:38:21</span><span class="nk"> &lt;wumpus&gt;</span> only then I'll agree on doing anything more to deprecate accounts
<a name="l-212"></a><span class="tm">19:38:34</span><span class="nk"> &lt;wumpus&gt;</span> if we don't move forward for labels, we'll stay in this state forever
<a name="l-213"></a><span class="tm">19:38:42</span><span class="nk"> &lt;gmaxwell&gt;</span> I need to read the PR to comment more!
<a name="l-214"></a><span class="tm">19:38:47</span><span class="nk"> &lt;instagibbs&gt;</span> 2 spooky
<a name="l-215"></a><span class="tm">19:40:03</span><span class="nk"> &lt;instagibbs&gt;</span> any other topics?
<a name="l-216"></a><span class="tm">19:40:04</span><span class="nk"> &lt;wumpus&gt;</span> making more noise about removing accounts before we have a labels API will just make people (such as dooglus) panicked
<a name="l-217"></a><span class="tm">19:40:33 </span><span class="nka">* gmaxwell</span> <span class="ac">looks at btcdrak pining #joinmarket and contemplates ^ :P</span>
<a name="l-218"></a><span class="tm">19:41:10</span><span class="nk"> &lt;gmaxwell&gt;</span> okay, I think we should take the proposed action of everyone reading and commenting on 7729 and move to another subject.
<a name="l-219"></a><span class="tm">19:41:11</span><span class="nk"> &lt;jonasschnelli&gt;</span> I guess he's afk
<a name="l-220"></a><span class="tm">19:41:18</span><span class="nk"> &lt;wumpus&gt;</span> yes
<a name="l-221"></a><span class="tm">19:41:55</span><span class="nk"> &lt;gmaxwell&gt;</span> Or otherwise, we could instead engage in the age old art of completely uninformed combat.
<a name="l-222"></a><span class="tm">19:42:16</span><span class="nk"> &lt;morcos&gt;</span> you want to talk about block size?
<a name="l-223"></a><span class="tm">19:42:18</span><span class="nk"> &lt;jtimon&gt;</span> <span class="hi">morcos:</span> are you saying remove accounts before labels or just do both at the same time (to not worry about incompatibilities between the 2)?
<a name="l-224"></a><span class="tm">19:42:24</span><span class="nk"> &lt;gmaxwell&gt;</span> "I haven't read 7729 but I oppose any change that causes blindness in small children!"
<a name="l-225"></a><span class="tm">19:42:34</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">gmaxwell:</span> I didn't read your last comment, but ACK
<a name="l-226"></a><span class="tm">19:42:53</span><span class="nk"> &lt;jtimon&gt;</span> other topics?
<a name="l-227"></a><span class="tm">19:42:54</span><span class="nk"> &lt;jonasschnelli&gt;</span> If there are no other topic, we could talk about "auxiliary block requests" if some are interested in it?
<a name="l-228"></a><span class="tm">19:43:08</span><span class="nk"> &lt;jtimon&gt;</span> what is that?
<a name="l-229"></a><span class="tm">19:43:14</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="cmd">#9171</span><span class="cmdline"></span>
<a name="l-230"></a><span class="tm">19:43:15</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9171 | Introduce auxiliary block requests by jonasschnelli · Pull Request #9171 · bitcoin/bitcoin · GitHub
<a name="l-231"></a><span class="tm">19:43:20</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jonasschnelli:</span> will that cause blindness in small children?
<a name="l-232"></a><span class="tm">19:43:24 </span><span class="nka">* BlueMatt</span> <span class="ac">petitions for one more review on #9075</span>
<a name="l-233"></a><span class="tm">19:43:26</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9075 | Decouple peer-processing-logic from block-connection-logic (#3) by TheBlueMatt · Pull Request #9075 · bitcoin/bitcoin · GitHub
<a name="l-234"></a><span class="tm">19:43:44</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jtimon:</span> it provides hot and cold running blocks.
<a name="l-235"></a><span class="tm">19:43:45</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">gmaxwell:</span> yes, through xkcd 378
<a name="l-236"></a><span class="tm">19:43:46</span><span class="nk"> &lt;jonasschnelli&gt;</span> jtimon "auxiliary block requests" is a requirement for SPV
<a name="l-237"></a><span class="tm">19:43:48</span><span class="nk"> &lt;instagibbs&gt;</span> BlueMatt, thanks, added to queue
<a name="l-238"></a><span class="tm">19:44:01</span><span class="nk"> &lt;jonasschnelli&gt;</span> It allows you to request blocks during IBD... which not getting validated
<a name="l-239"></a><span class="tm">19:44:18</span><span class="nk"> &lt;morcos&gt;</span> <span class="hi">jonasschnelli:</span> is there some more general description of how all that would work.  i started to look at it, but i wasn't sure what the high level design was
<a name="l-240"></a><span class="tm">19:44:30</span><span class="nk"> &lt;instagibbs&gt;</span> ACK morcos I couldn't grasp immediately
<a name="l-241"></a><span class="tm">19:44:39</span><span class="nk"> &lt;jonasschnelli&gt;</span> Hmm... I can write a paper?
<a name="l-242"></a><span class="tm">19:45:03</span><span class="nk"> &lt;morcos&gt;</span> it doesn't have to be formal
<a name="l-243"></a><span class="tm">19:45:23</span><span class="nk"> &lt;jonasschnelli&gt;</span> It's simple: you ask your node, "giveme blocks D, F, G", node downloads blocks "D, F, G" and pass it though the signals with validate=fale"
<a name="l-244"></a><span class="tm">19:45:27</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">jonasschnelli:</span> note that I'm working to remove fForceProcessing/etc from ProcessNewBlock...please do not pass the blockRequest object all the way in...
<a name="l-245"></a><span class="tm">19:45:38</span><span class="nk"> &lt;gmaxwell&gt;</span> I have to admit I expirenced some groan related to "oh no, yet another block fetching modality" -- but the application of being able to on demand randomly request blocks is perfectly reasonsable.  More description would be helpful.
<a name="l-246"></a><span class="tm">19:45:54</span><span class="nk"> &lt;jonasschnelli&gt;</span> It uses all the available mechanisms.
<a name="l-247"></a><span class="tm">19:46:04</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">jonasschnelli:</span> I'd kinda prefer this not call AcceptBlock at all...do we need to store the block or can we just pass to wallet?
<a name="l-248"></a><span class="tm">19:46:10</span><span class="nk"> &lt;jonasschnelli&gt;</span> It just "prioritize the requested blocks"
<a name="l-249"></a><span class="tm">19:46:14</span><span class="nk"> &lt;sipa&gt;</span> overall concept ack, but i think the implementation will need to change with the ongoing network processing refactors
<a name="l-250"></a><span class="tm">19:46:51</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">BlueMatt:</span> seems foolish to download blocks twice... which would happen if we didn't store them.
<a name="l-251"></a><span class="tm">19:46:57</span><span class="nk"> &lt;BlueMatt&gt;</span> hum, true
<a name="l-252"></a><span class="tm">19:46:57</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">BlueMatt:</span> Right. We could factor out the on-disk-storing part
<a name="l-253"></a><span class="tm">19:47:08</span><span class="nk"> &lt;BlueMatt&gt;</span> still, would be nice to not store unless we need to
<a name="l-254"></a><span class="tm">19:47:15</span><span class="nk"> &lt;wumpus&gt;</span> it needs to get the chance to store it, atl east
<a name="l-255"></a><span class="tm">19:47:20</span><span class="nk"> &lt;gmaxwell&gt;</span> ^ yep.
<a name="l-256"></a><span class="tm">19:47:23</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">BlueMatt:</span> it would integrate into some callback for downloaded blocks, i would guess
<a name="l-257"></a><span class="tm">19:47:23</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">gmaxwell:</span> we could also use the needs-download logic in the p2p logic to dedup download
<a name="l-258"></a><span class="tm">19:47:31</span><span class="nk"> &lt;gmaxwell&gt;</span> Interaction with pruning seems somewhat complicated.
<a name="l-259"></a><span class="tm">19:47:40</span><span class="nk"> &lt;BlueMatt&gt;</span> that way the p2p logic could decide to hand to ProcessNewBlock...or not
<a name="l-260"></a><span class="tm">19:47:43</span><span class="nk"> &lt;wumpus&gt;</span> there may be further policy not to store it, e.g. based on pruning and such
<a name="l-261"></a><span class="tm">19:47:45</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">gmaxwell:</span> thats part of my concern
<a name="l-262"></a><span class="tm">19:47:56</span><span class="nk"> &lt;wumpus&gt;</span> but for a full IBD you'd really want to pre-fill blocks
<a name="l-263"></a><span class="tm">19:48:02</span><span class="nk"> &lt;BlueMatt&gt;</span> just seems kinda broken to have the block-processing logic process a block which it explicitly doesnt want
<a name="l-264"></a><span class="tm">19:48:15</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">BlueMatt:</span> but the main application now is a node that starts off with a spv mode wallet while it syncs up in the background.  Such nodes will likely also be pruned.
<a name="l-265"></a><span class="tm">19:48:18</span><span class="nk"> &lt;wumpus&gt;</span> it will likely want it later
<a name="l-266"></a><span class="tm">19:48:27</span><span class="nk"> &lt;sipa&gt;</span> i guess there should be a separation of "which blocks to download" and "which blocks to process" logic
<a name="l-267"></a><span class="tm">19:48:32</span><span class="nk"> &lt;sipa&gt;</span> where the second can ask the first
<a name="l-268"></a><span class="tm">19:48:38</span><span class="nk"> &lt;jonasschnelli&gt;</span> I think to make it work with pruning is not very hard... just step after step
<a name="l-269"></a><span class="tm">19:48:57</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">wumpus:</span> yes, I'm saying if we have a full-spv mode then the p2p logic should be able to not pass it to ProcessNewBlock....alternatively it can choose to do so if it thinks block-logic needs it
<a name="l-270"></a><span class="tm">19:48:58</span><span class="nk"> &lt;wumpus&gt;</span> could e.g. store it for later processing
<a name="l-271"></a><span class="tm">19:49:16</span><span class="nk"> &lt;wumpus&gt;</span> discarding by default would be stupid, at least
<a name="l-272"></a><span class="tm">19:49:28</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">wumpus:</span> sure, but we have logic to figure out if we want a block or not, already
<a name="l-273"></a><span class="tm">19:49:36</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">jonasschnelli:</span> note that I have a pr to change the stuff there to deserialize blocks into shared_ptrs, so passing it over to wallet should use that
<a name="l-274"></a><span class="tm">19:50:02</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="cmd">#9014, </span><span class="cmdline">though its blocked on #9075</span>
<a name="l-275"></a><span class="tm">19:50:02</span><span class="nk"> &lt;gmaxwell&gt;</span> blocks as sharedptr, hurrah
<a name="l-276"></a><span class="tm">19:50:02</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">BlueMatt:</span> okay. Though #9171 aims to be a wallet free PR
<a name="l-277"></a><span class="tm">19:50:06</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9014 | Fix block-connection performance regression by TheBlueMatt · Pull Request #9014 · bitcoin/bitcoin · GitHub
<a name="l-278"></a><span class="tm">19:50:07</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9075 | Decouple peer-processing-logic from block-connection-logic (#3) by TheBlueMatt · Pull Request #9075 · bitcoin/bitcoin · GitHub
<a name="l-279"></a><span class="tm">19:50:09</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9171 | Introduce auxiliary block requests by jonasschnelli · Pull Request #9171 · bitcoin/bitcoin · GitHub
<a name="l-280"></a><span class="tm">19:50:32</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">BlueMatt:</span> note that after 9125, deserializing into a share_ptr is literally just "std::shared_ptr&lt;const CBlock&gt; ptr; ss &gt;&gt; ptr; "
<a name="l-281"></a><span class="tm">19:50:40</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">sipa:</span> cool
<a name="l-282"></a><span class="tm">19:52:53</span><span class="nk"> &lt;jonasschnelli&gt;</span> more topics? 8m to go.
<a name="l-283"></a><span class="tm">19:53:27</span><span class="nk"> &lt;wumpus&gt;</span> *crickets*
<a name="l-284"></a><span class="tm">19:53:27</span><span class="nk"> &lt;Chris_Stewart_5&gt;</span> <span class="hi">jonasschnelli:</span> What is the use case for that? Why request the full block if we aren't validating?
<a name="l-285"></a><span class="tm">19:53:39</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">Chris_Stewart_5:</span> light wallet support
<a name="l-286"></a><span class="tm">19:53:49</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">Chris_Stewart_5:</span> so we can scan it for wallet transactions.
<a name="l-287"></a><span class="tm">19:53:50</span><span class="nk"> &lt;instagibbs&gt;</span> Chris_Stewart_5, you download blocks based on age of your wallet
<a name="l-288"></a><span class="tm">19:53:55</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">Chris_Stewart_5:</span> allow receiving and sending transactions in "client" mode
<a name="l-289"></a><span class="tm">19:54:00</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">Chris_Stewart_5:</span> the ability to use the wallet before you're fully synced
<a name="l-290"></a><span class="tm">19:54:11</span><span class="nk"> &lt;instagibbs&gt;</span> "Where did my money go" &lt;---
<a name="l-291"></a><span class="tm">19:54:14</span><span class="nk"> &lt;wumpus&gt;</span> let's take basic questions to outside the meeting
<a name="l-292"></a><span class="tm">19:54:31</span><span class="nk"> &lt;Chris_Stewart_5&gt;</span> This is alt solution to BIP37 then, or complementary?
<a name="l-293"></a><span class="tm">19:54:44</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">Chris_Stewart_5:</span> bip37 _utterly_ destroys privacy, and would waste bandwidth if you're later going to need the block for verification anyways.
<a name="l-294"></a><span class="tm">19:54:56</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">Chris_Stewart_5:</span> its a safer solution then BIP37...
<a name="l-295"></a><span class="tm">19:55:38</span><span class="nk"> &lt;gmaxwell&gt;</span> (BIP37 is also vulnerable to txn being hidden from you)
<a name="l-296"></a><span class="tm">19:55:55</span><span class="nk"> &lt;wumpus&gt;</span> yes, BIP37 is a bad idea, we're not going to use it in core
<a name="l-297"></a><span class="tm">19:56:37</span><span class="nk"> &lt;Chris_Stewart_5&gt;</span> Yes I understand that part, I'm trying to piece together how new spv mode will function i guess.
<a name="l-298"></a><span class="tm">19:56:39</span><span class="nk"> &lt;wumpus&gt;</span> (bad idea with untrusted peers at least, and that's the use case here)
<a name="l-299"></a><span class="tm">19:56:52</span><span class="nk"> &lt;jonasschnelli&gt;</span> I think it could have it's reason when connected to a BIP150 authed trusted peer. But only then.
<a name="l-300"></a><span class="tm">19:56:53</span><span class="nk"> &lt;wumpus&gt;</span> any other topics?
<a name="l-301"></a><span class="tm">19:56:57</span><span class="nk"> &lt;wumpus&gt;</span> the meeting is derailed
<a name="l-302"></a><span class="tm">19:57:13</span><span class="nk"> &lt;wumpus&gt;</span> otherwise better to close it
<a name="l-303"></a><span class="tm">19:57:15</span><span class="nk"> &lt;instagibbs&gt;</span> 3 minutes, no topics, bound to
<a name="l-304"></a><span class="tm">19:57:17</span><span class="nk"> &lt;MarcoFalke_web&gt;</span> <span class="cmd">#endsmeeting</span><span class="cmdline"></span>
<a name="l-305"></a><span class="tm">19:57:22</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="cmd">#endmeeting</span><span class="cmdline"></span></pre>
</body></html>
