<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<title>#bitcoin-core-dev log</title>
<style type="text/css">
/* For the .log.html */
pre { /*line-height: 125%;*/
      white-space: pre-wrap; }
body { background: #f0f0f0; }

body .tm  { color: #007020 }                      /* time */
body .nk  { color: #062873; font-weight: bold }   /* nick, regular */
body .nka { color: #007020; font-weight: bold }  /* action nick */
body .ac  { color: #00A000 }                      /* action line */
body .hi  { color: #4070a0 }                 /* hilights */
/* Things to make particular MeetBot commands stick out */
body .topic     { color: #007020; font-weight: bold }
body .topicline { color: #000080; font-weight: bold }
body .cmd       { color: #007020; font-weight: bold }
body .cmdline  { font-weight: bold }

</style>
</head>

<body>
<pre><a name="l-1"></a><span class="tm">19:00:42</span><span class="nk"> &lt;wumpus&gt;</span> <span class="cmd">#startmeeting</span><span class="cmdline"></span>
<a name="l-2"></a><span class="tm">19:00:42</span><span class="nk"> &lt;lightningbot&gt;</span> Meeting started Thu Dec 15 19:00:42 2016 UTC.  The chair is wumpus. Information about MeetBot at http://wiki.debian.org/MeetBot.
<a name="l-3"></a><span class="tm">19:00:42</span><span class="nk"> &lt;lightningbot&gt;</span> Useful Commands: #action #agreed #help #info #idea #link #topic.
<a name="l-4"></a><span class="tm">19:00:48</span><span class="nk"> &lt;jonasschnelli&gt;</span> here
<a name="l-5"></a><span class="tm">19:00:52</span><span class="nk"> &lt;wumpus&gt;</span> proposed topics?
<a name="l-6"></a><span class="tm">19:01:03</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="cmd">#bitcoin-core-dev </span><span class="cmdline">Meeting: wumpus sipa gmaxwell jonasschnelli morcos luke-jr btcdrak sdaftuar jtimon cfields petertodd kanzure bluematt instagibbs phantomcircuit codeshark michagogo marcofalke paveljanik NicolasDorier</span>
<a name="l-7"></a><span class="tm">19:01:08</span><span class="nk"> &lt;sdaftuar&gt;</span> hi
<a name="l-8"></a><span class="tm">19:01:15</span><span class="nk"> &lt;wumpus&gt;</span> + jl2012
<a name="l-9"></a><span class="tm">19:01:24</span><span class="nk"> &lt;gmaxwell&gt;</span> I was going to talk about some backlog but almost all of it got merged.
<a name="l-10"></a><span class="tm">19:01:28</span><span class="nk"> &lt;instagibbs&gt;</span> oh right
<a name="l-11"></a><span class="tm">19:01:31 </span><span class="nka">* gmaxwell</span> <span class="ac">looks</span>
<a name="l-12"></a><span class="tm">19:01:44</span><span class="nk"> &lt;cfields&gt;</span> sick and useless, but here
<a name="l-13"></a><span class="tm">19:02:28</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">cfields:</span> ouch you got it now, too?
<a name="l-14"></a><span class="tm">19:02:44</span><span class="nk"> &lt;cfields&gt;</span> <span class="hi">BlueMatt:</span> mine was nice enough to wait until the flight home :\
<a name="l-15"></a><span class="tm">19:02:47</span><span class="nk"> &lt;wumpus&gt;</span> <span class="cmd">#9322 </span><span class="cmdline">seems to need discussion</span>
<a name="l-16"></a><span class="tm">19:02:49</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9322 | An error has occurred and has been logged. Please contact this bot's administrator for more information.
<a name="l-17"></a><span class="tm">19:02:58</span><span class="nk"> &lt;phantomcircuit&gt;</span> hi
<a name="l-18"></a><span class="tm">19:03:01</span><span class="nk"> &lt;instagibbs&gt;</span> interesting issue
<a name="l-19"></a><span class="tm">19:03:04</span><span class="nk"> &lt;wumpus&gt;</span> "Don't set unknown rpcserialversion"
<a name="l-20"></a><span class="tm">19:03:12</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="cmd">#9322</span><span class="cmdline"></span>
<a name="l-21"></a><span class="tm">19:03:14</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9322 | An error has occurred and has been logged. Please contact this bot's administrator for more information.
<a name="l-22"></a><span class="tm">19:03:16</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="cmd">#9352 </span><span class="cmdline">needs to move forward quickly for fibre/some current network issues</span>
<a name="l-23"></a><span class="tm">19:03:18</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9352 | Attempt reconstruction from all compact block announcements by sdaftuar · Pull Request #9352 · bitcoin/bitcoin · GitHub
<a name="l-24"></a><span class="tm">19:03:34</span><span class="nk"> &lt;wumpus&gt;</span> looks like there is disagreement about whether it should be done at all
<a name="l-25"></a><span class="tm">19:04:04</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">wumpus:</span> on which?
<a name="l-26"></a><span class="tm">19:04:08</span><span class="nk"> &lt;wumpus&gt;</span> the one I just mentioned
<a name="l-27"></a><span class="tm">19:05:11</span><span class="nk"> &lt;gmaxwell&gt;</span> I don't see the disagreement on 9332?
<a name="l-28"></a><span class="tm">19:05:31</span><span class="nk"> &lt;instagibbs&gt;</span> luke-jr seemingly does
<a name="l-29"></a><span class="tm">19:05:34</span><span class="nk"> &lt;wumpus&gt;</span> <span class="cmd">#9352 </span><span class="cmdline">is 21 hours old, that could hardly be called backlog</span>
<a name="l-30"></a><span class="tm">19:05:36</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9352 | Attempt reconstruction from all compact block announcements by sdaftuar · Pull Request #9352 · bitcoin/bitcoin · GitHub
<a name="l-31"></a><span class="tm">19:05:41</span><span class="nk"> &lt;gmaxwell&gt;</span> The purpose of the change is to return an error if you ask for seralization version 9 on software that supports 0/1.
<a name="l-32"></a><span class="tm">19:05:52</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">wumpus:</span> didnt say backlog, said critical to address current ongoing network issues
<a name="l-33"></a><span class="tm">19:05:54</span><span class="nk"> &lt;instagibbs&gt;</span> yes I think that's well understood
<a name="l-34"></a><span class="tm">19:06:01</span><span class="nk"> &lt;gmaxwell&gt;</span> we can talk about that next.
<a name="l-35"></a><span class="tm">19:06:18</span><span class="nk"> &lt;wumpus&gt;</span> would have been useful if luke-jr was here
<a name="l-36"></a><span class="tm">19:06:32</span><span class="nk"> &lt;kanzure&gt;</span> hi. late.
<a name="l-37"></a><span class="tm">19:06:37</span><span class="nk"> &lt;gmaxwell&gt;</span> oh missed his comment.
<a name="l-38"></a><span class="tm">19:06:41</span><span class="nk"> &lt;phantomcircuit&gt;</span> <span class="cmd">#9332</span><span class="cmdline"></span>
<a name="l-39"></a><span class="tm">19:06:43</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9332 | Let wallet importmulti RPC accept labels for standard scriptPubKeys (on top of #9331) by ryanofsky · Pull Request #9332 · bitcoin/bitcoin · GitHub
<a name="l-40"></a><span class="tm">19:07:10</span><span class="nk"> &lt;gmaxwell&gt;</span> I read luke's comment as saying he wanted a "max you support" version.
<a name="l-41"></a><span class="tm">19:07:12</span><span class="nk"> &lt;phantomcircuit&gt;</span> you mean 9322?
<a name="l-42"></a><span class="tm">19:07:42</span><span class="nk"> &lt;gmaxwell&gt;</span> and the response was that this was expected to be the default. Or at least thats my understanding.
<a name="l-43"></a><span class="tm">19:07:46</span><span class="nk"> &lt;jtimon&gt;</span> is luke's comment related to https://github.com/bitcoin/bitcoin/pull/9322/files#r92147938 ?
<a name="l-44"></a><span class="tm">19:08:19</span><span class="nk"> &lt;gmaxwell&gt;</span> I agree that being able to ask for a max possible is fine. (though 9999 isn't an especially good number for it. :P)
<a name="l-45"></a><span class="tm">19:08:26</span><span class="nk"> &lt;instagibbs&gt;</span> I think #9262 is ready, but some disagreement over default value?
<a name="l-46"></a><span class="tm">19:08:28</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9262 | Prefer coins that have fewer ancestors, sanity check txn before ATMP by instagibbs · Pull Request #9262 · bitcoin/bitcoin · GitHub
<a name="l-47"></a><span class="tm">19:08:39</span><span class="nk"> &lt;jtimon&gt;</span> do we have a topic?
<a name="l-48"></a><span class="tm">19:08:46</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jtimon:</span> pr backlog
<a name="l-49"></a><span class="tm">19:09:03</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> in any case that doesn't have to be done in that pull, so we can just go ahead and merge it
<a name="l-50"></a><span class="tm">19:09:16</span><span class="nk"> &lt;gmaxwell&gt;</span> ACK
<a name="l-51"></a><span class="tm">19:10:01</span><span class="nk"> &lt;gmaxwell&gt;</span> in 9262 I don't believe this should default to on, for the same reason that spending unconfirmed coins is enabled by default.
<a name="l-52"></a><span class="tm">19:10:27</span><span class="nk"> &lt;gmaxwell&gt;</span> The transactions will be queued in the wallet and periodically rebroadcast (due to other fixes) and go out once they're no longer overlimit.
<a name="l-53"></a><span class="tm">19:10:43</span><span class="nk"> &lt;gmaxwell&gt;</span> the meat of the change was avoiding those cases (sometimes) when it could.
<a name="l-54"></a><span class="tm">19:10:54</span><span class="nk"> &lt;cfields&gt;</span> <span class="cmd">#9289 </span><span class="cmdline">is holding up the next round of changes, and I believe the linked issue is unrelated</span>
<a name="l-55"></a><span class="tm">19:10:56</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9289 | net: drop boost::thread_group by theuni · Pull Request #9289 · bitcoin/bitcoin · GitHub
<a name="l-56"></a><span class="tm">19:10:58</span><span class="nk"> &lt;instagibbs&gt;</span> with other fixes I'm completely comfortable with it off by default.
<a name="l-57"></a><span class="tm">19:10:59</span><span class="nk"> &lt;bitcoin-git&gt;</span> [13bitcoin] 15laanwj pushed 3 new commits to 06master: 02https://github.com/bitcoin/bitcoin/compare/756374c522c4...c9e00591cd3f
<a name="l-58"></a><span class="tm">19:11:00</span><span class="nk"> &lt;bitcoin-git&gt;</span> 13bitcoin/06master 1480d073c 15Pieter Wuille: Complain when unknown rpcserialversion is specified
<a name="l-59"></a><span class="tm">19:11:00</span><span class="nk"> &lt;bitcoin-git&gt;</span> 13bitcoin/06master 14fa615d3 15MarcoFalke: [qa] Don't set unknown rpcserialversion
<a name="l-60"></a><span class="tm">19:11:01</span><span class="nk"> &lt;bitcoin-git&gt;</span> 13bitcoin/06master 14c9e0059 15Wladimir J. van der Laan: Merge #9322: [qa] Don't set unknown rpcserialversion...
<a name="l-61"></a><span class="tm">19:11:06</span><span class="nk"> &lt;cfields&gt;</span> (though maybe #9212 deserves a topic of its own)
<a name="l-62"></a><span class="tm">19:11:07</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9212 | Assertion failed: (nSendVersion != 0), function GetSendVersion, file ./net.h, line 775. · Issue #9212 · bitcoin/bitcoin · GitHub
<a name="l-63"></a><span class="tm">19:11:12</span><span class="nk"> &lt;bitcoin-git&gt;</span> [13bitcoin] 15laanwj closed pull request #9292: Complain when unknown rpcserialversion is specified (06master...06nofutureserial) 02https://github.com/bitcoin/bitcoin/pull/9292
<a name="l-64"></a><span class="tm">19:11:53</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">cfields:</span> agreed
<a name="l-65"></a><span class="tm">19:12:58</span><span class="nk"> &lt;wumpus&gt;</span> ok, so #9262 off by default? should it still be backported then?
<a name="l-66"></a><span class="tm">19:13:01</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9262 | Prefer coins that have fewer ancestors, sanity check txn before ATMP by instagibbs · Pull Request #9262 · bitcoin/bitcoin · GitHub
<a name="l-67"></a><span class="tm">19:13:14</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">cfields/wumpus:</span> I think there is a fix commit for 9212 on the issue page at the bottom (I havent pr'ed yet because testing, but I think it'd work)
<a name="l-68"></a><span class="tm">19:13:28</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> yes, it should, the main thing in the change is that it avoids creating those poorly propagating transactions when it's possible.
<a name="l-69"></a><span class="tm">19:13:42</span><span class="nk"> &lt;gmaxwell&gt;</span> (My opinion)
<a name="l-70"></a><span class="tm">19:13:44</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">wumpus:</span> 9262 does 2 things 1) avoid long chains 2) pre-reject created wallet transactions that would exceed limits
<a name="l-71"></a><span class="tm">19:13:51</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> so it still does something even if it's disabled? okay
<a name="l-72"></a><span class="tm">19:13:52</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">wumpus:</span> only 2 is optional
<a name="l-73"></a><span class="tm">19:13:59</span><span class="nk"> &lt;wumpus&gt;</span> okay, right, that wasn't clear to me
<a name="l-74"></a><span class="tm">19:14:19</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">BlueMatt:</span> ok, will test that too
<a name="l-75"></a><span class="tm">19:14:38</span><span class="nk"> &lt;instagibbs&gt;</span> yes so with default off it will simply try harder to pick coins that have shorter chain length
<a name="l-76"></a><span class="tm">19:14:44</span><span class="nk"> &lt;instagibbs&gt;</span> rather than blindly
<a name="l-77"></a><span class="tm">19:15:06</span><span class="nk"> &lt;sipa&gt;</span> which won't have an effect if you're always sending your full change
<a name="l-78"></a><span class="tm">19:15:10</span><span class="nk"> &lt;sipa&gt;</span> but better is better
<a name="l-79"></a><span class="tm">19:15:32</span><span class="nk"> &lt;cfields&gt;</span> <span class="hi">BlueMatt:</span> the reason I didn't do that is that it hides the previous behavior. The current asserts point out issues that need to be backported to 0.13
<a name="l-80"></a><span class="tm">19:15:43</span><span class="nk"> &lt;cfields&gt;</span> (which admittedly should've been loud errors rather than asserts)
<a name="l-81"></a><span class="tm">19:15:46</span><span class="nk"> &lt;gmaxwell&gt;</span> The original suggestion to create that change was (1) based on me actually encountering users that could have avoided the long chains.
<a name="l-82"></a><span class="tm">19:16:11</span><span class="nk"> &lt;btcdrak&gt;</span> here
<a name="l-83"></a><span class="tm">19:16:39</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">cfields:</span> critical issues? or nothing that needs to hold up 0.13.2?
<a name="l-84"></a><span class="tm">19:16:51</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">cfields:</span> I had a node go down with-- we think-- that assert.. but can't tell where it was triggered from.
<a name="l-85"></a><span class="tm">19:16:59</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">cfields:</span> do they really need backporting?
<a name="l-86"></a><span class="tm">19:17:03</span><span class="nk"> &lt;cfields&gt;</span> <span class="hi">wumpus:</span> likely nothing critical, just possible data leaks
<a name="l-87"></a><span class="tm">19:17:20</span><span class="nk"> &lt;wumpus&gt;</span> so if I get this right there are now two remaining unmerged pulls that need backport to 0.13.2 https://github.com/bitcoin/bitcoin/pulls?q=is%3Aopen+is%3Apr+milestone%3A0.13.2
<a name="l-88"></a><span class="tm">19:17:26</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">cfields:</span> why are those data leaks? anyway, I think we previously discussed not using nVersion != 0 for this check
<a name="l-89"></a><span class="tm">19:17:38</span><span class="nk"> &lt;wumpus&gt;</span> just one I mean, the other *is* a a backport
<a name="l-90"></a><span class="tm">19:17:41</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">cfields:</span> i'd say that such issues are things where we're certainly violating some of our own assumptions about how the p2p implementation works, but unlikely things that cause issues in interaction with other nodes
<a name="l-91"></a><span class="tm">19:18:14</span><span class="nk"> &lt;cfields&gt;</span> any assert represents some case where we should be disconnected, but instead are still sending/responding.
<a name="l-92"></a><span class="tm">19:18:25</span><span class="nk"> &lt;jtimon&gt;</span> <span class="cmd">#8855 </span><span class="cmdline">could need rebase if there's new uses of Params(std::string), but if there are, they won't necessarily cause git conflicts</span>
<a name="l-93"></a><span class="tm">19:18:35</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">cfields:</span> no, in this case it means we are sending, but havent yet sent version message
<a name="l-94"></a><span class="tm">19:19:00</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> I believe #9352 will be tagged for backport-- but it's too green to comment on it for the moment.
<a name="l-95"></a><span class="tm">19:19:25</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> that's too bad, I hoped we could finally get this over with this week
<a name="l-96"></a><span class="tm">19:19:41</span><span class="nk"> &lt;cfields&gt;</span> <span class="hi">BlueMatt:</span> right, which specifically here means that we've refused the connection due to missing connection flags, but we're still sending/responding
<a name="l-97"></a><span class="tm">19:19:47</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> can't it wait for 0.13.3?
<a name="l-98"></a><span class="tm">19:19:48</span><span class="nk"> &lt;sdaftuar&gt;</span> <span class="hi">gmaxwell:</span> should i go ahead and open the backport version of #9352?
<a name="l-99"></a><span class="tm">19:19:58</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">wumpus:</span> its a relatively simple patch, I'm hopeful we still can :)
<a name="l-100"></a><span class="tm">19:20:09</span><span class="nk"> &lt;instagibbs&gt;</span> I will review asap
<a name="l-101"></a><span class="tm">19:20:58</span><span class="nk"> &lt;cfields&gt;</span> <span class="hi">BlueMatt:</span> let's take it up after the meeting
<a name="l-102"></a><span class="tm">19:21:03</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">cfields:</span> sure
<a name="l-103"></a><span class="tm">19:23:22</span><span class="nk"> &lt;wumpus&gt;</span> okay, any other topics to discuss?
<a name="l-104"></a><span class="tm">19:23:32</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">sdaftuar:</span> I think that would be useful.
<a name="l-105"></a><span class="tm">19:23:49</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> I really want 0.13.2 in RC ASAP. just have some specific conerns about needing that. We'll work through it.
<a name="l-106"></a><span class="tm">19:24:12</span><span class="nk"> &lt;MarcoFalke&gt;</span> Could 9262 delay the rc?
<a name="l-107"></a><span class="tm">19:24:20</span><span class="nk"> &lt;MarcoFalke&gt;</span> Is it well tested?
<a name="l-108"></a><span class="tm">19:24:20</span><span class="nk"> &lt;jtimon&gt;</span> <span class="cmd">#8498 </span><span class="cmdline">has been in the backlog for a while too (before that, #6445 was waiting for #6526/#6625/#6557 and friends, which were merged or closed long ago)</span>
<a name="l-109"></a><span class="tm">19:24:35</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">MarcoFalke:</span> I've tested the heck out of it. dunno about others.
<a name="l-110"></a><span class="tm">19:24:35</span><span class="nk"> &lt;MarcoFalke&gt;</span> (Note that it was not yet merged into master)
<a name="l-111"></a><span class="tm">19:24:49</span><span class="nk"> &lt;MarcoFalke&gt;</span> (I haven't really looked at it)
<a name="l-112"></a><span class="tm">19:24:56</span><span class="nk"> &lt;cfields&gt;</span> <span class="hi">wumpus:</span> regarding the assertion backports, nothing would be a regression from 0.13, so no need to delay, only a bonus if we get fixes in.
<a name="l-113"></a><span class="tm">19:25:08</span><span class="nk"> &lt;btcdrak&gt;</span> <span class="hi">sdaftuar:</span> ack on backport #9352
<a name="l-114"></a><span class="tm">19:25:28</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">MarcoFalke:</span> it's the oldest of thes long-chain wallet fixes, just last to merge. as it had lots of oppturnities for shed painting and resulted in deciding to fix the other issues. :)
<a name="l-115"></a><span class="tm">19:25:39</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">MarcoFalke:</span> there was at least the discussion to disable the setting by default, but after that change I don't know why it should hold up anything
<a name="l-116"></a><span class="tm">19:25:56</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">MarcoFalke:</span> I don't think there's any critical concerns with it left
<a name="l-117"></a><span class="tm">19:26:05</span><span class="nk"> &lt;gmaxwell&gt;</span> with the default off it only changes 'non-determinstic' behavior.
<a name="l-118"></a><span class="tm">19:26:19</span><span class="nk"> &lt;gmaxwell&gt;</span> (selectcoins)
<a name="l-119"></a><span class="tm">19:26:27</span><span class="nk"> &lt;sipa&gt;</span> the patch always had the setting off by default - i was the one arguing that it should be on by default instead (and it seems few people agree, fine)
<a name="l-120"></a><span class="tm">19:26:36</span><span class="nk"> &lt;instagibbs&gt;</span> Hm? it was on before
<a name="l-121"></a><span class="tm">19:26:42</span><span class="nk"> &lt;instagibbs&gt;</span> but this is pre other 2 changes
<a name="l-122"></a><span class="tm">19:26:45</span><span class="nk"> &lt;sipa&gt;</span> oh? maybe before i looked at it :)
<a name="l-123"></a><span class="tm">19:27:22</span><span class="nk"> &lt;wumpus&gt;</span> let's just settle on having it disabled by default in the initial merge and the backport, it can always be set to be enabled by default later...
<a name="l-124"></a><span class="tm">19:27:24</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">sipa:</span> you could argue for that in 0.14 later.
<a name="l-125"></a><span class="tm">19:27:31</span><span class="nk"> &lt;gmaxwell&gt;</span> that.
<a name="l-126"></a><span class="tm">19:27:32</span><span class="nk"> &lt;MarcoFalke&gt;</span> Agree wumpus
<a name="l-127"></a><span class="tm">19:28:06</span><span class="nk"> &lt;wumpus&gt;</span> there's no need to fix everything in one pull, or one version for that matter, sometimes things are held up too long on minor discussion points
<a name="l-128"></a><span class="tm">19:28:18</span><span class="nk"> &lt;instagibbs&gt;</span> better is better
<a name="l-129"></a><span class="tm">19:28:22</span><span class="nk"> &lt;wumpus&gt;</span> right.
<a name="l-130"></a><span class="tm">19:28:26</span><span class="nk"> &lt;MarcoFalke&gt;</span> <span class="hi">morcos:</span> gmaxwell: Do you have a strong opinion about the fLimitFree flag in the #9290
<a name="l-131"></a><span class="tm">19:28:28</span><span class="nk"> &lt;MarcoFalke&gt;</span> backport?
<a name="l-132"></a><span class="tm">19:28:33</span><span class="nk"> &lt;gmaxwell&gt;</span> sometimes better is worse, there is totally like an essay on this. :P
<a name="l-133"></a><span class="tm">19:28:47</span><span class="nk"> &lt;jtimon&gt;</span> <span class="hi">sipa:</span> just said fine on not having it on by default, didn't he?
<a name="l-134"></a><span class="tm">19:29:15</span><span class="nk"> &lt;wumpus&gt;</span> yes he did, I meant in general
<a name="l-135"></a><span class="tm">19:29:17</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jtimon:</span> yes, i'm fine with it being off
<a name="l-136"></a><span class="tm">19:29:54</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">MarcoFalke:</span> ah yes that's an important point
<a name="l-137"></a><span class="tm">19:29:55</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">MarcoFalke:</span> Didn't see your question until now. will evaluate.
<a name="l-138"></a><span class="tm">19:30:13</span><span class="nk"> &lt;wumpus&gt;</span> so this is about this comment: https://github.com/bitcoin/bitcoin/pull/9347#discussion_r92503011
<a name="l-139"></a><span class="tm">19:30:22</span><span class="nk"> &lt;MarcoFalke&gt;</span> Imo it should not matter too much, but I'd rather have a second opinion
<a name="l-140"></a><span class="tm">19:30:25</span><span class="nk"> &lt;bitcoin-git&gt;</span> [13bitcoin] 15sdaftuar opened pull request #9357: [0.13 backport] Attempt reconstruction from all compact block announcements (060.13...06backport-optimistic-cb) 02https://github.com/bitcoin/bitcoin/pull/9357
<a name="l-141"></a><span class="tm">19:32:06</span><span class="nk"> &lt;MarcoFalke&gt;</span> I haven't checked if it caused issues with txes evicted from the pool due to low fee.
<a name="l-142"></a><span class="tm">19:32:53</span><span class="nk"> &lt;gmaxwell&gt;</span> I need to look into it carefully to make a decision on my view, not going to manage it during the meeting.
<a name="l-143"></a><span class="tm">19:33:10</span><span class="nk"> &lt;MarcoFalke&gt;</span> ok, other topics?
<a name="l-144"></a><span class="tm">19:34:02</span><span class="nk"> &lt;morcos&gt;</span> <span class="hi">MarcoFalke:</span> I hadn't seen the flimitFree thing before now, I'll take a look and get back to you after...  (same as gmaxwell)
<a name="l-145"></a><span class="tm">19:34:18</span><span class="nk"> &lt;MarcoFalke&gt;</span> great, thx
<a name="l-146"></a><span class="tm">19:34:31</span><span class="nk"> &lt;gmaxwell&gt;</span> We could talk about the compact block announcement stuff not the backports but the change; just so people know what the change is about.
<a name="l-147"></a><span class="tm">19:34:54</span><span class="nk"> &lt;wumpus&gt;</span> <span class="topic">#topic </span><span class="topicline">compact block announcement stuff</span>
<a name="l-148"></a><span class="tm">19:35:13</span><span class="nk"> &lt;gmaxwell&gt;</span> Right now, if someone sends us a header, we request a block and mark the block in flight. If a compact block (e.g. from a HB mode sender that sends unsolicited ones) shows up while we're waiting.. we just ignore it, instead of trying to reconstruct the block.
<a name="l-149"></a><span class="tm">19:35:55</span><span class="nk"> &lt;gmaxwell&gt;</span> This means that if a peer is broken and slowly transmits or fails to reply, the HB mode will fail to work around it.
<a name="l-150"></a><span class="tm">19:36:44</span><span class="nk"> &lt;gmaxwell&gt;</span> There is a deep rabbit hole we can go down towards optimal behavior, but what is proposed right now is a super minimal change where even if a block is in flight, we'll still see if we can recover the whole block from just the compact block. And if we can, we take it, and mark the block as complete.
<a name="l-151"></a><span class="tm">19:37:16</span><span class="nk"> &lt;wumpus&gt;</span> sounds sensible
<a name="l-152"></a><span class="tm">19:37:42</span><span class="nk"> &lt;gmaxwell&gt;</span> greater than 2/3rs of all blocks can be recovered from just the compact block (varries a lot based on miner/network behavior) so even this small improvement should be a pretty big help.
<a name="l-153"></a><span class="tm">19:37:44</span><span class="nk"> &lt;wumpus&gt;</span> there seems some potential for race conditions though
<a name="l-154"></a><span class="tm">19:37:46</span><span class="nk"> &lt;BlueMatt&gt;</span> this is especially important with prefill, where, if your peer upgrades to prefill txn in the announcement you can recover the block somtimes and recover from stalling without yourself upgrading
<a name="l-155"></a><span class="tm">19:38:25</span><span class="nk"> &lt;wumpus&gt;</span> what if the compact block is reconstructed, and then the inflight block comes in?
<a name="l-156"></a><span class="tm">19:38:39</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> yes, though we don't count on the in-flight to protect against that, and if a full block shows up right now we'll accept it.
<a name="l-157"></a><span class="tm">19:38:54</span><span class="nk"> &lt;sdaftuar&gt;</span> <span class="hi">wumpus:</span> should not be a problem.  there's generally no downside to receiving a block you already have.
<a name="l-158"></a><span class="tm">19:38:58</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> then its just like someone sending us an unsolicited full block, which we'll process if it's not best already.
<a name="l-159"></a><span class="tm">19:40:02</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">sdaftuar:</span> in general there's no downside, just thought it'd be a potential edge case, but if that's handled that's ok
<a name="l-160"></a><span class="tm">19:40:44</span><span class="nk"> &lt;gmaxwell&gt;</span> In any case, I think that summarizes where that is, I have several nodes testing live right now.. obviously will need review and testing.. but I just wanted everyone to know what was going on there.
<a name="l-161"></a><span class="tm">19:44:01</span><span class="nk"> &lt;jtimon&gt;</span> thanks, I assume more questions about this or other topics?
<a name="l-162"></a><span class="tm">19:46:14</span><span class="nk"> &lt;achow101&gt;</span> when are we planning to start rc'ing for 0.13.2
<a name="l-163"></a><span class="tm">19:47:22</span><span class="nk"> &lt;wumpus&gt;</span> dunno, yesterday if it was up to me :p
<a name="l-164"></a><span class="tm">19:48:04</span><span class="nk"> &lt;wumpus&gt;</span> in any case there's still a few things open and you can help by testing and reviewing: https://github.com/bitcoin/bitcoin/pulls?q=is%3Aopen+is%3Apr+milestone%3A0.13.2
<a name="l-165"></a><span class="tm">19:49:40</span><span class="nk"> &lt;wumpus&gt;</span> bah looks like the build is broken
<a name="l-166"></a><span class="tm">19:50:51</span><span class="nk"> &lt;wumpus&gt;</span> any other topics? if not we'll close the meeting early
<a name="l-167"></a><span class="tm">19:51:14</span><span class="nk"> &lt;sipa&gt;</span> very short report: gmaxwell and i have been experimenting with a per-txout utxo cache approach
<a name="l-168"></a><span class="tm">19:51:15</span><span class="nk"> &lt;gmaxwell&gt;</span> Close meeting early and make 0.13.2 great again ACK.
<a name="l-169"></a><span class="tm">19:51:25</span><span class="nk"> &lt;sipa&gt;</span> so far results don't look too promising
<a name="l-170"></a><span class="tm">19:51:27</span><span class="nk"> &lt;wumpus&gt;</span> heh
<a name="l-171"></a><span class="tm">19:51:42</span><span class="nk"> &lt;morcos&gt;</span> <span class="hi">sipa:</span> yeah i haven't looked at that yet
<a name="l-172"></a><span class="tm">19:51:46</span><span class="nk"> &lt;morcos&gt;</span> i'm surprised!
<a name="l-173"></a><span class="tm">19:51:56</span><span class="nk"> &lt;morcos&gt;</span> i was super optimistic
<a name="l-174"></a><span class="tm">19:52:00</span><span class="nk"> &lt;sipa&gt;</span> me too
<a name="l-175"></a><span class="tm">19:52:05</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">sipa:</span> so grouping the utxos per transaction turns out to have been a good optimization? I'm surprised too
<a name="l-176"></a><span class="tm">19:52:12</span><span class="nk"> &lt;gmaxwell&gt;</span> Well when it's operating totally in memory it's 15% faster even though sipa has not exploited the new structure for better cache intelligence (so its still doing the same dumb flush thing). But when leveldb came into the picture it ate dirt.
<a name="l-177"></a><span class="tm">19:52:21</span><span class="nk"> &lt;morcos&gt;</span> 15% is for babies
<a name="l-178"></a><span class="tm">19:52:34</span><span class="nk"> &lt;instagibbs&gt;</span> what level are you on morcos :)
<a name="l-179"></a><span class="tm">19:52:52</span><span class="nk"> &lt;sdaftuar&gt;</span> i'm going to give a cheers for the sigcache cuckoocache merge now!
<a name="l-180"></a><span class="tm">19:53:05</span><span class="nk"> &lt;jtimon&gt;</span> mhm, haven't looked at the branch, are the utxo's catched per txout but stored per-tx?
<a name="l-181"></a><span class="tm">19:53:23</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jtimon:</span> both per txout
<a name="l-182"></a><span class="tm">19:53:23</span><span class="nk"> &lt;gmaxwell&gt;</span> Assuming the issue isn't extra debugging sipa added, the downside is perhaps that it is just much harder on leveldb and writes a lot more traffic to the leveldb log.
<a name="l-183"></a><span class="tm">19:53:24</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">gmaxwell:</span> seems like something where you can per-utxo in memory and per-tx on disk?
<a name="l-184"></a><span class="tm">19:53:46</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">BlueMatt:</span> yes I was about to suggest that too
<a name="l-185"></a><span class="tm">19:53:51</span><span class="nk"> &lt;gmaxwell&gt;</span> The real gains from the change would come from making the cache smarter, so I thought 15% was great news.. since that likely came from reduced malloc traffic.
<a name="l-186"></a><span class="tm">19:53:52</span><span class="nk"> &lt;BlueMatt&gt;</span> i mean might lose all the performance on the boundary, but its worth a shot
<a name="l-187"></a><span class="tm">19:54:01</span><span class="nk"> &lt;jtimon&gt;</span> <span class="hi">sipa:</span> thanks. mhmm, yeah, this is surprising then
<a name="l-188"></a><span class="tm">19:54:05</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">BlueMatt:</span> that doesn't solve the O(n^2) issue with large transactions
<a name="l-189"></a><span class="tm">19:54:10</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">BlueMatt:</span> yes, I made that observation too.... but it means that read modify write cycles would be needed.
<a name="l-190"></a><span class="tm">19:54:28</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> yeah that would be bad...
<a name="l-191"></a><span class="tm">19:54:48</span><span class="nk"> &lt;wumpus&gt;</span> lookups are slow, if you need read-modify-write cycles it's not going to help performance
<a name="l-192"></a><span class="tm">19:54:55</span><span class="nk"> &lt;sipa&gt;</span> the O(n^2) issue is that a tx with many outputs on every spend needs to write n-i outputs to the database
<a name="l-193"></a><span class="tm">19:55:19</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> yes, though it might pay for itself by the cache being much more effective. I guess we won't know until after more testing.
<a name="l-194"></a><span class="tm">19:55:19</span><span class="nk"> &lt;cfields&gt;</span> <span class="hi">sdaftuar:</span> +1. Still catching up, didn't see that got merged. Great to see :)
<a name="l-195"></a><span class="tm">19:56:08</span><span class="nk"> &lt;gmaxwell&gt;</span> the other negative is that it looks like this change will require a chainstate reindex. making it compatible with undo files seems really hard.
<a name="l-196"></a><span class="tm">19:56:44</span><span class="nk"> &lt;sipa&gt;</span> basically my reason for wanting per-txout cache is that the current behaviour may be good on average, but it's terrible for big transactions
<a name="l-197"></a><span class="tm">19:56:48</span><span class="nk"> &lt;jtimon&gt;</span> maybe somehow writting txouts in batches could help? (thinking out loud, may be a stupid thought)
<a name="l-198"></a><span class="tm">19:56:59</span><span class="nk"> &lt;wumpus&gt;</span> requiring everyone to do a chainstate reindex would be bad too :/
<a name="l-199"></a><span class="tm">19:57:05</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jtimon:</span> we're already batching _all_ writes from many blocks
<a name="l-200"></a><span class="tm">19:57:37</span><span class="nk"> &lt;jtimon&gt;</span> <span class="hi">sipa:</span> I see, it was a stupid thought
<a name="l-201"></a><span class="tm">19:57:47</span><span class="nk"> &lt;sipa&gt;</span> anyway, just reporting on an experiment - nothing more at this point
<a name="l-202"></a><span class="tm">19:57:50</span><span class="nk"> &lt;morcos&gt;</span> <span class="hi">gmaxwell:</span> i'm not sure what you mean about making the cache smarter
<a name="l-203"></a><span class="tm">19:58:02</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> right now everyone's chainstate is corrupted... to at some point we'll need to do something about that.  (TXversions)
<a name="l-204"></a><span class="tm">19:58:09</span><span class="nk"> &lt;wumpus&gt;</span> writes are pretty fast with leveldb, it's lookups/reads are slow, especially on slow disks
<a name="l-205"></a><span class="tm">19:58:09</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">morcos:</span> not wiping the cache after a write
<a name="l-206"></a><span class="tm">19:58:13</span><span class="nk"> &lt;morcos&gt;</span> in my view once its only keeping utxos that were actually accessed and not the rest that tagged along with the tx, then thats as smart as it gets
<a name="l-207"></a><span class="tm">19:58:29</span><span class="nk"> &lt;Chris_Stewart_5&gt;</span> Are we thinking txs are going to become larger in terms of inputs/outputs as Bitcoin grows? UTXO size is constantly growing right?
<a name="l-208"></a><span class="tm">19:58:34</span><span class="nk"> &lt;morcos&gt;</span> <span class="hi">sipa:</span> sure but you still have to do something when you hit memory limits
<a name="l-209"></a><span class="tm">19:58:43</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">Chris_Stewart_5:</span> i wish it were not growing at all
<a name="l-210"></a><span class="tm">19:59:01</span><span class="nk"> &lt;wumpus&gt;</span> batching writes more is not going to help, and batches are already huge in memory
<a name="l-211"></a><span class="tm">19:59:02</span><span class="nk"> &lt;morcos&gt;</span> you can save the things that are in blocks from the top of your mempool, but thats really small... small enough that it can be done pretty effectively with the existing model
<a name="l-212"></a><span class="tm">19:59:03</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">Chris_Stewart_5:</span> http://bitcoin.sipa.be/utxo_size.png
<a name="l-213"></a><span class="tm">19:59:05</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">morcos:</span> yes the right thing to do is to expire only the oldest entrties at that point. Which is much cleaner when there is no such thing as entry mutation.
<a name="l-214"></a><span class="tm">19:59:12</span><span class="nk"> &lt;Chris_Stewart_5&gt;</span> I guess it is just interesting to hear the tidbit about terrible performance of large txs.
<a name="l-215"></a><span class="tm">19:59:14</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> requiring everyone to reindex at the same time is not an acceptable solution though :)
<a name="l-216"></a><span class="tm">19:59:26</span><span class="nk"> &lt;morcos&gt;</span> ah, oldest, yes ok, but that requires extra state
<a name="l-217"></a><span class="tm">19:59:30</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> maybe it could support two database versions for a while
<a name="l-218"></a><span class="tm">19:59:42</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">Chris_Stewart_5:</span> in general, we need to optimize worst-case performance, not average performance
<a name="l-219"></a><span class="tm">19:59:44</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> new reindexes/syncs would use the new format
<a name="l-220"></a><span class="tm">20:00:01</span><span class="nk"> &lt;wumpus&gt;</span> in any acsae, thanks for trying this experiment
<a name="l-221"></a><span class="tm">20:00:08</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">Chris_Stewart_5:</span> as a large difference between worst-case and average means we could be missing DoS opportunities where an attacker can force us into the worsr
<a name="l-222"></a><span class="tm">20:00:10</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> if it made it N fold faster, than reindex on a new version... might be something we could have happen. I think perhaps we'd want to finish your snapshooting work and other things at the same time. ... in any case it's just an expirement now.
<a name="l-223"></a><span class="tm">20:00:16</span><span class="nk"> &lt;wumpus&gt;</span> even if it turns out it's not better it's good to know this for sure
<a name="l-224"></a><span class="tm">20:00:37</span><span class="nk"> &lt;gmaxwell&gt;</span> it also has resulted in some other optimizations, e.g. the flushing optimization PR that we have right now.
<a name="l-225"></a><span class="tm">20:00:41</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">Chris_Stewart_5:</span> but it's really sad when you need to decrease your average performance in order to improve the worst case... because people don't observe the worst case
<a name="l-226"></a><span class="tm">20:00:51</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> if it was possible to convert the old database to the new database without a reindex (e.g. just rewriting) then an upgrade process would be acceptable. But a full reindex? no
<a name="l-227"></a><span class="tm">20:01:02</span><span class="nk"> &lt;gmaxwell&gt;</span> Good, the meeting has run over, so all is well with the world. :)
<a name="l-228"></a><span class="tm">20:01:08</span><span class="nk"> &lt;wumpus&gt;</span> <span class="cmd">#endmeeting</span><span class="cmdline"></span></pre>
</body></html>
