<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<title>#bitcoin-core-dev log</title>
<style type="text/css">
/* For the .log.html */
pre { /*line-height: 125%;*/
      white-space: pre-wrap; }
body { background: #f0f0f0; }

body .tm  { color: #007020 }                      /* time */
body .nk  { color: #062873; font-weight: bold }   /* nick, regular */
body .nka { color: #007020; font-weight: bold }  /* action nick */
body .ac  { color: #00A000 }                      /* action line */
body .hi  { color: #4070a0 }                 /* hilights */
/* Things to make particular MeetBot commands stick out */
body .topic     { color: #007020; font-weight: bold }
body .topicline { color: #000080; font-weight: bold }
body .cmd       { color: #007020; font-weight: bold }
body .cmdline  { font-weight: bold }

</style>
</head>

<body>
<pre><a name="l-1"></a><span class="tm">19:00:20</span><span class="nk"> &lt;wumpus&gt;</span> <span class="cmd">#startmeeting</span><span class="cmdline"></span>
<a name="l-2"></a><span class="tm">19:00:20</span><span class="nk"> &lt;lightningbot&gt;</span> Meeting started Thu Mar 23 19:00:20 2017 UTC.  The chair is wumpus. Information about MeetBot at http://wiki.debian.org/MeetBot.
<a name="l-3"></a><span class="tm">19:00:20</span><span class="nk"> &lt;lightningbot&gt;</span> Useful Commands: #action #agreed #help #info #idea #link #topic.
<a name="l-4"></a><span class="tm">19:00:20</span><span class="nk"> &lt;sipa&gt;</span> hi
<a name="l-5"></a><span class="tm">19:00:20</span><span class="nk"> &lt;achow101&gt;</span> hi
<a name="l-6"></a><span class="tm">19:00:27</span><span class="nk"> &lt;gmaxwell&gt;</span> Welcome to meeting.
<a name="l-7"></a><span class="tm">19:00:34</span><span class="nk"> &lt;cfields&gt;</span> hi
<a name="l-8"></a><span class="tm">19:00:50</span><span class="nk"> &lt;btcdrak&gt;</span> greetings!
<a name="l-9"></a><span class="tm">19:00:57</span><span class="nk"> &lt;wumpus&gt;</span> proposed topics?
<a name="l-10"></a><span class="tm">19:01:14</span><span class="nk"> &lt;btcdrak&gt;</span> holiday at the beach?
<a name="l-11"></a><span class="tm">19:01:27</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">btcdrak:</span> that's what the financial crypto conference is for
<a name="l-12"></a><span class="tm">19:01:29</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> The segwit address proposal on the list.
<a name="l-13"></a><span class="tm">19:01:35</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">gmaxwell:</span> +1
<a name="l-14"></a><span class="tm">19:01:37</span><span class="nk"> &lt;wumpus&gt;</span> sounds good to me
<a name="l-15"></a><span class="tm">19:01:39</span><span class="nk"> &lt;btcdrak&gt;</span> +1
<a name="l-16"></a><span class="tm">19:01:44</span><span class="nk"> &lt;wumpus&gt;</span> <span class="topic">#topic  </span><span class="topicline">segwit address proposal</span>
<a name="l-17"></a><span class="tm">19:01:53</span><span class="nk"> &lt;jonasschnelli&gt;</span> proposed topic: DER encoded priv keys in wallet
<a name="l-18"></a><span class="tm">19:02:05</span><span class="nk"> &lt;jonasschnelli&gt;</span> ack #sw addr format
<a name="l-19"></a><span class="tm">19:02:12</span><span class="nk"> &lt;sipa&gt;</span> general opinions/questions about the segwit addr format?
<a name="l-20"></a><span class="tm">19:02:25</span><span class="nk"> &lt;gmaxwell&gt;</span> We might have made a strategic error in getting 1:1 comments from too many people, causing a darth of comments on the list.  Comments on the list would be good even if they're just "I reviewed this before, LGTM"
<a name="l-21"></a><span class="tm">19:02:26</span><span class="nk"> &lt;jonasschnelli&gt;</span> Andreas S. concern about QRCode?
<a name="l-22"></a><span class="tm">19:02:44</span><span class="nk"> &lt;kanzure&gt;</span> who has reviewed bech32 by now?
<a name="l-23"></a><span class="tm">19:02:45</span><span class="nk"> &lt;btcdrak&gt;</span> ML post is here https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-March/013749.html
<a name="l-24"></a><span class="tm">19:03:03</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> petertodd responded, by i can give some extra commemtd
<a name="l-25"></a><span class="tm">19:03:04</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">gmaxwell:</span> along thsoe lines, I think making some of those 1:1 comments public might be helpful for new devs interested in learning how these processes work
<a name="l-26"></a><span class="tm">19:03:06</span><span class="nk"> &lt;sipa&gt;</span> *commemts
<a name="l-27"></a><span class="tm">19:03:10</span><span class="nk"> &lt;jonasschnelli&gt;</span> IMO QRCode have redundant parts while - as far as I understand bech32 – has also error correction.. seems a bit unefficient. Though QRCode are another layer I guess.
<a name="l-28"></a><span class="tm">19:03:47</span><span class="nk"> &lt;jonasschnelli&gt;</span> (need to read petertodd's response; wasn't aware(
<a name="l-29"></a><span class="tm">19:03:55</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jonasschnelli:</span> He suggested it use more characters but using anything non-alphanum makes it so double click copy doesn't work in browsers,  also being a non power-of-prime base makes strong error detection infesable, and at best could reduce the size by a couple percent.
<a name="l-30"></a><span class="tm">19:04:09</span><span class="nk"> &lt;gmaxwell&gt;</span> These points are all addressed in the document, I believe.
<a name="l-31"></a><span class="tm">19:04:29</span><span class="nk"> &lt;kanzure&gt;</span> tromp's MiXcAsE proposal was a joke right?
<a name="l-32"></a><span class="tm">19:04:43</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">gmaxwell:</span> base 43 is actually totally doable as it is a prime
<a name="l-33"></a><span class="tm">19:04:46</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">gmaxwell:</span> there's a few things that the document doesn't mention as clearly as it could, like how non-alphanum poses barriers for non-english-speaking users
<a name="l-34"></a><span class="tm">19:04:50</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">jonasschnelli:</span> I don't think the qr error detection/correction is strong enough for somthing as critical to get right as an address
<a name="l-35"></a><span class="tm">19:04:51</span><span class="nk"> &lt;gmaxwell&gt;</span> (in fact in an earlier revision we used - as a seperator but dropped it for click copy compatibility)
<a name="l-36"></a><span class="tm">19:04:51</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">gmaxwell:</span> but it requires bignum code to convert
<a name="l-37"></a><span class="tm">19:05:04</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">wumpus:</span> Yes. Agree.
<a name="l-38"></a><span class="tm">19:05:24</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">petertodd:</span> feel free to suggest better language :)
<a name="l-39"></a><span class="tm">19:05:29</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> it would probably be fine if we only ever used QR codes.. but obviously that isn't possible.
<a name="l-40"></a><span class="tm">19:06:03</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">sipa:</span> will do - also thanks for having such a great list of rationals already! really helpful to understand why something was chosen and what the tradeoffs are
<a name="l-41"></a><span class="tm">19:06:09</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">petertodd:</span> yes, though really being num only be best for international support but the result is significantly bigger and slower to deal with. :(  I tried that out at one point.
<a name="l-42"></a><span class="tm">19:06:13</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> a more compact format could be used with qr codes, in any case, if that's desirable. That doesn't affect this standard.
<a name="l-43"></a><span class="tm">19:06:21</span><span class="nk"> &lt;luke-jr&gt;</span> QR codes could hypothetically encode it in binary, but meh
<a name="l-44"></a><span class="tm">19:06:43</span><span class="nk"> &lt;kanzure&gt;</span> rationale section was good, although i think it would be worthwhile to describe the 'exhaustive search'
<a name="l-45"></a><span class="tm">19:06:47</span><span class="nk"> &lt;kanzure&gt;</span> in public
<a name="l-46"></a><span class="tm">19:06:49</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">luke-jr:</span> right.
<a name="l-47"></a><span class="tm">19:06:59</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">luke-jr:</span> if we had a binary QR only format I assume it would intentionally begin with something like a null byte to make sure it doesn't get mangled by text channels.
<a name="l-48"></a><span class="tm">19:07:14</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">gmaxwell:</span> yeah, we're fortunate that lots of non-english-speakers still known the alphabet; even english speakers often don't know the names of punctuation symbols, and those names are also not entirely canonical
<a name="l-49"></a><span class="tm">19:07:57</span><span class="nk"> &lt;jonasschnelli&gt;</span> It's probably not worth to design an additional binary addr standard for QrCodes. Maybe they are only temporary? Gone in 3-4 yrs?
<a name="l-50"></a><span class="tm">19:08:04</span><span class="nk"> &lt;gmaxwell&gt;</span> There were a lot of other rational things we trimmed from the document. One of pieter's concerns was that the length of the document would make it seem complicated (though the proposal is pretty simple.); feedback on reddit seemed to somewhat validate that.
<a name="l-51"></a><span class="tm">19:08:12</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">luke-jr:</span> so by matchin QR code's special-case character set support, we end up with an encoding that at the low level is basically binary anyway
<a name="l-52"></a><span class="tm">19:08:35</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jonasschnelli:</span> I think that it's probably not worth it for that, but industry feedback would be nice.
<a name="l-53"></a><span class="tm">19:08:50</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">petertodd:</span> thats a point, though the unfortuate thing is that it's exposed to mangling.
<a name="l-54"></a><span class="tm">19:09:04</span><span class="nk"> &lt;sipa&gt;</span> the alphanuneric mode is pretty efficient; only 10% extra compared to binary
<a name="l-55"></a><span class="tm">19:09:12</span><span class="nk"> &lt;sipa&gt;</span> it uses 5.5 bits per character
<a name="l-56"></a><span class="tm">19:09:16</span><span class="nk"> &lt;gmaxwell&gt;</span> e.g. QR decoder -&gt; something that munges up the strings -&gt; software -&gt; coins in sppppaccccceeee.
<a name="l-57"></a><span class="tm">19:09:24</span><span class="nk"> &lt;sipa&gt;</span> so 5.5 bits per 5 bits of data is pretty goof
<a name="l-58"></a><span class="tm">19:09:26</span><span class="nk"> &lt;sipa&gt;</span> good
<a name="l-59"></a><span class="tm">19:09:34</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">jonasschnelli:</span> I think the day Qr codes aren't heavily used will be the day bech32 is irrelevant anyway because people are all paying each other by very different means :)
<a name="l-60"></a><span class="tm">19:09:49</span><span class="nk"> &lt;jonasschnelli&gt;</span> probably... :)
<a name="l-61"></a><span class="tm">19:10:04</span><span class="nk"> &lt;sipa&gt;</span> while base58 uses 8 bits per 5.86 bits of data
<a name="l-62"></a><span class="tm">19:10:15</span><span class="nk"> &lt;gmaxwell&gt;</span> sipas point is more important, only a 10%-ish overhead in this format vs some binary QR code.
<a name="l-63"></a><span class="tm">19:10:50</span><span class="nk"> &lt;sipa&gt;</span> if you also drop the checksum, we get much larger savings of course
<a name="l-64"></a><span class="tm">19:11:13</span><span class="nk"> &lt;sipa&gt;</span> in practice you'd get a 25% reduction for p2wpkh
<a name="l-65"></a><span class="tm">19:11:23</span><span class="nk"> &lt;jonasschnelli&gt;</span> side note: could the Bech32 encoding also be used for private keys (== 32bit seeds)?
<a name="l-66"></a><span class="tm">19:11:29</span><span class="nk"> &lt;gmaxwell&gt;</span> true. but ugh. the some text handling path replaces a character.
<a name="l-67"></a><span class="tm">19:11:31</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> good question!
<a name="l-68"></a><span class="tm">19:11:37</span><span class="nk"> &lt;wumpus&gt;</span> indeed, for base58 addresses there also never has been a binary standard for qr codes
<a name="l-69"></a><span class="tm">19:11:44</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> we've been thinking about a stronger checksum for private keys
<a name="l-70"></a><span class="tm">19:11:45</span><span class="nk"> &lt;Anduck&gt;</span> QR codes iirc can work even if 30% of the code misread
<a name="l-71"></a><span class="tm">19:11:46</span><span class="nk"> &lt;wumpus&gt;</span> which would have saved a lot more
<a name="l-72"></a><span class="tm">19:12:03</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">jonasschnelli:</span> yes - in fact I'm planning on using it for non-bitcoin applications too
<a name="l-73"></a><span class="tm">19:12:06</span><span class="nk"> &lt;sipa&gt;</span> possibly 12 checksum characters (which is the maximum doable with 64 bit arithmetic)
<a name="l-74"></a><span class="tm">19:12:24</span><span class="nk"> &lt;jonasschnelli&gt;</span> Yes. An alternative for bip39?
<a name="l-75"></a><span class="tm">19:12:42</span><span class="nk"> &lt;gmaxwell&gt;</span> For private keys additional error _correction_ is interesting, and additional overhead is not very consequential.
<a name="l-76"></a><span class="tm">19:12:59</span><span class="nk"> &lt;sipa&gt;</span> bech32 can only correct 2 errors, but detect 4
<a name="l-77"></a><span class="tm">19:13:22</span><span class="nk"> &lt;sipa&gt;</span> for addresses you really only care about detection
<a name="l-78"></a><span class="tm">19:13:29</span><span class="nk"> &lt;sipa&gt;</span> but for private keys you want correction
<a name="l-79"></a><span class="tm">19:13:37</span><span class="nk"> &lt;wumpus&gt;</span> yes, quite a different use case
<a name="l-80"></a><span class="tm">19:13:45</span><span class="nk"> &lt;gmaxwell&gt;</span> So we've been working on that some in the background. So it would be a different spec but just very similar. (e.g. similar kind of 5 lines of code) for the 12 digit checksum or what not.
<a name="l-81"></a><span class="tm">19:13:58</span><span class="nk"> &lt;sipa&gt;</span> with a 12 character checksum, correcting 3 errors is trivial
<a name="l-82"></a><span class="tm">19:14:07</span><span class="nk"> &lt;jonasschnelli&gt;</span> current WIF can correct 0.
<a name="l-83"></a><span class="tm">19:14:15</span><span class="nk"> &lt;sipa&gt;</span> but perhaps we can find one that can correct 4
<a name="l-84"></a><span class="tm">19:14:20</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">kanzure:</span> we left out a lot of technical manutia about the construction which is interesting but not really relevant to the spec.
<a name="l-85"></a><span class="tm">19:15:05</span><span class="nk"> &lt;wumpus&gt;</span> makes sense to keep the spec focused and minimal, that way people will more likely read it :) you could link to an additional description, or include it as appendix or such
<a name="l-86"></a><span class="tm">19:15:42</span><span class="nk"> &lt;sipa&gt;</span> earlier version explained finite field arithmetic and generator polynomials :)
<a name="l-87"></a><span class="tm">19:15:45</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">wumpus:</span> maybe good to make it a spec + design document? put rational/etc. in the latter. IIRC SHA3 had a document like that, among others.
<a name="l-88"></a><span class="tm">19:15:58</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">petertodd:</span> yes indeed
<a name="l-89"></a><span class="tm">19:16:05</span><span class="nk"> &lt;jonasschnelli&gt;</span> The question about the level of complexity: We should't care. Pieter's stuff tend to be complicated. But only because its great and though through well. Awesome work IMO!
<a name="l-90"></a><span class="tm">19:16:06</span><span class="nk"> &lt;jtimon&gt;</span> I haven't fully reviewed it, but I've had a fast read on several versions of the doc and asked questions to sipa
<a name="l-91"></a><span class="tm">19:16:42</span><span class="nk"> &lt;gmaxwell&gt;</span> Finding a 12-digit code that corrects 4 may take more computing power than we have with just the a hundred cores here... though sipa has done a lot to take that search from completely intractable to plausable. :)   I think this work is a lot lower priority though other things we could be working on (like utxo database refactors and tx compaction) ....
<a name="l-92"></a><span class="tm">19:17:27</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> i think the result is actually surprisingly simple
<a name="l-93"></a><span class="tm">19:17:50</span><span class="nk"> &lt;sipa&gt;</span> (but i'm probably biased)
<a name="l-94"></a><span class="tm">19:17:52</span><span class="nk"> &lt;gmaxwell&gt;</span> In any case, review and comment please!
<a name="l-95"></a><span class="tm">19:17:59</span><span class="nk"> &lt;luke-jr&gt;</span> I think it's more important to *detect* errors, than to correct them
<a name="l-96"></a><span class="tm">19:18:07</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">luke-jr:</span> for addresses, absolutely
<a name="l-97"></a><span class="tm">19:18:19</span><span class="nk"> &lt;luke-jr&gt;</span> 4 seems a bit low in that regard
<a name="l-98"></a><span class="tm">19:18:51</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">sipa:</span> I think deeply understanding the specs takes a coupe of hours... and it's different to the current base58check. This may frighten off people... but that shouldn't be something that should affect the process of selecting the *next* addr encoding format IMO
<a name="l-99"></a><span class="tm">19:18:53</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">luke-jr:</span> for private keys you can generate the resulting wallet and check against the blockchain.. so correcting can be very useful.
<a name="l-100"></a><span class="tm">19:18:53</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">luke-jr:</span> what do you mean by "4" in the above?
<a name="l-101"></a><span class="tm">19:19:12</span><span class="nk"> &lt;luke-jr&gt;</span> [19:12:59] &lt;sipa&gt; bech32 can only correct 2 errors, but detect 4
<a name="l-102"></a><span class="tm">19:19:36</span><span class="nk"> &lt;gmaxwell&gt;</span> Well it is _guarenteed_ to detect 4 errors, more than 4 you have a 1:2^30 chance of detecting.
<a name="l-103"></a><span class="tm">19:19:56</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">luke-jr:</span> well it has a 99.9999999068% chance to detect more errors
<a name="l-104"></a><span class="tm">19:19:58</span><span class="nk"> &lt;luke-jr&gt;</span> if I carefully construct gibberish, I'd expect it to be rejected
<a name="l-105"></a><span class="tm">19:20:14</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">sipa:</span> ah, okay
<a name="l-106"></a><span class="tm">19:20:38</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">luke-jr:</span> for this application, the threat is random mistakes, not malice - in the malice case someone could just replace the address anyway
<a name="l-107"></a><span class="tm">19:20:50</span><span class="nk"> &lt;gmaxwell&gt;</span> This graph shows the probablity of an error going undetected (y) as a function of how likely the user is to make mistakes (x):
<a name="l-108"></a><span class="tm">19:20:53</span><span class="nk"> &lt;gmaxwell&gt;</span> https://people.xiph.org/~greg/temp/bch-eff3.png
<a name="l-109"></a><span class="tm">19:21:08</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> https://github.com/sipa/bech32/blob/master/ref/python/segwit_addr.py &lt;- full encoder/decoder implementation
<a name="l-110"></a><span class="tm">19:21:13</span><span class="nk"> &lt;cfields&gt;</span> great work indeed. From what I remember from our discussions before, the work to derive the function was complex, but afterwards, implementing it is simple. Seems best-case to me :). Will review now that it's final.
<a name="l-111"></a><span class="tm">19:21:42</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">sipa:</span> 121 lines... yes. thats indeed very simple.
<a name="l-112"></a><span class="tm">19:21:50</span><span class="nk"> &lt;gmaxwell&gt;</span> As you can see, if the user's error rate is below 3.53 errors per address entered, this code has better protection than a 32bit hash (like base58 check uses).  And because of case modulation, users are MUCH less likely to make mistakes with this format.
<a name="l-113"></a><span class="tm">19:22:38</span><span class="nk"> &lt;gmaxwell&gt;</span> If the user is unlikely to make errors, then the effective protection of this scheme tends to infinity.
<a name="l-114"></a><span class="tm">19:23:22</span><span class="nk"> &lt;gmaxwell&gt;</span> e.g. 0.1% chance of error per character and the probablity that an errored string goes undetected is 1:2^60.
<a name="l-115"></a><span class="tm">19:23:40</span><span class="nk"> &lt;sipa&gt;</span> enough on this topic, i guess
<a name="l-116"></a><span class="tm">19:24:10</span><span class="nk"> &lt;wumpus&gt;</span> other topics?
<a name="l-117"></a><span class="tm">19:24:18</span><span class="nk"> &lt;gmaxwell&gt;</span> jonasschnelli suggested the der wallet thing.
<a name="l-118"></a><span class="tm">19:24:30</span><span class="nk"> &lt;jonasschnelli&gt;</span> Yes. We still keep all priv keys DER encoded in BDB
<a name="l-119"></a><span class="tm">19:24:47</span><span class="nk"> &lt;jonasschnelli&gt;</span> I think we should bundle the next wallet db update with remvoing DER
<a name="l-120"></a><span class="tm">19:24:50</span><span class="nk"> &lt;gmaxwell&gt;</span> The compressed flag has no effect on our operation. We should always set it IMO... make the wallet sightly smaller. Its dumb that the data is stored at all.. it's not used.  But since it's there, better to make it small.
<a name="l-121"></a><span class="tm">19:25:04</span><span class="nk"> &lt;gmaxwell&gt;</span> if we make the format incompatible, sure.
<a name="l-122"></a><span class="tm">19:25:29</span><span class="nk"> &lt;jonasschnelli&gt;</span> Reading DER (old versions) must be supported. But new wallets should store in plain.
<a name="l-123"></a><span class="tm">19:25:33</span><span class="nk"> &lt;wumpus&gt;</span> <span class="topic">#topic </span><span class="topicline">DER privkeys in wallet</span>
<a name="l-124"></a><span class="tm">19:25:33</span><span class="nk"> &lt;gmaxwell&gt;</span> Why are we even storing seralized private keys when BIP32 is in use?
<a name="l-125"></a><span class="tm">19:25:41</span><span class="nk"> &lt;jonasschnelli&gt;</span> Yes.
<a name="l-126"></a><span class="tm">19:25:44</span><span class="nk"> &lt;jonasschnelli&gt;</span> Importprivkey
<a name="l-127"></a><span class="tm">19:25:48</span><span class="nk"> &lt;jonasschnelli&gt;</span> and old wallets
<a name="l-128"></a><span class="tm">19:26:00</span><span class="nk"> &lt;jonasschnelli&gt;</span> But I think HD wallets should only have a single privkey (the HD seed)
<a name="l-129"></a><span class="tm">19:26:02</span><span class="nk"> &lt;gmaxwell&gt;</span> okay, for that, sure. But I agree, fine to not use DER private keys for that.
<a name="l-130"></a><span class="tm">19:26:22</span><span class="nk"> &lt;jonasschnelli&gt;</span> Also the seed key is also DER right now. :/
<a name="l-131"></a><span class="tm">19:26:27</span><span class="nk"> &lt;gmaxwell&gt;</span> but otherwise there shouldn't be seralized private keys. Pubkeys yes. :)
<a name="l-132"></a><span class="tm">19:26:37</span><span class="nk"> &lt;gmaxwell&gt;</span> wut
<a name="l-133"></a><span class="tm">19:26:52</span><span class="nk"> &lt;jonasschnelli&gt;</span> Yes. Ideally it should be... and I think we are working in this direction...
<a name="l-134"></a><span class="tm">19:26:55</span><span class="nk"> &lt;wumpus&gt;</span> didn't we have an issue related to this?
<a name="l-135"></a><span class="tm">19:26:56</span><span class="nk"> &lt;gmaxwell&gt;</span> okay well, whatever, there is only one there. We could encode it as cat pictures for all I care.
<a name="l-136"></a><span class="tm">19:26:56</span><span class="nk"> &lt;phantomcircuit&gt;</span> yeah it's saved using the same format as other private keys
<a name="l-137"></a><span class="tm">19:27:26</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> there is an issue open over the compressed flag, though its inconsequential.
<a name="l-138"></a><span class="tm">19:27:31</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">wumpus:</span> Yes. https://github.com/bitcoin/bitcoin/issues/10041
<a name="l-139"></a><span class="tm">19:27:38</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> ok
<a name="l-140"></a><span class="tm">19:27:44</span><span class="nk"> &lt;jonasschnelli&gt;</span> and a fix: https://github.com/bitcoin/bitcoin/pull/10043
<a name="l-141"></a><span class="tm">19:27:56</span><span class="nk"> &lt;wumpus&gt;</span> I wasn't aware it was inconsequential
<a name="l-142"></a><span class="tm">19:27:58</span><span class="nk"> &lt;gmaxwell&gt;</span> I think that to the extent that we continue to write those keys (e.g. for old wallets) that we should always use the compressed flag.
<a name="l-143"></a><span class="tm">19:28:00 </span><span class="nka">* luke-jr</span> <span class="ac">ponders if importprivkey should be rejected for HD wallets</span>
<a name="l-144"></a><span class="tm">19:28:02</span><span class="nk"> &lt;wumpus&gt;</span> did anyone reply that to the issue?
<a name="l-145"></a><span class="tm">19:28:03</span><span class="nk"> &lt;jonasschnelli&gt;</span> Though,... as long as nobody reads BDB from the outside it shoudn't matter
<a name="l-146"></a><span class="tm">19:28:07</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> we decided compressed/uncompressed from the pubkey.
<a name="l-147"></a><span class="tm">19:28:24</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> the public key inside the der private key does nothing.
<a name="l-148"></a><span class="tm">19:28:25</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">luke-jr:</span> would be nice to keep HD wallets 'pure'
<a name="l-149"></a><span class="tm">19:28:34</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">luke-jr:</span> at the least it should throw a warning
<a name="l-150"></a><span class="tm">19:28:51</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> weird :)
<a name="l-151"></a><span class="tm">19:28:52</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">luke-jr:</span> Yes. We should reject... in that case
<a name="l-152"></a><span class="tm">19:28:55</span><span class="nk"> &lt;luke-jr&gt;</span> if we could do warnings, importprivkey should always throw a warning anyway :p
<a name="l-153"></a><span class="tm">19:29:02</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">Background:</span> The DER private key format includes the public key, along with all the ECC group parameters, and other overheads all packed in hundreds of bytes of ASN1 parsing hell.
<a name="l-154"></a><span class="tm">19:29:14</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">wumpus:</span> Yes. It wired... better DER is gone sooner then later
<a name="l-155"></a><span class="tm">19:29:29</span><span class="nk"> &lt;jonasschnelli&gt;</span> It would be another thing that will make future devs stumbel
<a name="l-156"></a><span class="tm">19:29:34</span><span class="nk"> &lt;wumpus&gt;</span> agreed
<a name="l-157"></a><span class="tm">19:29:49</span><span class="nk"> &lt;wumpus&gt;</span> so if there is a backwards-incompatible wallet change, that could be included, I guess
<a name="l-158"></a><span class="tm">19:29:54</span><span class="nk"> &lt;gmaxwell&gt;</span> Turns out we were trying to tell the der private key to use compressed or not on the basis of the key using compressed or not...  but the code was wrong. But it doesn't matter because we never did anything with the private key embedded public key.
<a name="l-159"></a><span class="tm">19:30:12</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">wumpus:</span> Yes. The hd chain split...
<a name="l-160"></a><span class="tm">19:30:23</span><span class="nk"> &lt;jonasschnelli&gt;</span> (which we hopefully can merge soon)
<a name="l-161"></a><span class="tm">19:30:28</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">jonasschnelli:</span> right
<a name="l-162"></a><span class="tm">19:30:55</span><span class="nk"> &lt;jonasschnelli&gt;</span> I think we would have enought time post hd split merge to remove DER for 0.14
<a name="l-163"></a><span class="tm">19:31:00</span><span class="nk"> &lt;gmaxwell&gt;</span> we should stage up several incompatible changes to make at once, the multitude of versions is a support burden. Changing the private key formats would be one of them.
<a name="l-164"></a><span class="tm">19:31:09</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">jonasschnelli:</span> 0.14 is gone; you mean 0.15?
<a name="l-165"></a><span class="tm">19:31:13</span><span class="nk"> &lt;BlueMatt&gt;</span> 15
<a name="l-166"></a><span class="tm">19:31:22</span><span class="nk"> &lt;jonasschnelli&gt;</span> Ergh.. yes.
<a name="l-167"></a><span class="tm">19:32:13</span><span class="nk"> &lt;jonasschnelli&gt;</span> Do we expect that the wallet db handles error correction or should we directly switch to something like Bech32 for our internal privkey serialisation?
<a name="l-168"></a><span class="tm">19:32:19</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">gmaxwell:</span> the code looks the same either way? wallet version 14990 14991 14992 can all be in the same release, whatever...code is still wallet.AmUpgradedTo(THING)
<a name="l-169"></a><span class="tm">19:32:54</span><span class="nk"> &lt;gmaxwell&gt;</span> in our code but not necessarily in other tools.
<a name="l-170"></a><span class="tm">19:33:00</span><span class="nk"> &lt;gmaxwell&gt;</span> also we have to worry about interactions.
<a name="l-171"></a><span class="tm">19:33:27</span><span class="nk"> &lt;BlueMatt&gt;</span> fair
<a name="l-172"></a><span class="tm">19:33:37</span><span class="nk"> &lt;wumpus&gt;</span> the wallet db has no error correction
<a name="l-173"></a><span class="tm">19:33:38</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">gmaxwell:</span> to be clear, are you suggesting they all happen in one wallet version, or in one release?
<a name="l-174"></a><span class="tm">19:33:55</span><span class="nk"> &lt;BlueMatt&gt;</span> (I mean we dont support wallet versions from mid-release, but it'd be really annoying...)
<a name="l-175"></a><span class="tm">19:34:02</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">wumpus:</span> I think this would/should be very desirable
<a name="l-176"></a><span class="tm">19:34:04</span><span class="nk"> &lt;wumpus&gt;</span> (berkeleydb doesn't and neither does leveldb, the latter only has detection)
<a name="l-177"></a><span class="tm">19:34:15</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">jonasschnelli:</span> yes, encoding privkeys in a resilient format makes sense
<a name="l-178"></a><span class="tm">19:34:20</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">jonasschnelli:</span> though doesn't encryption break that?
<a name="l-179"></a><span class="tm">19:34:30</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">jonasschnelli:</span> the error correction should be around the encryption, not inside it
<a name="l-180"></a><span class="tm">19:34:41</span><span class="nk"> &lt;wumpus&gt;</span> otherwise one bit change will  completely mangle it anyway
<a name="l-181"></a><span class="tm">19:34:44</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">BlueMatt:</span> preferable to be one version, but certantly one release. I don't know that we really don't support midrelease wallets. "sorry dude, your funds are gone, you made the mistake of helping us test." :P  there are degrees of non-support.
<a name="l-182"></a><span class="tm">19:34:48</span><span class="nk"> &lt;luke-jr&gt;</span> we have never broken wallet versions from mid-release AFAIK
<a name="l-183"></a><span class="tm">19:34:50</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">wumpus:</span> good point
<a name="l-184"></a><span class="tm">19:35:18</span><span class="nk"> &lt;gmaxwell&gt;</span> bech32 is not helpful for the kinds of errors we would find on disk.. you'll usually lose a whole sector at a time.
<a name="l-185"></a><span class="tm">19:35:24</span><span class="nk"> &lt;wumpus&gt;</span> eh, wallets from mid-release should not suddenly break in later updates
<a name="l-186"></a><span class="tm">19:35:45</span><span class="nk"> &lt;jonasschnelli&gt;</span> There is also a PR i'd like to bundle with chain-split/rm DER that would detatch the client version from the wallet version/migration handling (PR is called "wallet flags" or similar)
<a name="l-187"></a><span class="tm">19:35:48</span><span class="nk"> &lt;gmaxwell&gt;</span> To make a wallet database master key error robust you should just repeat it across multiple disk sectors. :P
<a name="l-188"></a><span class="tm">19:36:01</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> I've seen single bit errors happen on disk too, though usually due to bus errors
<a name="l-189"></a><span class="tm">19:36:28</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> yea, but not as common. And it would be fine to have a wallet format with a 4kb master key. .. but I think thats stuff to think about for the post BDB world.
<a name="l-190"></a><span class="tm">19:36:30</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">wumpus:</span> repeating across multiple disk errors fixes that too :)
<a name="l-191"></a><span class="tm">19:36:33</span><span class="nk"> &lt;wumpus&gt;</span> but some of the corrupted block files I"ve analyzed certainly had single bit errors
<a name="l-192"></a><span class="tm">19:36:47</span><span class="nk"> &lt;gmaxwell&gt;</span> sorry I stated it too strongly.
<a name="l-193"></a><span class="tm">19:37:18</span><span class="nk"> &lt;wumpus&gt;</span> in any case - for HD wallets we need to store way less private keys
<a name="l-194"></a><span class="tm">19:37:22</span><span class="nk"> &lt;wumpus&gt;</span> so blowing up the master key to 4kb is fine
<a name="l-195"></a><span class="tm">19:37:32</span><span class="nk"> &lt;gmaxwell&gt;</span> ya, t'was my intended point. :)
<a name="l-196"></a><span class="tm">19:37:35</span><span class="nk"> &lt;wumpus&gt;</span> if that helps protect against various kinds of corruption
<a name="l-197"></a><span class="tm">19:37:40</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">gmaxwell:</span> ok, so multiple version numbers, but external tools only need support them as a group and -walletupgrade only supports them as a group?
<a name="l-198"></a><span class="tm">19:38:16</span><span class="nk"> &lt;sipa&gt;</span> the wallet flags idea removes that release/walletversion inconsistency completely
<a name="l-199"></a><span class="tm">19:38:16</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">BlueMatt:</span> I think that would be okay but why multiple versions? add the code with the features, then a patch that turns all of them on with a single version.
<a name="l-200"></a><span class="tm">19:38:52</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">gmaxwell:</span> that's very hard for testing
<a name="l-201"></a><span class="tm">19:39:16</span><span class="nk"> &lt;sipa&gt;</span> as you'd need to be able to override the min version in tests to be able to even observe the feature
<a name="l-202"></a><span class="tm">19:39:19</span><span class="nk"> &lt;BlueMatt&gt;</span> yea, was just thinking easier for review burden, but I suppose thats fine too
<a name="l-203"></a><span class="tm">19:39:35</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">sipa:</span> not so hard to have an extra commit in a pr that doesnt get merged
<a name="l-204"></a><span class="tm">19:39:44</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">BlueMatt:</span> ugh
<a name="l-205"></a><span class="tm">19:39:48</span><span class="nk"> &lt;gmaxwell&gt;</span> we just create support hurdles for ourselves supporting mixed features. "oh this change brakes bob's wallet because he had a mid-release version that had X and not Y"
<a name="l-206"></a><span class="tm">19:39:54</span><span class="nk"> &lt;sipa&gt;</span> code in master should be testable
<a name="l-207"></a><span class="tm">19:40:19</span><span class="nk"> &lt;sipa&gt;</span> wallet flags does not necessarily imply supporting mixed features
<a name="l-208"></a><span class="tm">19:40:41</span><span class="nk"> &lt;gmaxwell&gt;</span> As long as it doesn't then I don't mind.
<a name="l-209"></a><span class="tm">19:40:56</span><span class="nk"> &lt;gmaxwell&gt;</span> Just please lets not dribble in three different incompatible versions during a release cycle.
<a name="l-210"></a><span class="tm">19:41:03</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">jonasschnelli:</span> detaching client version, fine, but would strongly prefer a serially increasing version number and not flags
<a name="l-211"></a><span class="tm">19:41:06</span><span class="nk"> &lt;gmaxwell&gt;</span> and end up with people with weird wallets that will break later.
<a name="l-212"></a><span class="tm">19:41:24</span><span class="nk"> &lt;sipa&gt;</span> we could also detach walletversion from client version
<a name="l-213"></a><span class="tm">19:41:32</span><span class="nk"> &lt;sipa&gt;</span> that would accomplish the same thing
<a name="l-214"></a><span class="tm">19:41:38</span><span class="nk"> &lt;BlueMatt&gt;</span> yea, that ^
<a name="l-215"></a><span class="tm">19:41:41</span><span class="nk"> &lt;gmaxwell&gt;</span> unless we're going to add tests for all the possible variations we shouldn't let people running master encounter them unawares.
<a name="l-216"></a><span class="tm">19:41:46</span><span class="nk"> &lt;sipa&gt;</span> and just increment the wallet version when a new feature is added
<a name="l-217"></a><span class="tm">19:41:52</span><span class="nk"> &lt;BlueMatt&gt;</span> wasnt sipa magic number picker for a while? can we just go back to that
<a name="l-218"></a><span class="tm">19:42:12</span><span class="nk"> &lt;BlueMatt&gt;</span> or jonasschnelli, since he owns wallet these days, mostly
<a name="l-219"></a><span class="tm">19:42:21</span><span class="nk"> &lt;gmaxwell&gt;</span> for testing you should just be able to set a commandline paramter that turns on future versions/features.
<a name="l-220"></a><span class="tm">19:42:51</span><span class="nk"> &lt;gmaxwell&gt;</span> e.g. default wallet created is version X  but there is code for version Y (or flag Y) and you can ask for it for testing, but until its the default its unstable and all bets are off.
<a name="l-221"></a><span class="tm">19:43:13</span><span class="nk"> &lt;jonasschnelli&gt;</span> Need to think about it. Flags seems to be good anyways (supports HD, watch only,...) but most not be linked to the wallet database version.. hmm..
<a name="l-222"></a><span class="tm">19:43:25</span><span class="nk"> &lt;gmaxwell&gt;</span> I don't care if we retain compatiblity for a wallet someone created by running bitcoind with --force-wallet-screw-me-over-now-now-now
<a name="l-223"></a><span class="tm">19:43:28</span><span class="nk"> &lt;jonasschnelli&gt;</span> s/most/must
<a name="l-224"></a><span class="tm">19:44:06</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">jonasschnelli:</span> flags just makes things more complicated to support (interactions, yuck), and I'm not sure we have a compelling use-case for turning on some stuff but not others, aside from "I want my wallet to work all the way back to version 0.X"
<a name="l-225"></a><span class="tm">19:44:11</span><span class="nk"> &lt;gmaxwell&gt;</span> And I'm fine with flags too, of course, but not with supporting arbritary combinations. (unless someone really wants to build extensive automated testing for all the combinations)
<a name="l-226"></a><span class="tm">19:44:37</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">BlueMatt:</span> Core isn't the only compatible wallet.
<a name="l-227"></a><span class="tm">19:44:47</span><span class="nk"> &lt;gmaxwell&gt;</span> e.g. basically a version implies flags... and you use flags in the code, and that doesn't mean that all combinations of flags get tested.
<a name="l-228"></a><span class="tm">19:45:13</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">luke-jr:</span> all other wallets that read our wallet format are unsupported, I believe (and, hell, probably easier for them if we dont have flags with interactions...)
<a name="l-229"></a><span class="tm">19:45:15</span><span class="nk"> &lt;jtimon&gt;</span> right, you can have flags and maybe even have debug option for experimental wallet features that we can remove in releases (or just not leave any wallet feature that doesn't have a version yet)
<a name="l-230"></a><span class="tm">19:45:22</span><span class="nk"> &lt;jonasschnelli&gt;</span> Flags would allow flexible backporting? But I think we don't want to do this.
<a name="l-231"></a><span class="tm">19:45:35</span><span class="nk"> &lt;jtimon&gt;</span> or just an extra commit that doesn't get merged like BlueMatt says
<a name="l-232"></a><span class="tm">19:45:40</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">BlueMatt:</span> you're rather aggressive with "unsupported" IMO
<a name="l-233"></a><span class="tm">19:45:42</span><span class="nk"> &lt;wumpus&gt;</span> we never backport wallet features
<a name="l-234"></a><span class="tm">19:45:54</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">luke-jr:</span> Our _binary_ wallet format isn't intended to be interoperable. If it is, great! but without a spec and a moving target, it isn't something we can guaretee.  To begin with there would need to be an extensive all features all flags test suite... and I think it would be a waste of time to construct that for this format (esp since we're never going to specify BDB itself).
<a name="l-235"></a><span class="tm">19:45:57</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">luke-jr:</span> we have limited resources, but, fair point
<a name="l-236"></a><span class="tm">19:46:11</span><span class="nk"> &lt;wumpus&gt;</span> yes, the database formats are not an external interface
<a name="l-237"></a><span class="tm">19:46:58</span><span class="nk"> &lt;wumpus&gt;</span> we reserve the right to change them completely from one release to another without advance notice, though that will usually not happen
<a name="l-238"></a><span class="tm">19:47:05</span><span class="nk"> &lt;gmaxwell&gt;</span> I don't know if wallet format compatiblity is a reasonable goal in general, at least not this year-- just because it's so integrally tied to the functionality.
<a name="l-239"></a><span class="tm">19:47:27</span><span class="nk"> &lt;wumpus&gt;</span> older wallets should *always* work
<a name="l-240"></a><span class="tm">19:47:34</span><span class="nk"> &lt;wumpus&gt;</span> that's the only guarantee
<a name="l-241"></a><span class="tm">19:47:36</span><span class="nk"> &lt;gmaxwell&gt;</span> but obviously we don't want to create unnecessary incompatiblity.
<a name="l-242"></a><span class="tm">19:47:43</span><span class="nk"> &lt;gmaxwell&gt;</span> right.
<a name="l-243"></a><span class="tm">19:47:51</span><span class="nk"> &lt;gmaxwell&gt;</span> okay, is this horse dead yet?
<a name="l-244"></a><span class="tm">19:47:55</span><span class="nk"> &lt;wumpus&gt;</span> yes
<a name="l-245"></a><span class="tm">19:47:57</span><span class="nk"> &lt;jonasschnelli&gt;</span> yes
<a name="l-246"></a><span class="tm">19:47:59</span><span class="nk"> &lt;wumpus&gt;</span> other topics?
<a name="l-247"></a><span class="tm">19:48:07</span><span class="nk"> &lt;sipa&gt;</span> lunch?
<a name="l-248"></a><span class="tm">19:48:11</span><span class="nk"> &lt;gmaxwell&gt;</span> I'd like to know if people might be willing to sign onto a statement like this:
<a name="l-249"></a><span class="tm">19:48:12</span><span class="nk"> &lt;luke-jr&gt;</span> wallet format changes move slowly. I try to avoid backporting pending PRs to Knots now, but IMO once they get merged they should be fair.
<a name="l-250"></a><span class="tm">19:48:15</span><span class="nk"> &lt;gmaxwell&gt;</span> https://0bin.net/paste/vSuqwACPe8WzpCnI#4katsiFvmtzK85e8eNgNVuElwD8kTbjPVuQnkontSyF
<a name="l-251"></a><span class="tm">19:48:17</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/4 | Export/Import wallet in a human readable, future-proof format · Issue #4 · bitcoin/bitcoin · GitHub
<a name="l-252"></a><span class="tm">19:48:29</span><span class="nk"> &lt;jtimon&gt;</span> sorry, "--force-wallet-screw-me-over-now-now-now" is exactly what I meant
<a name="l-253"></a><span class="tm">19:48:32</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">gmaxwell:</span> ACK
<a name="l-254"></a><span class="tm">19:48:32 </span><span class="nka">* BlueMatt</span> <span class="ac">proposes we have a weekly call for "what pr are you blocked on and want review on", though we've had mixed results when I've done that before</span>
<a name="l-255"></a><span class="tm">19:48:36</span><span class="nk"> &lt;gmaxwell&gt;</span> (gee thanks for the link gribble)
<a name="l-256"></a><span class="tm">19:49:06</span><span class="nk"> &lt;wumpus&gt;</span> <span class="topic">#topic </span><span class="topicline">statement against running closed source node code</span>
<a name="l-257"></a><span class="tm">19:49:16</span><span class="nk"> &lt;kanzure&gt;</span> "If it ever does, you may safely assume that the actual contributors to the project are locked in a basement somewhere. In that case, please send help." and food
<a name="l-258"></a><span class="tm">19:49:21</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">gmaxwell:</span> I haven't thought about it sufficiently to be certain about "never"
<a name="l-259"></a><span class="tm">19:49:23</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> ACK
<a name="l-260"></a><span class="tm">19:49:30</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">gmaxwell:</span> though I think the statement should be a little more clear on what the risks are - this is money so such a binary may very well be an attempt to steal your coins
<a name="l-261"></a><span class="tm">19:49:51</span><span class="nk"> &lt;wumpus&gt;</span> or may have hidden vulnerabilities, bugdoors and backdoors
<a name="l-262"></a><span class="tm">19:50:01</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">gmaxwell:</span> seems reasonable
<a name="l-263"></a><span class="tm">19:50:04</span><span class="nk"> &lt;jtimon&gt;</span> <span class="hi">BlueMatt:</span> the original flags can be replaced with the version flag once you have a version for a set of them
<a name="l-264"></a><span class="tm">19:50:07</span><span class="nk"> &lt;kanzure&gt;</span> yep seems good to me
<a name="l-265"></a><span class="tm">19:50:20</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">luke-jr:</span> I think I have, plus 1001 other open source packages have. As I point out in the document even if all other options fail, "shut off" remains an option too.
<a name="l-266"></a><span class="tm">19:50:27</span><span class="nk"> &lt;jonasschnelli&gt;</span> Yes. A statement would be good. Also.. github.binaries with a SHA256 on reddit is _not_ want you want for a such ecosystem
<a name="l-267"></a><span class="tm">19:50:31</span><span class="nk"> &lt;luke-jr&gt;</span> true
<a name="l-268"></a><span class="tm">19:50:41</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">wumpus:</span> see, I think it's good to say in such a statement "hidden vulnerabilities, bugdoors and backdoors" and *also* give a 100% concrete example for the non-devs reading it
<a name="l-269"></a><span class="tm">19:50:41</span><span class="nk"> &lt;jtimon&gt;</span> I mean, you can have a single fWalletForNextVersionExperimental flag
<a name="l-270"></a><span class="tm">19:50:42</span><span class="nk"> &lt;gmaxwell&gt;</span> okay well I would welcome revisions. I didn't want to make it long and explaining all the options and risks.
<a name="l-271"></a><span class="tm">19:50:58</span><span class="nk"> &lt;gmaxwell&gt;</span> Just saying "don't run these things if 'we' do" is protective to both the users and us.
<a name="l-272"></a><span class="tm">19:51:04</span><span class="nk"> &lt;wumpus&gt;</span> we have this stringent gitian process which costs quite a lot of time, maybe we should put more focus on it...
<a name="l-273"></a><span class="tm">19:51:34</span><span class="nk"> &lt;gmaxwell&gt;</span> In any earlier draft I had listed out some of the options we have (and have used before) and it was 3x longer than this just explining a couple of them. :)
<a name="l-274"></a><span class="tm">19:51:45</span><span class="nk"> &lt;kanzure&gt;</span> also, submitting source code "later" is not acceptable either
<a name="l-275"></a><span class="tm">19:51:47</span><span class="nk"> &lt;achow101&gt;</span> the statement should say "Bitcoin Core project", not "Bitcoin project" IMO
<a name="l-276"></a><span class="tm">19:51:52</span><span class="nk"> &lt;wumpus&gt;</span> I sometimes have the feeling we're doing all this auditability for nothing if people are ready to just download random crap binaries of the internet and run them, though I guess some do validate it...
<a name="l-277"></a><span class="tm">19:52:07</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> well we know not everyone does that.
<a name="l-278"></a><span class="tm">19:52:19</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">wumpus:</span> i think it's a slow process... the best we can do is talk about it, and highlight what we're doing
<a name="l-279"></a><span class="tm">19:52:37</span><span class="nk"> &lt;sipa&gt;</span> and just the increase in number of gitian builders on itself is a good sign
<a name="l-280"></a><span class="tm">19:52:40</span><span class="nk"> &lt;kanzure&gt;</span> mentioning bugdoors, backdoors and other malware is important
<a name="l-281"></a><span class="tm">19:52:46</span><span class="nk"> &lt;sipa&gt;</span> (reminds me, i need to build 0.14...)
<a name="l-282"></a><span class="tm">19:53:05</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">wumpus:</span> I know for a fact that many high-value users do verify PGP signatures and the like, e.g. exchanges and custodians. That effort isn't wasted.
<a name="l-283"></a><span class="tm">19:53:07</span><span class="nk"> &lt;gmaxwell&gt;</span> okay, well I can work with some people on some language twiddling. Sounds like a couple people are interested.
<a name="l-284"></a><span class="tm">19:53:20</span><span class="nk"> &lt;wumpus&gt;</span> I guess the important thing is that some people do validate it, and can raise a stink if things don't match, which is not possible with random crap executables
<a name="l-285"></a><span class="tm">19:53:28</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">petertodd:</span> right.
<a name="l-286"></a><span class="tm">19:53:29</span><span class="nk"> &lt;gmaxwell&gt;</span> and luke-jr if you want to talk later and have me convince you that we'd would never in the future do a binary release, I'd be happy to.
<a name="l-287"></a><span class="tm">19:53:39</span><span class="nk"> &lt;BlueMatt&gt;</span> one of these days I'm gonna finally convince cfields to finish his "trusting trust" compiler-builder for use in gitian, then I'll be much louder...the trusting-ubuntu part of gitian is...irritating at best (but still infinitely better than the alternative)
<a name="l-288"></a><span class="tm">19:53:48</span><span class="nk"> &lt;gmaxwell&gt;</span> (_NEVER_ I mean, in the strongest sense, I'm sure you already are convinced that almost never would hold)
<a name="l-289"></a><span class="tm">19:54:09</span><span class="nk"> &lt;luke-jr&gt;</span> yeah, I certainly can't think of any circumstances that would ever justify it.
<a name="l-290"></a><span class="tm">19:54:42</span><span class="nk"> &lt;cfields&gt;</span> <span class="hi">BlueMatt:</span> yea, that's a goal of mine for 0.15.
<a name="l-291"></a><span class="tm">19:54:43</span><span class="nk"> &lt;petertodd&gt;</span> <span class="hi">gmaxwell:</span> I like that you explicitly mentioned in that doc that interruption of service is perferable
<a name="l-292"></a><span class="tm">19:54:54</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">cfields:</span> yippee
<a name="l-293"></a><span class="tm">19:55:02</span><span class="nk"> &lt;BlueMatt&gt;</span> topic?
<a name="l-294"></a><span class="tm">19:55:11 </span><span class="nka">* BlueMatt</span> <span class="ac">proposes we have a weekly call for "what pr are you blocked on and want review on", though we've had mixed results when I've done that before</span>
<a name="l-295"></a><span class="tm">19:55:26</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">petertodd:</span> well I tested some of this explination on reddit while talking to people 1:1 about some things. so I have an idea of what needs to be explained.
<a name="l-296"></a><span class="tm">19:55:34</span><span class="nk"> &lt;jtimon&gt;</span> <span class="hi">gmaxwell:</span> I would prefer if we mentioned free software explicitly or even replace open source with free software, but I agree with everything said in that statement
<a name="l-297"></a><span class="tm">19:55:36</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">BlueMatt:</span> sounds good to me
<a name="l-298"></a><span class="tm">19:55:43</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">BlueMatt:</span> everyone gets to list 1 PR?
<a name="l-299"></a><span class="tm">19:55:49</span><span class="nk"> &lt;BlueMatt&gt;</span> <span class="hi">sipa:</span> sure
<a name="l-300"></a><span class="tm">19:55:51</span><span class="nk"> &lt;jonasschnelli&gt;</span> Maybe two? :)
<a name="l-301"></a><span class="tm">19:55:58</span><span class="nk"> &lt;BlueMatt&gt;</span> mine is 9725
<a name="l-302"></a><span class="tm">19:56:02</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jtimon:</span> ack. Thanks for the feedback I'll revise some and consult with others that had comments.
<a name="l-303"></a><span class="tm">19:56:06</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="cmd">#9725</span><span class="cmdline"></span>
<a name="l-304"></a><span class="tm">19:56:09</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9725 | CValidationInterface Cleanups by TheBlueMatt · Pull Request #9725 · bitcoin/bitcoin · GitHub
<a name="l-305"></a><span class="tm">19:56:11</span><span class="nk"> &lt;wumpus&gt;</span> so jonasschnelli's wallet chain split seems important
<a name="l-306"></a><span class="tm">19:56:21</span><span class="nk"> &lt;jonasschnelli&gt;</span> yes. please. #9294
<a name="l-307"></a><span class="tm">19:56:25</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9294 | Use internal HD chain for change outputs (hd split) by jonasschnelli · Pull Request #9294 · bitcoin/bitcoin · GitHub
<a name="l-308"></a><span class="tm">19:56:26</span><span class="nk"> &lt;kanzure&gt;</span> on that last topic, uh, maybe wee should point out that backdoors have been found in node software already (ahem some exchanges come to mind..).
<a name="l-309"></a><span class="tm">19:56:33</span><span class="nk"> &lt;BlueMatt&gt;</span> list from last week was #8694, 9294, 9725 and #7729
<a name="l-310"></a><span class="tm">19:56:35</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/8694 | Basic multiwallet support by luke-jr · Pull Request #8694 · bitcoin/bitcoin · GitHub
<a name="l-311"></a><span class="tm">19:56:39</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/7729 | An error has occurred and has been logged. Please contact this bot's administrator for more information.
<a name="l-312"></a><span class="tm">19:57:06</span><span class="nk"> &lt;BlueMatt&gt;</span> any additions/replacements or should we let the list stand?
<a name="l-313"></a><span class="tm">19:57:47</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="cmd">#9959 </span><span class="cmdline">could probably take some more reviews.</span>
<a name="l-314"></a><span class="tm">19:57:48</span><span class="nk"> &lt;wumpus&gt;</span> I'd also really like to have feedback on my patches to add UNIX sockets support at some point (#9979,  #9919) though it's not really urgent
<a name="l-315"></a><span class="tm">19:57:49</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9959 | Mining: Prevent slowdown in CreateNewBlock on large mempools by sdaftuar · Pull Request #9959 · bitcoin/bitcoin · GitHub
<a name="l-316"></a><span class="tm">19:57:50</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9979 | p2p: Bare minimum to support UNIX sockets by laanwj · Pull Request #9979 · bitcoin/bitcoin · GitHub
<a name="l-317"></a><span class="tm">19:57:52</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9919 | UNIX sockets support for RPC by laanwj · Pull Request #9919 · bitcoin/bitcoin · GitHub
<a name="l-318"></a><span class="tm">19:58:05</span><span class="nk"> &lt;gmaxwell&gt;</span> (suhas doesn't appear to be here now, so I thought I'd mention it)
<a name="l-319"></a><span class="tm">19:58:07 </span><span class="nka">* jtimon</span> <span class="ac">reminds to build 0.14</span>
<a name="l-320"></a><span class="tm">19:58:30</span><span class="nk"> &lt;luke-jr&gt;</span> I still have to look over BlueMatt's review on multiwallet, so I'll refrain from listing one this time ;)
<a name="l-321"></a><span class="tm">19:58:34</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> Those are a great idea. I will be trying them out. Did we find out if your patch to libevent is going to make it upstream?
<a name="l-322"></a><span class="tm">19:58:35</span><span class="nk"> &lt;cfields&gt;</span> <span class="hi">wumpus:</span> ah, i hadn't seen the p2p one
<a name="l-323"></a><span class="tm">19:58:40</span><span class="nk"> &lt;jonasschnelli&gt;</span> Can we keep the most important 1PR list on github somehow? A project?
<a name="l-324"></a><span class="tm">19:58:57</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> sounds good to me
<a name="l-325"></a><span class="tm">19:59:02</span><span class="nk"> &lt;jonasschnelli&gt;</span> I think this would be great because priorizing reviews is hard right now
<a name="l-326"></a><span class="tm">19:59:10</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> still haven't heard about that one, but I don't think it should matter for getting these patches in
<a name="l-327"></a><span class="tm">19:59:11</span><span class="nk"> &lt;sipa&gt;</span> a PR can belong to multiple projects, right?
<a name="l-328"></a><span class="tm">19:59:21</span><span class="nk"> &lt;gmaxwell&gt;</span> keep in mind to prioritize things that we would want in a 0.14.1.
<a name="l-329"></a><span class="tm">19:59:23</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">sipa:</span> AFAIK yes
<a name="l-330"></a><span class="tm">19:59:26</span><span class="nk"> &lt;jonasschnelli&gt;</span> hopefully
<a name="l-331"></a><span class="tm">19:59:29</span><span class="nk"> &lt;luke-jr&gt;</span> PR labels seems workable for that too
<a name="l-332"></a><span class="tm">19:59:37</span><span class="nk"> &lt;wumpus&gt;</span> we already have so many labels
<a name="l-333"></a><span class="tm">19:59:39</span><span class="nk"> &lt;luke-jr&gt;</span> "Top Priority" or somethign perhaps
<a name="l-334"></a><span class="tm">19:59:48</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">wumpus:</span> but labels are easy to filter :D
<a name="l-335"></a><span class="tm">19:59:59</span><span class="nk"> &lt;wumpus&gt;</span> also I use those to classify pulls for the release notes, so I'd prefer not to use them for non-categoritical things
<a name="l-336"></a><span class="tm">20:00:04</span><span class="nk"> &lt;jonasschnelli&gt;</span> Project seems to be the better choice...
<a name="l-337"></a><span class="tm">20:00:07</span><span class="nk"> &lt;wumpus&gt;</span> yes
<a name="l-338"></a><span class="tm">20:00:12</span><span class="nk"> &lt;gmaxwell&gt;</span> "author:wumpus" (since he does most of the merging any of his PRs are effectively 1-reviewer disadvantaged for getting in)
<a name="l-339"></a><span class="tm">20:00:17</span><span class="nk"> &lt;sipa&gt;</span> DONG
<a name="l-340"></a><span class="tm">20:00:29</span><span class="nk"> &lt;wumpus&gt;</span> <span class="cmd">#endmeeting</span><span class="cmdline"></span></pre>
</body></html>
