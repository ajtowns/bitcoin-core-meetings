<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<title>#bitcoin-core-dev log</title>
<style type="text/css">
/* For the .log.html */
pre { /*line-height: 125%;*/
      white-space: pre-wrap; }
body { background: #f0f0f0; }

body .tm  { color: #007020 }                      /* time */
body .nk  { color: #062873; font-weight: bold }   /* nick, regular */
body .nka { color: #007020; font-weight: bold }  /* action nick */
body .ac  { color: #00A000 }                      /* action line */
body .hi  { color: #4070a0 }                 /* hilights */
/* Things to make particular MeetBot commands stick out */
body .topic     { color: #007020; font-weight: bold }
body .topicline { color: #000080; font-weight: bold }
body .cmd       { color: #007020; font-weight: bold }
body .cmdline  { font-weight: bold }

</style>
</head>

<body>
<pre><a name="l-1"></a><span class="tm">19:00:07</span><span class="nk"> &lt;wumpus&gt;</span> <span class="cmd">#startmeeting</span><span class="cmdline"></span>
<a name="l-2"></a><span class="tm">19:00:07</span><span class="nk"> &lt;lightningbot&gt;</span> Meeting started Thu Jun 15 19:00:07 2017 UTC.  The chair is wumpus. Information about MeetBot at http://wiki.debian.org/MeetBot.
<a name="l-3"></a><span class="tm">19:00:07</span><span class="nk"> &lt;lightningbot&gt;</span> Useful Commands: #action #agreed #help #info #idea #link #topic.
<a name="l-4"></a><span class="tm">19:00:24</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">PSA:</span> v0.14.2 has been tagged, please start your gitian builders
<a name="l-5"></a><span class="tm">19:00:30</span><span class="nk"> &lt;wumpus&gt;</span> topics?
<a name="l-6"></a><span class="tm">19:00:34</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="cmd">#bitcoin-core-dev </span><span class="cmdline">Meeting: wumpus sipa gmaxwell jonasschnelli morcos luke-jr btcdrak sdaftuar jtimon cfields petertodd kanzure bluematt instagibbs phantomcircuit codeshark michagogo marcofalke paveljanik NicolasDorier</span>
<a name="l-7"></a><span class="tm">19:00:34</span><span class="nk"> &lt;wumpus&gt;</span> <span class="cmd">#bitcoin-core-dev </span><span class="cmdline">Meeting: wumpus sipa gmaxwell jonasschnelli morcos luke-jr btcdrak sdaftuar jtimon cfields petertodd kanzure bluematt instagibbs phantomcircuit codeshark michagogo marcofalke paveljanik NicolasDorier jl2012 instagibbs achow101</span>
<a name="l-8"></a><span class="tm">19:00:36</span><span class="nk"> &lt;kanzure&gt;</span> hi.
<a name="l-9"></a><span class="tm">19:00:40</span><span class="nk"> &lt;paveljanik&gt;</span> Hi
<a name="l-10"></a><span class="tm">19:00:41</span><span class="nk"> &lt;achow101&gt;</span> hi
<a name="l-11"></a><span class="tm">19:00:42</span><span class="nk"> &lt;cfields&gt;</span> <span class="hi">jonasschnelli:</span> i just wrote a quick mutex locktime reporter, ping me after meeting if you'd like to discuss
<a name="l-12"></a><span class="tm">19:00:44</span><span class="nk"> &lt;sdaftuar&gt;</span> here
<a name="l-13"></a><span class="tm">19:00:45</span><span class="nk"> &lt;sipa&gt;</span> yow
<a name="l-14"></a><span class="tm">19:00:49</span><span class="nk"> &lt;gmaxwell&gt;</span> (I guess I should update my list)
<a name="l-15"></a><span class="tm">19:00:57</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">cfields:</span> awesome!
<a name="l-16"></a><span class="tm">19:01:03</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">wumpus:</span> you're requesting the presence of 2 instagibbses?
<a name="l-17"></a><span class="tm">19:01:07</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">cfields:</span> finally someone did that, awesome.
<a name="l-18"></a><span class="tm">19:01:20</span><span class="nk"> &lt;cfields&gt;</span> well it's very dumb, but it's something :)
<a name="l-19"></a><span class="tm">19:01:21</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">sipa:</span> yes!
<a name="l-20"></a><span class="tm">19:01:34</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">cfields:</span> -DDEBUG_LOCKCONTENTION?
<a name="l-21"></a><span class="tm">19:01:38</span><span class="nk"> &lt;luke-jr&gt;</span> lol
<a name="l-22"></a><span class="tm">19:01:38</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">cfields:</span> dumb is good
<a name="l-23"></a><span class="tm">19:01:51</span><span class="nk"> &lt;wumpus&gt;</span> <span class="topic">#topic </span><span class="topicline">high priority for review</span>
<a name="l-24"></a><span class="tm">19:02:04</span><span class="nk"> &lt;gmaxwell&gt;</span> https://github.com/bitcoin/bitcoin/projects/8
<a name="l-25"></a><span class="tm">19:02:08</span><span class="nk"> &lt;sipa&gt;</span> <span class="cmd">#10148 </span><span class="cmdline">plz *puppyeyes*</span>
<a name="l-26"></a><span class="tm">19:02:10</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/10148 | Use non-atomic flushing with block replay by sipa · Pull Request #10148 · bitcoin/bitcoin · GitHub
<a name="l-27"></a><span class="tm">19:02:26</span><span class="nk"> &lt;wumpus&gt;</span> 10148 is already on the list, I'm testing it
<a name="l-28"></a><span class="tm">19:02:30</span><span class="nk"> &lt;sipa&gt;</span> cool
<a name="l-29"></a><span class="tm">19:02:33</span><span class="nk"> &lt;sdaftuar&gt;</span> i'm working on an rpc test as well
<a name="l-30"></a><span class="tm">19:02:39</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">sdaftuar:</span> awesome!
<a name="l-31"></a><span class="tm">19:02:42</span><span class="nk"> &lt;sipa&gt;</span> can i help?
<a name="l-32"></a><span class="tm">19:03:00</span><span class="nk"> &lt;sdaftuar&gt;</span> i'll let you know!
<a name="l-33"></a><span class="tm">19:03:05</span><span class="nk"> &lt;sdaftuar&gt;</span> i think i almos thave it
<a name="l-34"></a><span class="tm">19:04:08</span><span class="nk"> &lt;sipa&gt;</span> having thought more about it, i don't think #10339 will have any significant performance impact
<a name="l-35"></a><span class="tm">19:04:11</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/10339 | Optimization: Calculate block hash less times by jtimon · Pull Request #10339 · bitcoin/bitcoin · GitHub
<a name="l-36"></a><span class="tm">19:04:22</span><span class="nk"> &lt;luke-jr&gt;</span> basic multiwallet was merged. I hope to have the next step (RPC support) later today. ACK to add to priority then?
<a name="l-37"></a><span class="tm">19:04:48</span><span class="nk"> &lt;jonasschnelli&gt;</span> RPC support would be great
<a name="l-38"></a><span class="tm">19:04:53</span><span class="nk"> &lt;sipa&gt;</span> agree
<a name="l-39"></a><span class="tm">19:04:55</span><span class="nk"> &lt;jonasschnelli&gt;</span> You mean addressing wallet via RPC endpoint?
<a name="l-40"></a><span class="tm">19:04:55</span><span class="nk"> &lt;achow101&gt;</span> <span class="hi">luke-jr:</span> yes please
<a name="l-41"></a><span class="tm">19:05:08</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">jonasschnelli:</span> I mean each username has a different single wallet
<a name="l-42"></a><span class="tm">19:05:22</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">luke-jr:</span> hmm...
<a name="l-43"></a><span class="tm">19:05:24</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">sipa:</span> ok, removing it from high priority then
<a name="l-44"></a><span class="tm">19:05:27</span><span class="nk"> &lt;jonasschnelli&gt;</span> I'd prefere endpoints
<a name="l-45"></a><span class="tm">19:05:39</span><span class="nk"> &lt;jonasschnelli&gt;</span> AUTH for wallet switching seems hackish
<a name="l-46"></a><span class="tm">19:05:41</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">jonasschnelli:</span> endpoints can be done later; I'm just trying to get the simplest stuff done first
<a name="l-47"></a><span class="tm">19:05:50</span><span class="nk"> &lt;jonasschnelli&gt;</span> endpoint is 10lines of code
<a name="l-48"></a><span class="tm">19:05:54</span><span class="nk"> &lt;wumpus&gt;</span> I'd also prefer endpoints, makes it easier to move wallets to external processes etc just by changing the url
<a name="l-49"></a><span class="tm">19:05:57</span><span class="nk"> &lt;jonasschnelli&gt;</span> I can post it to you later
<a name="l-50"></a><span class="tm">19:06:00</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">jonasschnelli:</span> not securely ;p
<a name="l-51"></a><span class="tm">19:06:10</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">jonasschnelli:</span> I don't want JoinMarket to have access to my main wallet
<a name="l-52"></a><span class="tm">19:06:21</span><span class="nk"> &lt;jonasschnelli&gt;</span> there is no security in our RPC implementation :/
<a name="l-53"></a><span class="tm">19:06:24</span><span class="nk"> &lt;sipa&gt;</span> yay, wallet ACLs
<a name="l-54"></a><span class="tm">19:06:25 </span><span class="nka">* sipa</span> <span class="ac">hides</span>
<a name="l-55"></a><span class="tm">19:06:30</span><span class="nk"> &lt;wumpus&gt;</span> please don't use auth, it's not supposed to be a multi-user authentication mult-wallet, that just adds another nightmare difficult to support like accounts
<a name="l-56"></a><span class="tm">19:06:31</span><span class="nk"> &lt;achow101&gt;</span> you could do some combination of both?
<a name="l-57"></a><span class="tm">19:06:31</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">wumpus:</span> different username is also a simple change to the URI
<a name="l-58"></a><span class="tm">19:06:43</span><span class="nk"> &lt;wumpus&gt;</span> we already support different usernames/passwords
<a name="l-59"></a><span class="tm">19:06:49</span><span class="nk"> &lt;jonasschnelli&gt;</span> use a passphase as wallet name
<a name="l-60"></a><span class="tm">19:06:55</span><span class="nk"> &lt;wumpus&gt;</span> it's an authentication feature, should not affect the wallet
<a name="l-61"></a><span class="tm">19:06:56</span><span class="nk"> &lt;jonasschnelli&gt;</span> same security as basic auth?
<a name="l-62"></a><span class="tm">19:07:23</span><span class="nk"> &lt;sipa&gt;</span> i think the first step should be either endpoint or a generic optional named parameter to select the wallet
<a name="l-63"></a><span class="tm">19:07:24</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">wumpus:</span> I see no distinction
<a name="l-64"></a><span class="tm">19:07:28</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">sipa:</span> yes
<a name="l-65"></a><span class="tm">19:07:28</span><span class="nk"> &lt;gmaxwell&gt;</span> endpoints won't be ten lines of code. After all, we'll need to add support for them to bitcoin-cli, the test framework, etc.
<a name="l-66"></a><span class="tm">19:07:34</span><span class="nk"> &lt;achow101&gt;</span> <span class="hi">sipa:</span> agreed
<a name="l-67"></a><span class="tm">19:07:43</span><span class="nk"> &lt;sipa&gt;</span> the choice of which user can access which wallets is orthogonal, i think
<a name="l-68"></a><span class="tm">19:07:50</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> which is easy, the underlying stuff (rpcproxy, libevent) obviously supports it
<a name="l-69"></a><span class="tm">19:07:55</span><span class="nk"> &lt;sipa&gt;</span> but i would prefer not to tie users to wallets at the auth level
<a name="l-70"></a><span class="tm">19:07:57</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">gmaxwell:</span> yes Indeed
<a name="l-71"></a><span class="tm">19:08:48</span><span class="nk"> &lt;jonasschnelli&gt;</span> first stage, each user should be able to access each wallet....
<a name="l-72"></a><span class="tm">19:08:48</span><span class="nk"> &lt;gmaxwell&gt;</span> obviously we do want to have username/wallet binding, right?  This lets you be more confident e.g. that your joinmarket install isn't going to screw up your ordinary wallet, for example.
<a name="l-73"></a><span class="tm">19:08:48</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">sipa:</span> me neither, it just seems a level violation, and causes wrong expectations that giving access to RPC to one wallet is secure in any way
<a name="l-74"></a><span class="tm">19:08:54</span><span class="nk"> &lt;gmaxwell&gt;</span> (eventually)
<a name="l-75"></a><span class="tm">19:08:57</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">jonasschnelli:</span> no -.-
<a name="l-76"></a><span class="tm">19:09:11</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> I really think that's going too far
<a name="l-77"></a><span class="tm">19:09:23</span><span class="nk"> &lt;gmaxwell&gt;</span> then why are we bothering?
<a name="l-78"></a><span class="tm">19:09:27</span><span class="nk"> &lt;wumpus&gt;</span> securing RPC for multiple users is absolutely a nightmare
<a name="l-79"></a><span class="tm">19:09:32</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">luke-jr:</span> the first logical extendable step would be that, no? Adding wallet selecting via AUTH is something you need to throw away later
<a name="l-80"></a><span class="tm">19:09:49</span><span class="nk"> &lt;luke-jr&gt;</span> well, if I can't isolate JoinMarket this way, I have no interest in doing it.. so I can just move on to GUI and leave RPC support in Knots only
<a name="l-81"></a><span class="tm">19:09:51</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">wumpus:</span> i think it's inevitable that we'll need that
<a name="l-82"></a><span class="tm">19:09:53</span><span class="nk"> &lt;wumpus&gt;</span> anyhow a security layer could always be added could be later if endpoint-based multiwallet is in place
<a name="l-83"></a><span class="tm">19:09:58</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">sipa:</span> I think it's a mistake
<a name="l-84"></a><span class="tm">19:10:05</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">sipa:</span> just like accounts was
<a name="l-85"></a><span class="tm">19:10:13</span><span class="nk"> &lt;wumpus&gt;</span> it's something that bitcoind shouldn't handle
<a name="l-86"></a><span class="tm">19:10:27</span><span class="nk"> &lt;gmaxwell&gt;</span> I think what luke would like to accomplish is making multiwallet immediately useful for the application of combining multiple applicatoins onto one bitcoind; rather than having to run seperate bitcoinds for each thing that needs a wallet that you're running.
<a name="l-87"></a><span class="tm">19:10:30</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">jonasschnelli:</span> no?
<a name="l-88"></a><span class="tm">19:10:59</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">gmaxwell:</span> i think that's an interesting use case; i don't think it should be the first step
<a name="l-89"></a><span class="tm">19:11:04</span><span class="nk"> &lt;wumpus&gt;</span> that's just inviting bugs, there's no way we can make that secure, the RPC is not a secure endpoint and is regarded as compeltely  trusted
<a name="l-90"></a><span class="tm">19:11:34</span><span class="nk"> &lt;wumpus&gt;</span> it would escalate a bug in e.g. a single RPC command to a security issue, right now RPC access = fully trusted
<a name="l-91"></a><span class="tm">19:11:36</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">luke-jr:</span> I don't know the JoinMarket use case very well.. but if you give it access to your node, it could shutdown, add peers, etc. (in case you don't trust that software)
<a name="l-92"></a><span class="tm">19:11:45</span><span class="nk"> &lt;gmaxwell&gt;</span> This is also important to us at blockstream and we will end up maintaining a fork of Bitcoin with it. (though luke wasn't doing this work at our request).
<a name="l-93"></a><span class="tm">19:11:58</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">jonasschnelli:</span> even if we add endpoint multiwallet and ACLs later, we still want a way to select a default wallet for each user
<a name="l-94"></a><span class="tm">19:12:20</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">wumpus:</span> then why do we have auth at all?
<a name="l-95"></a><span class="tm">19:12:32</span><span class="nk"> &lt;jonasschnelli&gt;</span> I really think we should keep hands away from multi-user/multi-wallet setup
<a name="l-96"></a><span class="tm">19:12:34</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">luke-jr:</span> to gain access
<a name="l-97"></a><span class="tm">19:12:47</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">jonasschnelli:</span> me too... seems something that needs to be a level on top, not handled by bitcoind itself
<a name="l-98"></a><span class="tm">19:12:55</span><span class="nk"> &lt;jonasschnelli&gt;</span> For now we should focus on single-user/multi-wallet (1:n)
<a name="l-99"></a><span class="tm">19:13:15</span><span class="nk"> &lt;jonasschnelli&gt;</span> n:n smells like a account-like-problem-re-incarnation
<a name="l-100"></a><span class="tm">19:13:20</span><span class="nk"> &lt;wumpus&gt;</span> anyhow if we have endpoint multi-wallet access, it'spossible to slap on a wallet/user auth mapping later
<a name="l-101"></a><span class="tm">19:13:34</span><span class="nk"> &lt;luke-jr&gt;</span> or vice-versa..
<a name="l-102"></a><span class="tm">19:13:38</span><span class="nk"> &lt;wumpus&gt;</span> that's "just" a matter of access control
<a name="l-103"></a><span class="tm">19:13:44</span><span class="nk"> &lt;jonasschnelli&gt;</span> yes. n:n may make sense.. but endpoint first seems much more logical
<a name="l-104"></a><span class="tm">19:13:48</span><span class="nk"> &lt;wumpus&gt;</span> yes
<a name="l-105"></a><span class="tm">19:13:51</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jonasschnelli:</span> I do not follow your comment with account like problems. The problem with accounts is that they weren't wallets but users expected them to be and treated them like ones.
<a name="l-106"></a><span class="tm">19:14:06</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">gmaxwell:</span> Yes. Not directly related.
<a name="l-107"></a><span class="tm">19:14:10</span><span class="nk"> &lt;sipa&gt;</span> i don't think access control is necessarily that complicated; have a global permission and wallet specific permission; configure which users have which
<a name="l-108"></a><span class="tm">19:14:13</span><span class="nk"> &lt;wumpus&gt;</span> I just think that making bitcoind multi-user is a grave mistake
<a name="l-109"></a><span class="tm">19:14:18</span><span class="nk"> &lt;wumpus&gt;</span> but I"ll shut up about it...
<a name="l-110"></a><span class="tm">19:14:24</span><span class="nk"> &lt;jonasschnelli&gt;</span> I think the complexity is huge,.. leads to permission groups, etc.
<a name="l-111"></a><span class="tm">19:14:35</span><span class="nk"> &lt;wumpus&gt;</span> yes, exactly, some people wnat everything in bitcoind
<a name="l-112"></a><span class="tm">19:14:44</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jonasschnelli:</span> what? no it doesn't.
<a name="l-113"></a><span class="tm">19:14:47</span><span class="nk"> &lt;sipa&gt;</span> well it seems that multiple people want multiwallet for multiple reasons
<a name="l-114"></a><span class="tm">19:14:53</span><span class="nk"> &lt;sipa&gt;</span> i don't think that's a problem
<a name="l-115"></a><span class="tm">19:15:04</span><span class="nk"> &lt;sipa&gt;</span> and should not be a blocker for the basic functionality
<a name="l-116"></a><span class="tm">19:15:07</span><span class="nk"> &lt;wumpus&gt;</span> this is one the reason why the wallet should have been split off to a separate process / library I guess... now it all needs to be compounded
<a name="l-117"></a><span class="tm">19:15:11</span><span class="nk"> &lt;wumpus&gt;</span> making bitcoind some kind of systemd
<a name="l-118"></a><span class="tm">19:15:11</span><span class="nk"> &lt;jonasschnelli&gt;</span> if we start to use n:n, enterprises will probably use it for multi-user wallet backends...
<a name="l-119"></a><span class="tm">19:15:32</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">wumpus:</span> user:wallet makes a split off later simpler
<a name="l-120"></a><span class="tm">19:15:33</span><span class="nk"> &lt;jonasschnelli&gt;</span> and removing – if it gets to complicated – is hard or even impossible (like the accounting)
<a name="l-121"></a><span class="tm">19:15:34</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">jonasschnelli:</span> yes exactly... and what if there's a bug in that
<a name="l-122"></a><span class="tm">19:15:37</span><span class="nk"> &lt;luke-jr&gt;</span> endpoints makes splitting off later complex
<a name="l-123"></a><span class="tm">19:15:54</span><span class="nk"> &lt;wumpus&gt;</span> it moves all the (perceived) responsiblity for managing multi-user setups secure to us
<a name="l-124"></a><span class="tm">19:16:00</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">luke-jr:</span> endpoint would even work if each wallet runs in its own process
<a name="l-125"></a><span class="tm">19:16:04</span><span class="nk"> &lt;gmaxwell&gt;</span> How do we split wallets if we are using endpoints?
<a name="l-126"></a><span class="tm">19:16:08</span><span class="nk"> &lt;jonasschnelli&gt;</span> (though auth probably also)
<a name="l-127"></a><span class="tm">19:16:17</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">jonasschnelli:</span> huh? not really..?
<a name="l-128"></a><span class="tm">19:16:23</span><span class="nk"> &lt;jtimon&gt;</span> but multi-wallet doesn't imply multi-user, does it?
<a name="l-129"></a><span class="tm">19:16:25</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> what do you mean with "split wallets"?
<a name="l-130"></a><span class="tm">19:16:36</span><span class="nk"> &lt;gmaxwell&gt;</span> split wallets int oseperate processes
<a name="l-131"></a><span class="tm">19:16:51</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> different wallets have different URLs then
<a name="l-132"></a><span class="tm">19:17:04</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> so it's just another change: change the port...
<a name="l-133"></a><span class="tm">19:17:17</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">wumpus:</span> ALL of these options are simple URI changes..
<a name="l-134"></a><span class="tm">19:17:27</span><span class="nk"> &lt;achow101&gt;</span> how would different endpoints work with bitcoin-cli or the debug console?
<a name="l-135"></a><span class="tm">19:17:28</span><span class="nk"> &lt;luke-jr&gt;</span> although some tools don't allow changing the URI right now
<a name="l-136"></a><span class="tm">19:17:31</span><span class="nk"> &lt;wumpus&gt;</span> http://127.0.0.1:8333/wallet1 versus http://127.0.0.1:8334/wallet2
<a name="l-137"></a><span class="tm">19:17:39</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">achow101:</span> thats why it isn't ten lines of code.
<a name="l-138"></a><span class="tm">19:17:42</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">achow101:</span> you can add: -wallet=filename
<a name="l-139"></a><span class="tm">19:17:55</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">achow101:</span> just add an option
<a name="l-140"></a><span class="tm">19:18:03</span><span class="nk"> &lt;sipa&gt;</span> s/filename/name/
<a name="l-141"></a><span class="tm">19:18:09</span><span class="nk"> &lt;jonasschnelli&gt;</span> endpoints in bitcoin-cli is not really complex...
<a name="l-142"></a><span class="tm">19:18:10</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">achow101:</span> debug console isn't via RPC anyway
<a name="l-143"></a><span class="tm">19:18:11</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">sipa:</span> yes
<a name="l-144"></a><span class="tm">19:18:14</span><span class="nk"> &lt;achow101&gt;</span> but it certainly wouldn't work with debug console
<a name="l-145"></a><span class="tm">19:18:14</span><span class="nk"> &lt;gmaxwell&gt;</span> sipa +1
<a name="l-146"></a><span class="tm">19:18:39</span><span class="nk"> &lt;wumpus&gt;</span> as for debug console: you could ask the same question about authentication
<a name="l-147"></a><span class="tm">19:18:40</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">luke-jr:</span> I think we'll need endpoints in any case regardless of auth to set a default.
<a name="l-148"></a><span class="tm">19:18:52</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">gmaxwell:</span> maybe
<a name="l-149"></a><span class="tm">19:18:52</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">achow101:</span> the whole GUI has no multiwallet interface
<a name="l-150"></a><span class="tm">19:18:58</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">luke-jr:</span> because that will be what you need to make it usable to work with multiple wallets as a single user.
<a name="l-151"></a><span class="tm">19:18:59</span><span class="nk"> &lt;wumpus&gt;</span> debug console is not authenticated at all - so adding endpoint/auth support is likely the similar amount of work
<a name="l-152"></a><span class="tm">19:19:24</span><span class="nk"> &lt;wumpus&gt;</span> if access control is implemented, a single user could want to have access to multiple wallets anyhow
<a name="l-153"></a><span class="tm">19:19:25</span><span class="nk"> &lt;gmaxwell&gt;</span> debug console should perhaps get a dropdown, and yes, it will be the same work either way.. probably easier with endpoints.
<a name="l-154"></a><span class="tm">19:19:31</span><span class="nk"> &lt;wumpus&gt;</span> so user=wallet is a bad abstraction
<a name="l-155"></a><span class="tm">19:19:36</span><span class="nk"> &lt;luke-jr&gt;</span> I already have the GUI done BTW
<a name="l-156"></a><span class="tm">19:19:43</span><span class="nk"> &lt;gmaxwell&gt;</span> yes you'll want to have access to multiple wallets from a single user regardless.
<a name="l-157"></a><span class="tm">19:19:44</span><span class="nk"> &lt;luke-jr&gt;</span> it's just based on the RPC branch
<a name="l-158"></a><span class="tm">19:19:51</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">luke-jr:</span> how does it let you select the wallet?
<a name="l-159"></a><span class="tm">19:19:52</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">luke-jr:</span> how does gui handle the debug console?
<a name="l-160"></a><span class="tm">19:19:56</span><span class="nk"> &lt;jonasschnelli&gt;</span> A very hackish (and very old) endpoint impl
<a name="l-161"></a><span class="tm">19:19:57</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">sipa:</span> comboboxes
<a name="l-162"></a><span class="tm">19:20:03</span><span class="nk"> &lt;jonasschnelli&gt;</span> A very hackish (and very old) endpoint impl for bitcoin-cli: https://github.com/jonasschnelli/bitcoin/blob/2015/05/corewallet/src/bitcoin-cli.cpp#L134
<a name="l-163"></a><span class="tm">19:20:05</span><span class="nk"> &lt;luke-jr&gt;</span> one in the main window, and one in the debug window
<a name="l-164"></a><span class="tm">19:20:20</span><span class="nk"> &lt;gmaxwell&gt;</span> sounds more or less okay.
<a name="l-165"></a><span class="tm">19:20:56</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">luke-jr:</span> so why not implement endpoints first?  surely even if your own use needs account you can carry a 5 line patch to allow accounts to select the default wallet.
<a name="l-166"></a><span class="tm">19:20:57</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">wumpus:</span> even if a single user can access multiple wallets, we still want a way to choose the default
<a name="l-167"></a><span class="tm">19:21:05</span><span class="nk"> &lt;gmaxwell&gt;</span> see above
<a name="l-168"></a><span class="tm">19:21:21</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">gmaxwell:</span> it's more code, and not done yet
<a name="l-169"></a><span class="tm">19:21:23</span><span class="nk"> &lt;wumpus&gt;</span> well the default wallet could depend on the user, I don't really care
<a name="l-170"></a><span class="tm">19:21:31</span><span class="nk"> &lt;luke-jr&gt;</span> I can implement it, but IMO it will delay things to make it the next step
<a name="l-171"></a><span class="tm">19:21:32</span><span class="nk"> &lt;wumpus&gt;</span> though I'd prefer to get rid of 'default wallet', in time
<a name="l-172"></a><span class="tm">19:21:35</span><span class="nk"> &lt;jonasschnelli&gt;</span> maybe the GUI should have a node window (network, peers) and a wallet-window per wallet...
<a name="l-173"></a><span class="tm">19:21:52</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> ugh
<a name="l-174"></a><span class="tm">19:21:58</span><span class="nk"> &lt;luke-jr&gt;</span> the user=&gt;wallet stuff is literally done and well-tested (in Knots), just needs to be rebased
<a name="l-175"></a><span class="tm">19:21:59</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jonasschnelli:</span> that doesn't sound like a good UI. :P
<a name="l-176"></a><span class="tm">19:22:07</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> /me remembers browsers before tabs
<a name="l-177"></a><span class="tm">19:22:08</span><span class="nk"> &lt;gmaxwell&gt;</span> at least not mandatory.
<a name="l-178"></a><span class="tm">19:22:13</span><span class="nk"> &lt;gmaxwell&gt;</span> what sipa says. :P
<a name="l-179"></a><span class="tm">19:22:20</span><span class="nk"> &lt;jonasschnelli&gt;</span> yeah... I like windows.. but I'm pretty alone nowadays with that
<a name="l-180"></a><span class="tm">19:22:31</span><span class="nk"> &lt;jonasschnelli&gt;</span> Yeah. Tabs make more sense I guess.
<a name="l-181"></a><span class="tm">19:22:37</span><span class="nk"> &lt;sipa&gt;</span> anyway, separate discussion
<a name="l-182"></a><span class="tm">19:22:52 </span><span class="nka">* jonasschnelli</span> <span class="ac">think sipa certainly browses with lynx</span>
<a name="l-183"></a><span class="tm">19:23:04</span><span class="nk"> &lt;sipa&gt;</span> i would really prefer endpoints or optional named argument to select a wallet, and deal with the authentication question later
<a name="l-184"></a><span class="tm">19:23:15</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">sipa:</span> +1
<a name="l-185"></a><span class="tm">19:23:16</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">luke-jr:</span> in any case, seems to me the path forward is to do the endpoints thing, and having auth pick default is a simple change which is either sufficiently non-objectionable or at least a trivial patch to carry.
<a name="l-186"></a><span class="tm">19:23:21</span><span class="nk"> &lt;achow101&gt;</span> <span class="hi">sipa:</span> ack
<a name="l-187"></a><span class="tm">19:23:22</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">sipa:</span> same for me
<a name="l-188"></a><span class="tm">19:23:27</span><span class="nk"> &lt;luke-jr&gt;</span> would anyone NACK if I go forward with user-&gt;wallet mappings since they're basically ready, and then do endpoints based on that?
<a name="l-189"></a><span class="tm">19:24:07</span><span class="nk"> &lt;achow101&gt;</span> probably
<a name="l-190"></a><span class="tm">19:24:09</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">luke-jr:</span> does it also support one user with many wallets?
<a name="l-191"></a><span class="tm">19:24:12</span><span class="nk"> &lt;wumpus&gt;</span> well as we determined above, a user may want to have access to multiple wallets, so a single user-&gt;wallet mapping just doesn't cut it, even if you want to add access control
<a name="l-192"></a><span class="tm">19:24:20</span><span class="nk"> &lt;gmaxwell&gt;</span> what wumpus says.
<a name="l-193"></a><span class="tm">19:24:28</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">gmaxwell:</span> the current code does not, but there's no reason the endpoints couldn't add that
<a name="l-194"></a><span class="tm">19:24:29</span><span class="nk"> &lt;wumpus&gt;</span> I really think we should just start with endpoints as sipa says
<a name="l-195"></a><span class="tm">19:24:52</span><span class="nk"> &lt;jnewbery&gt;</span> Isn't rpcuser deprecated anyway?
<a name="l-196"></a><span class="tm">19:24:54</span><span class="nk"> &lt;jonasschnelli&gt;</span> Yes. Let's start with endpoint.. I'll can write it next week because I already did once...
<a name="l-197"></a><span class="tm">19:24:57</span><span class="nk"> &lt;wumpus&gt;</span> I'm not going to NACK anything that makes progress though
<a name="l-198"></a><span class="tm">19:24:59</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">jnewbery:</span> it's rpcauth
<a name="l-199"></a><span class="tm">19:25:00</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jnewbery:</span> rpcauth isn't
<a name="l-200"></a><span class="tm">19:25:01</span><span class="nk"> &lt;jonasschnelli&gt;</span> *I can
<a name="l-201"></a><span class="tm">19:25:29</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jnewbery:</span> rpcuser is, but this is rpcauth (rpcuser doesn't even have multiple users)
<a name="l-202"></a><span class="tm">19:25:29</span><span class="nk"> &lt;jtimon&gt;</span> <span class="hi">jnewbery:</span> is rpcuser deprecated? since when?
<a name="l-203"></a><span class="tm">19:25:38</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jtimon:</span> a year?
<a name="l-204"></a><span class="tm">19:25:39</span><span class="nk"> &lt;achow101&gt;</span> <span class="hi">jtimon:</span> it's deprecated since a long time ago
<a name="l-205"></a><span class="tm">19:25:42</span><span class="nk"> &lt;gmaxwell&gt;</span> it prints out a notice!
<a name="l-206"></a><span class="tm">19:25:50</span><span class="nk"> &lt;wumpus&gt;</span> rpcuser is deprecated, people are encouraged to use either rpcauth or cookie auth
<a name="l-207"></a><span class="tm">19:25:59</span><span class="nk"> &lt;wumpus&gt;</span> we won't remove it just yet ofcourse
<a name="l-208"></a><span class="tm">19:26:09</span><span class="nk"> &lt;jtimon&gt;</span> oh, deprecated as in "we want to remove this", but it actually still works, no?
<a name="l-209"></a><span class="tm">19:26:14</span><span class="nk"> &lt;paveljanik&gt;</span> 26 minutes...
<a name="l-210"></a><span class="tm">19:26:14</span><span class="nk"> &lt;luke-jr&gt;</span> right
<a name="l-211"></a><span class="tm">19:26:15</span><span class="nk"> &lt;achow101&gt;</span> yes
<a name="l-212"></a><span class="tm">19:26:17</span><span class="nk"> &lt;wumpus&gt;</span> that is what deprecated means, yes
<a name="l-213"></a><span class="tm">19:26:28</span><span class="nk"> &lt;jtimon&gt;</span> yeah, sorry
<a name="l-214"></a><span class="tm">19:26:29</span><span class="nk"> &lt;instagibbs&gt;</span> paveljanik, 34 to go :P
<a name="l-215"></a><span class="tm">19:26:43</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">paveljanik:</span> what's so special about 26?
<a name="l-216"></a><span class="tm">19:26:49</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> any progress on GUI for database upgrade?
<a name="l-217"></a><span class="tm">19:26:58</span><span class="nk"> &lt;wumpus&gt;</span> <span class="topic">#topic </span><span class="topicline">GUI for database upgrade?</span>
<a name="l-218"></a><span class="tm">19:27:00</span><span class="nk"> &lt;gmaxwell&gt;</span> And we've wasted a perfectly good half hour. :P  luke should put up patches and we can yell at him on github, but I think I would really prefer if the first cut does multiple wallets for a user... (if nothing else, that is the easiest thing to test)
<a name="l-219"></a><span class="tm">19:27:00</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">sipa:</span> I sadly had only little time last and this week
<a name="l-220"></a><span class="tm">19:27:07</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">wumpus:</span> 21 is half of 42
<a name="l-221"></a><span class="tm">19:27:18</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">sipa:</span> I looked into it and wanted to ask you how I get the max size of a db cursor (to calc progress)
<a name="l-222"></a><span class="tm">19:27:42</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> it's not hard to estimate as txids are randomly distributed
<a name="l-223"></a><span class="tm">19:27:51</span><span class="nk"> &lt;gmaxwell&gt;</span> so you just look at the txid...
<a name="l-224"></a><span class="tm">19:27:54</span><span class="nk"> &lt;sipa&gt;</span> i can add code for that
<a name="l-225"></a><span class="tm">19:27:55</span><span class="nk"> &lt;gmaxwell&gt;</span> they're done in order.
<a name="l-226"></a><span class="tm">19:28:07</span><span class="nk"> &lt;gmaxwell&gt;</span> if it's at 0x01... then it's done 1/256 of it.
<a name="l-227"></a><span class="tm">19:28:12</span><span class="nk"> &lt;sipa&gt;</span> txid -&gt; arith_uint256 -&gt; * 100/2^256
<a name="l-228"></a><span class="tm">19:28:29</span><span class="nk"> &lt;jonasschnelli&gt;</span> Okay. The rest is simple (debug.log non newline [10%] progress   /  GUI splash screen progress with abort)
<a name="l-229"></a><span class="tm">19:28:39</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">BTW:</span> jnewbery rebased the label API pull (#7729), a lot of thanks for that
<a name="l-230"></a><span class="tm">19:28:41</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/7729 | rpc: introduce label API for wallet by laanwj · Pull Request #7729 · bitcoin/bitcoin · GitHub
<a name="l-231"></a><span class="tm">19:28:50</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> i'll write code for the progress estimation
<a name="l-232"></a><span class="tm">19:29:08</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">sipa:</span> Okay. Pass me over a commit and I'll finish the rest
<a name="l-233"></a><span class="tm">19:29:14</span><span class="nk"> &lt;jnewbery&gt;</span> <span class="hi">wumpus:</span> no problem. I wanted to test drive it :)
<a name="l-234"></a><span class="tm">19:30:38</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> \O/ on the label rebase.
<a name="l-235"></a><span class="tm">19:30:53</span><span class="nk"> &lt;wumpus&gt;</span> must have been a nightmare
<a name="l-236"></a><span class="tm">19:31:27</span><span class="nk"> &lt;wumpus&gt;</span> any other topics?
<a name="l-237"></a><span class="tm">19:31:51</span><span class="nk"> &lt;jonasschnelli&gt;</span> what about the rpc splitting,... has that been discussed so far?
<a name="l-238"></a><span class="tm">19:32:04</span><span class="nk"> &lt;jnewbery&gt;</span> There had been quite a few refactors. I think the rebase was good, but reviewers should look out for anything that looks off
<a name="l-239"></a><span class="tm">19:32:06</span><span class="nk"> &lt;jonasschnelli&gt;</span> signrawwithkey, etc.?
<a name="l-240"></a><span class="tm">19:32:09</span><span class="nk"> &lt;wumpus&gt;</span> rpc splitting?
<a name="l-241"></a><span class="tm">19:32:26</span><span class="nk"> &lt;achow101&gt;</span> the PRs I made to unfuck signrawtx and validateaddress
<a name="l-242"></a><span class="tm">19:32:42</span><span class="nk"> &lt;wumpus&gt;</span> ah https://github.com/bitcoin/bitcoin/pull/10583
<a name="l-243"></a><span class="tm">19:32:47</span><span class="nk"> &lt;wumpus&gt;</span> <span class="cmd">#10583</span><span class="cmdline"></span>
<a name="l-244"></a><span class="tm">19:32:48</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">achow101:</span> yes. Those..
<a name="l-245"></a><span class="tm">19:32:48</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/10583 | [RPC] Split part of validateaddress into getaddressinfo by achow101 · Pull Request #10583 · bitcoin/bitcoin · GitHub
<a name="l-246"></a><span class="tm">19:33:04</span><span class="nk"> &lt;wumpus&gt;</span> <span class="topic">#topic </span><span class="topicline">split off wallet functionality from mixed wallet/non-wallet RPC calls</span>
<a name="l-247"></a><span class="tm">19:33:08</span><span class="nk"> &lt;wumpus&gt;</span> or something
<a name="l-248"></a><span class="tm">19:33:22</span><span class="nk"> &lt;achow101&gt;</span> <span class="cmd">#10570</span><span class="cmdline"></span>
<a name="l-249"></a><span class="tm">19:33:23</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/10570 | [RPC] Split signrawtransaction into multiple distinct RPCs · Issue #10570 · bitcoin/bitcoin · GitHub
<a name="l-250"></a><span class="tm">19:33:45</span><span class="nk"> &lt;wumpus&gt;</span> concept ack (haven't gotten around to reviewing anything)
<a name="l-251"></a><span class="tm">19:33:48</span><span class="nk"> &lt;gmaxwell&gt;</span> I think those changes all make sense.  Someone commented about breaking compatibility, but its for a new major version and it will be easy for callers to update their behavior.
<a name="l-252"></a><span class="tm">19:33:59</span><span class="nk"> &lt;morcos&gt;</span> i'm here now.. haven't caught up on backlog
<a name="l-253"></a><span class="tm">19:34:06</span><span class="nk"> &lt;sipa&gt;</span> it breaks compatibility with a never documented or advertized feature :)
<a name="l-254"></a><span class="tm">19:34:07</span><span class="nk"> &lt;wumpus&gt;</span> well we could allow both, for one major version
<a name="l-255"></a><span class="tm">19:34:10</span><span class="nk"> &lt;gmaxwell&gt;</span> Though we might want to rename the old calls at the same time. (a suggestion for discussion)
<a name="l-256"></a><span class="tm">19:34:20</span><span class="nk"> &lt;sipa&gt;</span> (concatenating multiple tx hex strings, yuck)
<a name="l-257"></a><span class="tm">19:34:25</span><span class="nk"> &lt;wumpus&gt;</span> wut?
<a name="l-258"></a><span class="tm">19:34:32</span><span class="nk"> &lt;wumpus&gt;</span> ok, we're talking about different things
<a name="l-259"></a><span class="tm">19:34:37</span><span class="nk"> &lt;instagibbs&gt;</span> aside from mixing wallet/nonwallet, what's the issue with validateaddress?
<a name="l-260"></a><span class="tm">19:34:38</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">sipa:</span> it was certantly advertised and known.
<a name="l-261"></a><span class="tm">19:34:40</span><span class="nk"> &lt;wumpus&gt;</span> I mean validateaddress/getaddressinfo
<a name="l-262"></a><span class="tm">19:34:42</span><span class="nk"> &lt;instagibbs&gt;</span> (or is that the issue)
<a name="l-263"></a><span class="tm">19:34:50</span><span class="nk"> &lt;achow101&gt;</span> <span class="hi">instagibbs:</span> that's the issue
<a name="l-264"></a><span class="tm">19:34:51</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">wumpus:</span> ah, i'm talking about signrawtransaction
<a name="l-265"></a><span class="tm">19:34:52</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> he's talking about the signraw split to create the combine call.
<a name="l-266"></a><span class="tm">19:34:52</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">instagibbs:</span> that is the issue
<a name="l-267"></a><span class="tm">19:34:57</span><span class="nk"> &lt;instagibbs&gt;</span> ok, are we killing off getinfo then too:
<a name="l-268"></a><span class="tm">19:34:59</span><span class="nk"> &lt;instagibbs&gt;</span> :)
<a name="l-269"></a><span class="tm">19:35:05</span><span class="nk"> &lt;achow101&gt;</span> hopefully :D
<a name="l-270"></a><span class="tm">19:35:11</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">instagibbs:</span> yes, but that's not the topic now
<a name="l-271"></a><span class="tm">19:35:16</span><span class="nk"> &lt;gmaxwell&gt;</span> I would miss getinfo. all the other commands take more typing. :P
<a name="l-272"></a><span class="tm">19:35:17</span><span class="nk"> &lt;wumpus&gt;</span> we're already confusing two things, let's add more!
<a name="l-273"></a><span class="tm">19:35:25</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> okay!
<a name="l-274"></a><span class="tm">19:35:25</span><span class="nk"> &lt;instagibbs&gt;</span> eh, we're talking about blowing away validateaddress as is, sorry
<a name="l-275"></a><span class="tm">19:35:26</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> hey I have a pull that implements it client side
<a name="l-276"></a><span class="tm">19:35:46</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> lol.  can you name the rpc call "gi" :P even less typing.
<a name="l-277"></a><span class="tm">19:35:47</span><span class="nk"> &lt;jonasschnelli&gt;</span> IMO having a non wallet sign rawtx where priv keys are passed aroung in a shell over a possible TCP channel is not ideal.. but we already have it... I though instead of splitting it off, move it to the tool
<a name="l-278"></a><span class="tm">19:35:55</span><span class="nk"> &lt;jonasschnelli&gt;</span> But I see the point with getting the UTXOs
<a name="l-279"></a><span class="tm">19:36:01</span><span class="nk"> &lt;sipa&gt;</span> let's rename all RPCs to get*info... for example s/sendtoaddress/getnewpaymenttxid/
<a name="l-280"></a><span class="tm">19:36:08</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jonasschnelli:</span> we need the UTXOs or its all awfulsauce.
<a name="l-281"></a><span class="tm">19:36:11</span><span class="nk"> &lt;instagibbs&gt;</span> sipa, lol
<a name="l-282"></a><span class="tm">19:36:16</span><span class="nk"> &lt;wumpus&gt;</span> <span class="cmd">#8843</span><span class="cmdline"></span>
<a name="l-283"></a><span class="tm">19:36:17</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/8843 | rpc: Handle `getinfo` client-side in bitcoin-cli w/ `-getinfo` by laanwj · Pull Request #8843 · bitcoin/bitcoin · GitHub
<a name="l-284"></a><span class="tm">19:36:18</span><span class="nk"> &lt;luke-jr&gt;</span> lol
<a name="l-285"></a><span class="tm">19:36:28</span><span class="nk"> &lt;luke-jr&gt;</span> getsignedtransaction
<a name="l-286"></a><span class="tm">19:36:31</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">gmaxwell:</span> I though the node RPC can spitout what you need to pass it into bitcoin-tx or so...
<a name="l-287"></a><span class="tm">19:36:48</span><span class="nk"> &lt;jonasschnelli&gt;</span> but I know... very inconvinient
<a name="l-288"></a><span class="tm">19:36:48</span><span class="nk"> &lt;luke-jr&gt;</span> getthistransactionbroadcast
<a name="l-289"></a><span class="tm">19:36:50</span><span class="nk"> &lt;luke-jr&gt;</span> :p
<a name="l-290"></a><span class="tm">19:36:51</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> sure it can; it's just more convenient to not need that
<a name="l-291"></a><span class="tm">19:36:51</span><span class="nk"> &lt;wumpus&gt;</span> eventually closed it because the only person responding was luke-jr and he kept arguing against it
<a name="l-292"></a><span class="tm">19:37:08</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jonasschnelli:</span> and that adds steps to the process.. which is already long enough that it's prone to error.
<a name="l-293"></a><span class="tm">19:37:14</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> it's called listunspent
<a name="l-294"></a><span class="tm">19:37:16</span><span class="nk"> &lt;jonasschnelli&gt;</span> It's just another source how people can shoot themselfs with exposing priv keys
<a name="l-295"></a><span class="tm">19:37:28</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">luke-jr:</span> why do you hate freedom?
<a name="l-296"></a><span class="tm">19:37:32</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">gmaxwell:</span> !⁈
<a name="l-297"></a><span class="tm">19:37:35</span><span class="nk"> &lt;gmaxwell&gt;</span> haha
<a name="l-298"></a><span class="tm">19:38:30</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> but the functionality already exists, and i very much like removing it from the wallet (so people at least won't accidentally mix up privkey based operations with wallet stuff)
<a name="l-299"></a><span class="tm">19:38:54</span><span class="nk"> &lt;instagibbs&gt;</span> sipa, ok I see the motivation there
<a name="l-300"></a><span class="tm">19:38:58</span><span class="nk"> &lt;gmaxwell&gt;</span> anyways, I can just say that I have tried to stop using getinfo and failed. Mostly because typing getnetworkinfo getblockchainfo getfooooooooooinfo and then wading through a bunch of things when I want to see: How many connections, which block am I at, and what wallet am I running (which I can tell via the balance). :P  just personal feedback.
<a name="l-301"></a><span class="tm">19:39:01</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">gmaxwell:</span> I didn't even NACK it :o
<a name="l-302"></a><span class="tm">19:39:04</span><span class="nk"> &lt;jonasschnelli&gt;</span> Yes... I guess that makes sense. I kinda hoped once we touch that we could move it away from the node into a sep. process
<a name="l-303"></a><span class="tm">19:39:21</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">gmaxwell:</span> use the GUI for that! :p
<a name="l-304"></a><span class="tm">19:39:31</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> i have a vague proposal for that too, but it's more complicated
<a name="l-305"></a><span class="tm">19:39:37</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">luke-jr:</span> again, why do you hate freedom? :P
<a name="l-306"></a><span class="tm">19:39:50</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> and involves a new format for partially signed transactions...
<a name="l-307"></a><span class="tm">19:39:57</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> anyhow we can easily reopen and rebase that PR, bitcoin-cli hardly changed since then
<a name="l-308"></a><span class="tm">19:40:01</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">wumpus:</span> ack
<a name="l-309"></a><span class="tm">19:40:03</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">sipa:</span> that contains everything you need to sign?
<a name="l-310"></a><span class="tm">19:40:08</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">gmaxwell:</span> make a shell alias to all the calls ;)
<a name="l-311"></a><span class="tm">19:40:23</span><span class="nk"> &lt;gmaxwell&gt;</span> it's so much easier to have a signing blob thing post segwit. :(
<a name="l-312"></a><span class="tm">19:40:37</span><span class="nk"> &lt;bitcoin-git&gt;</span> [13bitcoin] 15laanwj reopened pull request #8843: rpc: Handle `getinfo` client-side in bitcoin-cli w/ `-getinfo` (06master...062016_09_getinfo_clientside) 02https://github.com/bitcoin/bitcoin/pull/8843
<a name="l-313"></a><span class="tm">19:40:39</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> yes, contains amounts, change info, prevouts being spent, ...
<a name="l-314"></a><span class="tm">19:40:40</span><span class="nk"> &lt;wumpus&gt;</span> yes, let's activate segwit
<a name="l-315"></a><span class="tm">19:40:46</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">luke-jr:</span> I don't like customizing my expirence of bitcoin too much because then I'll just patch around everything that stinks.
<a name="l-316"></a><span class="tm">19:40:47 </span><span class="nka">* sipa</span> <span class="ac">revives segnet</span>
<a name="l-317"></a><span class="tm">19:41:09</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">sipa:</span> That's also something we could re-use for the detatched signing standard (a.k.a hardware wallet standard)
<a name="l-318"></a><span class="tm">19:41:11</span><span class="nk"> &lt;luke-jr&gt;</span> we could just leave getinfo how it is ;)
<a name="l-319"></a><span class="tm">19:41:26</span><span class="nk"> &lt;gmaxwell&gt;</span> in any case, we're offtopic. I think that achow's PRs are all nice incremental improvements and we should take them (after review)
<a name="l-320"></a><span class="tm">19:41:28</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> pre-segwit however, it also needs to contain the full spent transactions :(
<a name="l-321"></a><span class="tm">19:41:33</span><span class="nk"> &lt;luke-jr&gt;</span> bitcoin-cli -getinfo only handles 1 sortof-use-case, and leaves the other 2 supported use cases unaddressed
<a name="l-322"></a><span class="tm">19:41:35</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">gmaxwell:</span> agree
<a name="l-323"></a><span class="tm">19:41:37</span><span class="nk"> &lt;wumpus&gt;</span> after promising to deprecate it for years... yeah, of course....
<a name="l-324"></a><span class="tm">19:41:52</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">(disclaimer:</span> achow101'w my intern this summer, i asked him to work on those)
<a name="l-325"></a><span class="tm">19:42:02</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">sipa:</span> [full spent transactions], I guess that's okay.
<a name="l-326"></a><span class="tm">19:42:25</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> bitcoind unfortunately can't do that generically (you need the wallet for that)
<a name="l-327"></a><span class="tm">19:42:25</span><span class="nk"> &lt;wumpus&gt;</span> getinfo is going away, there's no going back now
<a name="l-328"></a><span class="tm">19:42:44</span><span class="nk"> &lt;luke-jr&gt;</span> let's add a getallinfo then
<a name="l-329"></a><span class="tm">19:42:46</span><span class="nk"> &lt;luke-jr&gt;</span> /s
<a name="l-330"></a><span class="tm">19:42:47</span><span class="nk"> &lt;wumpus&gt;</span> I've exactly documented what information you can find on what get*info command
<a name="l-331"></a><span class="tm">19:42:54</span><span class="nk"> &lt;gmaxwell&gt;</span> I am fine with it going away, but I don't believe we replaced it as well as we thought we did.
<a name="l-332"></a><span class="tm">19:43:01</span><span class="nk"> &lt;wumpus&gt;</span> and the client-side getinfo is ther for user friendlyness, if people want it
<a name="l-333"></a><span class="tm">19:43:01</span><span class="nk"> &lt;sipa&gt;</span> i have no problem with removing it, with or without 8843
<a name="l-334"></a><span class="tm">19:43:15</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">wumpus:</span> it doesn't work in the debug window
<a name="l-335"></a><span class="tm">19:43:16</span><span class="nk"> &lt;sipa&gt;</span> i'm sure i'll curse a bit that getinfo isn't around anymore, and then change my habits
<a name="l-336"></a><span class="tm">19:43:34</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">sipa:</span> I tried blocking it, you won't. the replacements right now are not usable.
<a name="l-337"></a><span class="tm">19:43:43</span><span class="nk"> &lt;luke-jr&gt;</span> :/
<a name="l-338"></a><span class="tm">19:43:50</span><span class="nk"> &lt;gmaxwell&gt;</span> But thats okay, wumpus suggestion would be fine, though luke has a point about the debug console.
<a name="l-339"></a><span class="tm">19:43:53</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">luke-jr:</span> isn't all the information in the debug window *without* typing anything?
<a name="l-340"></a><span class="tm">19:43:57</span><span class="nk"> &lt;achow101&gt;</span> removing getinfo will mess with a ton of things that use getinfo for basic rpc connection checking too...
<a name="l-341"></a><span class="tm">19:44:11</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">achow101:</span> and you're starting to bring that up *now*?
<a name="l-342"></a><span class="tm">19:44:12</span><span class="nk"> &lt;achow101&gt;</span> but I think it should be removed anyways
<a name="l-343"></a><span class="tm">19:44:12</span><span class="nk"> &lt;sipa&gt;</span> let's merge the getuptime rpc thing
<a name="l-344"></a><span class="tm">19:44:13</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> if it isn't we should make it. problem solved.
<a name="l-345"></a><span class="tm">19:44:22</span><span class="nk"> &lt;bitcoin-git&gt;</span> [13bitcoin] 15ryanofsky opened pull request #10605: Add AssertLockHeld assertions in CWallet::ListCoins (06master...06pr/listlock) 02https://github.com/bitcoin/bitcoin/pull/10605
<a name="l-346"></a><span class="tm">19:44:23</span><span class="nk"> &lt;instagibbs&gt;</span> achow101, move to dumpprivkey obv
<a name="l-347"></a><span class="tm">19:44:33</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> the first tab of the debug window pretty much shows everything, and indeed, if it isn't it could be added
<a name="l-348"></a><span class="tm">19:44:49</span><span class="nk"> &lt;sipa&gt;</span> oh, another topic: non-hardened key derivation
<a name="l-349"></a><span class="tm">19:44:51</span><span class="nk"> &lt;achow101&gt;</span> <span class="hi">wumpus:</span> well most of those things are old website scripts that were written once and never touched again by the authors
<a name="l-350"></a><span class="tm">19:44:54</span><span class="nk"> &lt;instagibbs&gt;</span> sipa, ACK
<a name="l-351"></a><span class="tm">19:44:54</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">luke-jr:</span> I think ^ is how we should handle the gui.  (also important to make it copy/pasteable if it isn't.)
<a name="l-352"></a><span class="tm">19:45:01</span><span class="nk"> &lt;wumpus&gt;</span> I'm really disappointed that years after deciding to deprecate getinfo we're still having this discussion
<a name="l-353"></a><span class="tm">19:45:12</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">wumpus:</span> lol maybe :D
<a name="l-354"></a><span class="tm">19:45:14</span><span class="nk"> &lt;wumpus&gt;</span> anyhow next topic
<a name="l-355"></a><span class="tm">19:45:20</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> sometimes you have to try things out to know their effects completely!
<a name="l-356"></a><span class="tm">19:45:30</span><span class="nk"> &lt;wumpus&gt;</span> <span class="topic">#topic </span><span class="topicline">non-hardened key derivation</span>
<a name="l-357"></a><span class="tm">19:45:32</span><span class="nk"> &lt;sipa&gt;</span> so
<a name="l-358"></a><span class="tm">19:45:53</span><span class="nk"> &lt;sipa&gt;</span> non-hardened key derivation has many use cases in addition to hardened
<a name="l-359"></a><span class="tm">19:46:02</span><span class="nk"> &lt;jonasschnelli&gt;</span> I guess NicolasDorier made good work there
<a name="l-360"></a><span class="tm">19:46:07</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">achow101:</span> we should carefully note it in the release notes of course
<a name="l-361"></a><span class="tm">19:46:13</span><span class="nk"> &lt;sipa&gt;</span> however, they also have a gaping wide security hole when child private keys are exposed
<a name="l-362"></a><span class="tm">19:46:23</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">achow101:</span> we could even make getinfo fail with a custom message
<a name="l-363"></a><span class="tm">19:46:29</span><span class="nk"> &lt;instagibbs&gt;</span> that plus dumpwallet will give you sads
<a name="l-364"></a><span class="tm">19:46:30</span><span class="nk"> &lt;sipa&gt;</span> thus, suggestion: allow a new wallet to be created with either harderned or unhardened keys
<a name="l-365"></a><span class="tm">19:46:40</span><span class="nk"> &lt;sipa&gt;</span> when you choose unhardened, dumpprivkey is disabled
<a name="l-366"></a><span class="tm">19:46:44</span><span class="nk"> &lt;instagibbs&gt;</span> xpub is only accessible through dumpwallet right now AFAIK
<a name="l-367"></a><span class="tm">19:46:45</span><span class="nk"> &lt;achow101&gt;</span> <span class="hi">wumpus:</span> returning null would probably not mess with anything
<a name="l-368"></a><span class="tm">19:46:49</span><span class="nk"> &lt;sipa&gt;</span> (but dumpmasterkey or whatever is still available)
<a name="l-369"></a><span class="tm">19:47:11</span><span class="nk"> &lt;achow101&gt;</span> <span class="hi">sipa:</span> there is no dumpmasterkey
<a name="l-370"></a><span class="tm">19:47:11</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">instagibbs:</span> dumpprivkey must be disabled anyways
<a name="l-371"></a><span class="tm">19:47:19</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">sipa:</span> I'd want to be able to mix them..
<a name="l-372"></a><span class="tm">19:47:23</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">achow101:</span> dumpmasterkey must be added
<a name="l-373"></a><span class="tm">19:47:30</span><span class="nk"> &lt;instagibbs&gt;</span> luke-jr, .... why
<a name="l-374"></a><span class="tm">19:47:31</span><span class="nk"> &lt;gmaxwell&gt;</span> this is a lot more interesting with multiwallet support in place, since the cases where you want that are mostly secondary wallets (like incoming payments with keys generated by your webserver)
<a name="l-375"></a><span class="tm">19:47:37</span><span class="nk"> &lt;wumpus&gt;</span> dumpmasterkey, isn't there a PR for that?
<a name="l-376"></a><span class="tm">19:47:42</span><span class="nk"> &lt;jonasschnelli&gt;</span> no
<a name="l-377"></a><span class="tm">19:47:47</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">instagibbs:</span> to generate reusable payment tokens
<a name="l-378"></a><span class="tm">19:47:49</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">luke-jr:</span> i guess that's fine; just disable dumpwallet, and dumpprivkey selectively for keys derived in a non-hardened fashion
<a name="l-379"></a><span class="tm">19:47:51</span><span class="nk"> &lt;gmaxwell&gt;</span> sipa said or whatever for a reason. :P
<a name="l-380"></a><span class="tm">19:47:54</span><span class="nk"> &lt;achow101&gt;</span> <span class="hi">jonasschnelli:</span> I'm stil lwaiting #9504
<a name="l-381"></a><span class="tm">19:47:55</span><span class="nk"> &lt;gribble&gt;</span> https://github.com/bitcoin/bitcoin/issues/9504 | [RPC] dumpmasterprivkey command by achow101 · Pull Request #9504 · bitcoin/bitcoin · GitHub
<a name="l-382"></a><span class="tm">19:48:04</span><span class="nk"> &lt;jonasschnelli&gt;</span> oh...
<a name="l-383"></a><span class="tm">19:48:05</span><span class="nk"> &lt;luke-jr&gt;</span> <span class="hi">sipa:</span> sgtm
<a name="l-384"></a><span class="tm">19:48:09</span><span class="nk"> &lt;wumpus&gt;</span> see, I wasn't crazy
<a name="l-385"></a><span class="tm">19:48:25</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">wumpus:</span> well, technically it doesn't prove that...
<a name="l-386"></a><span class="tm">19:48:26</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">achow101:</span> how can I not be aware of that PR... sorry for the missinfo
<a name="l-387"></a><span class="tm">19:48:34</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> true
<a name="l-388"></a><span class="tm">19:48:37</span><span class="nk"> &lt;sipa&gt;</span> getmissinfo
<a name="l-389"></a><span class="tm">19:48:47</span><span class="nk"> &lt;jonasschnelli&gt;</span> :/
<a name="l-390"></a><span class="tm">19:48:56</span><span class="nk"> &lt;jonasschnelli&gt;</span> (I even commited on the PR ^^)
<a name="l-391"></a><span class="tm">19:48:59</span><span class="nk"> &lt;jonasschnelli&gt;</span> commented
<a name="l-392"></a><span class="tm">19:49:15</span><span class="nk"> &lt;wumpus&gt;</span> getmisinfo would really fit with the spirit of the times
<a name="l-393"></a><span class="tm">19:49:19</span><span class="nk"> &lt;gmaxwell&gt;</span> Anyways, I think that sounds okay. These applications will likely need a couple of extra RPCs too. no need to design here however.  (e.g. it will need to export the extended public key.)
<a name="l-394"></a><span class="tm">19:49:33</span><span class="nk"> &lt;sipa&gt;</span> not much more to say about the topic - just pointing out that if we disable dumping child private keys, my concern with non-hardered derivation largely goes away
<a name="l-395"></a><span class="tm">19:49:47</span><span class="nk"> &lt;wumpus&gt;</span> anyhow, no problem with non-hardened key support
<a name="l-396"></a><span class="tm">19:49:58</span><span class="nk"> &lt;jonasschnelli&gt;</span> I guess with allowing xpub derivation, flexible keypath would be welcome..
<a name="l-397"></a><span class="tm">19:50:04</span><span class="nk"> &lt;jonasschnelli&gt;</span> People want to use BIP44
<a name="l-398"></a><span class="tm">19:50:06</span><span class="nk"> &lt;wumpus&gt;</span> as an option, not as default
<a name="l-399"></a><span class="tm">19:50:08</span><span class="nk"> &lt;gmaxwell&gt;</span> w/ disabling and it not being a default thing. sounds great to me.
<a name="l-400"></a><span class="tm">19:50:25</span><span class="nk"> &lt;achow101&gt;</span> sgtm
<a name="l-401"></a><span class="tm">19:50:51</span><span class="nk"> &lt;jonasschnelli&gt;</span> Yes. Would be a great change...
<a name="l-402"></a><span class="tm">19:50:59</span><span class="nk"> &lt;gmaxwell&gt;</span> also so long as we do the extra rpcs to make it actually useful (like extract the extended public keys, and whatever else is needed to handle an external address generator.)
<a name="l-403"></a><span class="tm">19:51:13</span><span class="nk"> &lt;jonasschnelli&gt;</span> I guess keypool handling would be much simpler with xpub derivation
<a name="l-404"></a><span class="tm">19:51:22</span><span class="nk"> &lt;gmaxwell&gt;</span> I doubt it?
<a name="l-405"></a><span class="tm">19:51:30</span><span class="nk"> &lt;instagibbs&gt;</span> I think it's the same-ish
<a name="l-406"></a><span class="tm">19:51:33</span><span class="nk"> &lt;jonasschnelli&gt;</span> Why would you need a keypool with xpub derivation?
<a name="l-407"></a><span class="tm">19:51:41</span><span class="nk"> &lt;gmaxwell&gt;</span> for scanning.
<a name="l-408"></a><span class="tm">19:51:41</span><span class="nk"> &lt;jonasschnelli&gt;</span> you derive when you need
<a name="l-409"></a><span class="tm">19:51:50</span><span class="nk"> &lt;instagibbs&gt;</span> you have master seed already, you can already do that
<a name="l-410"></a><span class="tm">19:51:50</span><span class="nk"> &lt;jonasschnelli&gt;</span> you always derive the lookup window in mem
<a name="l-411"></a><span class="tm">19:51:53</span><span class="nk"> &lt;gmaxwell&gt;</span> you need to scan forward to know when you're paid.
<a name="l-412"></a><span class="tm">19:52:05</span><span class="nk"> &lt;jonasschnelli&gt;</span> +1000 keys in mem should be ackish
<a name="l-413"></a><span class="tm">19:52:18</span><span class="nk"> &lt;jonasschnelli&gt;</span> (pubkeys)
<a name="l-414"></a><span class="tm">19:52:26</span><span class="nk"> &lt;gmaxwell&gt;</span> yes, the keypool doesn't technically need to be saved on disk, though it may be faster to do so then to generate thousands of addresses at every wallet load.
<a name="l-415"></a><span class="tm">19:52:39</span><span class="nk"> &lt;gmaxwell&gt;</span> but otherwise I think its the same.
<a name="l-416"></a><span class="tm">19:52:56</span><span class="nk"> &lt;jonasschnelli&gt;</span> I'd say loading the keypool at wallet load takes almost the same (or longer)
<a name="l-417"></a><span class="tm">19:53:28</span><span class="nk"> &lt;jtimon&gt;</span> <span class="hi">sipa:</span> why would people want to dump child private keys?
<a name="l-418"></a><span class="tm">19:53:32</span><span class="nk"> &lt;gmaxwell&gt;</span> okay, this would make the change much more intrusive then I think.
<a name="l-419"></a><span class="tm">19:53:39</span><span class="nk"> &lt;instagibbs&gt;</span> jtimon, you want to stop them from doing so
<a name="l-420"></a><span class="tm">19:53:47</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jtimon:</span> same reason some people eat paste.  (they don't know better)
<a name="l-421"></a><span class="tm">19:53:52</span><span class="nk"> &lt;jonasschnelli&gt;</span> heh
<a name="l-422"></a><span class="tm">19:53:57</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">jonasschnelli:</span> the reason creating new keys is slow, is because we flush them all individually to disk
<a name="l-423"></a><span class="tm">19:54:11</span><span class="nk"> &lt;wumpus&gt;</span> yes...
<a name="l-424"></a><span class="tm">19:54:17</span><span class="nk"> &lt;jtimon&gt;</span> <span class="hi">gmaxwell:</span> I see
<a name="l-425"></a><span class="tm">19:54:21</span><span class="nk"> &lt;jonasschnelli&gt;</span> Yes. In-mem non-bdb "keypool" would be much faster
<a name="l-426"></a><span class="tm">19:54:41</span><span class="nk"> &lt;gmaxwell&gt;</span> that flushing is not required anymore with hdwallets regardless, I believe.
<a name="l-427"></a><span class="tm">19:54:45</span><span class="nk"> &lt;sipa&gt;</span> <span class="hi">gmaxwell:</span> exactly
<a name="l-428"></a><span class="tm">19:55:00</span><span class="nk"> &lt;jonasschnelli&gt;</span> With xpub derivation, would there be really a need to write the pool to disk? I doubt it
<a name="l-429"></a><span class="tm">19:55:07</span><span class="nk"> &lt;gmaxwell&gt;</span> (we will still need a flush to know how many we've given out...)
<a name="l-430"></a><span class="tm">19:55:09</span><span class="nk"> &lt;wumpus&gt;</span> <span class="hi">gmaxwell:</span> good point!
<a name="l-431"></a><span class="tm">19:55:29</span><span class="nk"> &lt;jonasschnelli&gt;</span> All you need is the seed
<a name="l-432"></a><span class="tm">19:55:44</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jonasschnelli:</span> no, not a need, though why result in more distinct codepaths?  I would expect it to also make loading faster.
<a name="l-433"></a><span class="tm">19:55:47</span><span class="nk"> &lt;achow101&gt;</span> you just need to write the path of the most recent key
<a name="l-434"></a><span class="tm">19:55:48</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">gmaxwell:</span> yes. thats a good point
<a name="l-435"></a><span class="tm">19:56:11</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">achow101:</span> Yes.
<a name="l-436"></a><span class="tm">19:56:14</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">achow101:</span> yes, every new address still needs to do a wallet flush.  But on bulk key creation we do not need a flush for each operation.
<a name="l-437"></a><span class="tm">19:56:38</span><span class="nk"> &lt;gmaxwell&gt;</span> e.g. starting up for the first time with a keypoool of 10000.
<a name="l-438"></a><span class="tm">19:58:26</span><span class="nk"> &lt;wumpus&gt;</span> two minutes to go
<a name="l-439"></a><span class="tm">19:58:33</span><span class="nk"> &lt;gmaxwell&gt;</span> <span class="hi">jonasschnelli:</span> did you ever get around to implementing the change where any key that is noticed used on the blockchain marks all the earlier keys in its chain as used?
<a name="l-440"></a><span class="tm">19:58:52</span><span class="nk"> &lt;jonasschnelli&gt;</span> <span class="hi">gmaxwell:</span> HD restore?
<a name="l-441"></a><span class="tm">19:59:12</span><span class="nk"> &lt;jonasschnelli&gt;</span> https://github.com/bitcoin/bitcoin/pull/10240
<a name="l-442"></a><span class="tm">19:59:16</span><span class="nk"> &lt;gmaxwell&gt;</span> it's part of your restore pr? okay.
<a name="l-443"></a><span class="tm">19:59:25</span><span class="nk"> &lt;jonasschnelli&gt;</span> That makes all keys as used up to the one found
<a name="l-444"></a><span class="tm">19:59:30</span><span class="nk"> &lt;gmaxwell&gt;</span> great.
<a name="l-445"></a><span class="tm">19:59:34</span><span class="nk"> &lt;jonasschnelli&gt;</span> It can even temp. halt the sync if you prune, etc.
<a name="l-446"></a><span class="tm">19:59:39</span><span class="nk"> &lt;jonasschnelli&gt;</span> Needs overhaul and rebase...
<a name="l-447"></a><span class="tm">19:59:46</span><span class="nk"> &lt;jonasschnelli&gt;</span> It's already (too) big
<a name="l-448"></a><span class="tm">19:59:54</span><span class="nk"> &lt;jonasschnelli&gt;</span> ryanofsky gave me a hard time
<a name="l-449"></a><span class="tm">20:00:01</span><span class="nk"> &lt;sipa&gt;</span> <span class="cmd">#getmeetingendinfo</span><span class="cmdline"></span>
<a name="l-450"></a><span class="tm">20:00:12</span><span class="nk"> &lt;wumpus&gt;</span> <span class="cmd">#endmeeting</span><span class="cmdline"></span></pre>
</body></html>
